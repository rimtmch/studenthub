function rp(i,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const o in s)if(o!=="default"&&!(o in i)){const l=Object.getOwnPropertyDescriptor(s,o);l&&Object.defineProperty(i,o,l.get?l:{enumerable:!0,get:()=>s[o]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function ou(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function P0(i){if(Object.prototype.hasOwnProperty.call(i,"__esModule"))return i;var e=i.default;if(typeof e=="function"){var t=function s(){var o=!1;try{o=this instanceof s}catch{}return o?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(i).forEach(function(s){var o=Object.getOwnPropertyDescriptor(i,s);Object.defineProperty(t,s,o.get?o:{enumerable:!0,get:function(){return i[s]}})}),t}var bl={exports:{}},Ns={},kl={exports:{}},_e={};var gh;function A0(){if(gh)return _e;gh=1;var i=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),_=Symbol.iterator;function b(j){return j===null||typeof j!="object"?null:(j=_&&j[_]||j["@@iterator"],typeof j=="function"?j:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,N={};function C(j,F,ye){this.props=j,this.context=F,this.refs=N,this.updater=ye||k}C.prototype.isReactComponent={},C.prototype.setState=function(j,F){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,F,"setState")},C.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function I(){}I.prototype=C.prototype;function S(j,F,ye){this.props=j,this.context=F,this.refs=N,this.updater=ye||k}var P=S.prototype=new I;P.constructor=S,T(P,C.prototype),P.isPureReactComponent=!0;var L=Array.isArray,W=Object.prototype.hasOwnProperty,H={current:null},Q={key:!0,ref:!0,__self:!0,__source:!0};function se(j,F,ye){var we,$={},J=null,fe=null;if(F!=null)for(we in F.ref!==void 0&&(fe=F.ref),F.key!==void 0&&(J=""+F.key),F)W.call(F,we)&&!Q.hasOwnProperty(we)&&($[we]=F[we]);var de=arguments.length-2;if(de===1)$.children=ye;else if(1<de){for(var xe=Array(de),ne=0;ne<de;ne++)xe[ne]=arguments[ne+2];$.children=xe}if(j&&j.defaultProps)for(we in de=j.defaultProps,de)$[we]===void 0&&($[we]=de[we]);return{$$typeof:i,type:j,key:J,ref:fe,props:$,_owner:H.current}}function ve(j,F){return{$$typeof:i,type:j.type,key:F,ref:j.ref,props:j.props,_owner:j._owner}}function G(j){return typeof j=="object"&&j!==null&&j.$$typeof===i}function Ce(j){var F={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(ye){return F[ye]})}var ge=/\/+/g;function Ee(j,F){return typeof j=="object"&&j!==null&&j.key!=null?Ce(""+j.key):F.toString(36)}function qe(j,F,ye,we,$){var J=typeof j;(J==="undefined"||J==="boolean")&&(j=null);var fe=!1;if(j===null)fe=!0;else switch(J){case"string":case"number":fe=!0;break;case"object":switch(j.$$typeof){case i:case e:fe=!0}}if(fe)return fe=j,$=$(fe),j=we===""?"."+Ee(fe,0):we,L($)?(ye="",j!=null&&(ye=j.replace(ge,"$&/")+"/"),qe($,F,ye,"",function(ne){return ne})):$!=null&&(G($)&&($=ve($,ye+(!$.key||fe&&fe.key===$.key?"":(""+$.key).replace(ge,"$&/")+"/")+j)),F.push($)),1;if(fe=0,we=we===""?".":we+":",L(j))for(var de=0;de<j.length;de++){J=j[de];var xe=we+Ee(J,de);fe+=qe(J,F,ye,xe,$)}else if(xe=b(j),typeof xe=="function")for(j=xe.call(j),de=0;!(J=j.next()).done;)J=J.value,xe=we+Ee(J,de++),fe+=qe(J,F,ye,xe,$);else if(J==="object")throw F=String(j),Error("Objects are not valid as a React child (found: "+(F==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":F)+"). If you meant to render a collection of children, use an array instead.");return fe}function rt(j,F,ye){if(j==null)return j;var we=[],$=0;return qe(j,we,"","",function(J){return F.call(ye,J,$++)}),we}function Ge(j){if(j._status===-1){var F=j._result;F=F(),F.then(function(ye){(j._status===0||j._status===-1)&&(j._status=1,j._result=ye)},function(ye){(j._status===0||j._status===-1)&&(j._status=2,j._result=ye)}),j._status===-1&&(j._status=0,j._result=F)}if(j._status===1)return j._result.default;throw j._result}var Ie={current:null},K={transition:null},ce={ReactCurrentDispatcher:Ie,ReactCurrentBatchConfig:K,ReactCurrentOwner:H};function X(){throw Error("act(...) is not supported in production builds of React.")}return _e.Children={map:rt,forEach:function(j,F,ye){rt(j,function(){F.apply(this,arguments)},ye)},count:function(j){var F=0;return rt(j,function(){F++}),F},toArray:function(j){return rt(j,function(F){return F})||[]},only:function(j){if(!G(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},_e.Component=C,_e.Fragment=t,_e.Profiler=o,_e.PureComponent=S,_e.StrictMode=s,_e.Suspense=f,_e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ce,_e.act=X,_e.cloneElement=function(j,F,ye){if(j==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+j+".");var we=T({},j.props),$=j.key,J=j.ref,fe=j._owner;if(F!=null){if(F.ref!==void 0&&(J=F.ref,fe=H.current),F.key!==void 0&&($=""+F.key),j.type&&j.type.defaultProps)var de=j.type.defaultProps;for(xe in F)W.call(F,xe)&&!Q.hasOwnProperty(xe)&&(we[xe]=F[xe]===void 0&&de!==void 0?de[xe]:F[xe])}var xe=arguments.length-2;if(xe===1)we.children=ye;else if(1<xe){de=Array(xe);for(var ne=0;ne<xe;ne++)de[ne]=arguments[ne+2];we.children=de}return{$$typeof:i,type:j.type,key:$,ref:J,props:we,_owner:fe}},_e.createContext=function(j){return j={$$typeof:u,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},j.Provider={$$typeof:l,_context:j},j.Consumer=j},_e.createElement=se,_e.createFactory=function(j){var F=se.bind(null,j);return F.type=j,F},_e.createRef=function(){return{current:null}},_e.forwardRef=function(j){return{$$typeof:d,render:j}},_e.isValidElement=G,_e.lazy=function(j){return{$$typeof:w,_payload:{_status:-1,_result:j},_init:Ge}},_e.memo=function(j,F){return{$$typeof:g,type:j,compare:F===void 0?null:F}},_e.startTransition=function(j){var F=K.transition;K.transition={};try{j()}finally{K.transition=F}},_e.unstable_act=X,_e.useCallback=function(j,F){return Ie.current.useCallback(j,F)},_e.useContext=function(j){return Ie.current.useContext(j)},_e.useDebugValue=function(){},_e.useDeferredValue=function(j){return Ie.current.useDeferredValue(j)},_e.useEffect=function(j,F){return Ie.current.useEffect(j,F)},_e.useId=function(){return Ie.current.useId()},_e.useImperativeHandle=function(j,F,ye){return Ie.current.useImperativeHandle(j,F,ye)},_e.useInsertionEffect=function(j,F){return Ie.current.useInsertionEffect(j,F)},_e.useLayoutEffect=function(j,F){return Ie.current.useLayoutEffect(j,F)},_e.useMemo=function(j,F){return Ie.current.useMemo(j,F)},_e.useReducer=function(j,F,ye){return Ie.current.useReducer(j,F,ye)},_e.useRef=function(j){return Ie.current.useRef(j)},_e.useState=function(j){return Ie.current.useState(j)},_e.useSyncExternalStore=function(j,F,ye){return Ie.current.useSyncExternalStore(j,F,ye)},_e.useTransition=function(){return Ie.current.useTransition()},_e.version="18.3.1",_e}var vh;function au(){return vh||(vh=1,kl.exports=A0()),kl.exports}var yh;function I0(){if(yh)return Ns;yh=1;var i=au(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(d,f,g){var w,_={},b=null,k=null;g!==void 0&&(b=""+g),f.key!==void 0&&(b=""+f.key),f.ref!==void 0&&(k=f.ref);for(w in f)s.call(f,w)&&!l.hasOwnProperty(w)&&(_[w]=f[w]);if(d&&d.defaultProps)for(w in f=d.defaultProps,f)_[w]===void 0&&(_[w]=f[w]);return{$$typeof:e,type:d,key:b,ref:k,props:_,_owner:o.current}}return Ns.Fragment=t,Ns.jsx=u,Ns.jsxs=u,Ns}var wh;function j0(){return wh||(wh=1,bl.exports=I0()),bl.exports}var y=j0(),U=au();const sp=ou(U),O0=rp({__proto__:null,default:sp},[U]);var Qi={},El={exports:{}},vt={},Sl={exports:{}},Cl={};var xh;function M0(){return xh||(xh=1,(function(i){function e(K,ce){var X=K.length;K.push(ce);e:for(;0<X;){var j=X-1>>>1,F=K[j];if(0<o(F,ce))K[j]=ce,K[X]=F,X=j;else break e}}function t(K){return K.length===0?null:K[0]}function s(K){if(K.length===0)return null;var ce=K[0],X=K.pop();if(X!==ce){K[0]=X;e:for(var j=0,F=K.length,ye=F>>>1;j<ye;){var we=2*(j+1)-1,$=K[we],J=we+1,fe=K[J];if(0>o($,X))J<F&&0>o(fe,$)?(K[j]=fe,K[J]=X,j=J):(K[j]=$,K[we]=X,j=we);else if(J<F&&0>o(fe,X))K[j]=fe,K[J]=X,j=J;else break e}}return ce}function o(K,ce){var X=K.sortIndex-ce.sortIndex;return X!==0?X:K.id-ce.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;i.unstable_now=function(){return l.now()}}else{var u=Date,d=u.now();i.unstable_now=function(){return u.now()-d}}var f=[],g=[],w=1,_=null,b=3,k=!1,T=!1,N=!1,C=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(K){for(var ce=t(g);ce!==null;){if(ce.callback===null)s(g);else if(ce.startTime<=K)s(g),ce.sortIndex=ce.expirationTime,e(f,ce);else break;ce=t(g)}}function L(K){if(N=!1,P(K),!T)if(t(f)!==null)T=!0,Ge(W);else{var ce=t(g);ce!==null&&Ie(L,ce.startTime-K)}}function W(K,ce){T=!1,N&&(N=!1,I(se),se=-1),k=!0;var X=b;try{for(P(ce),_=t(f);_!==null&&(!(_.expirationTime>ce)||K&&!Ce());){var j=_.callback;if(typeof j=="function"){_.callback=null,b=_.priorityLevel;var F=j(_.expirationTime<=ce);ce=i.unstable_now(),typeof F=="function"?_.callback=F:_===t(f)&&s(f),P(ce)}else s(f);_=t(f)}if(_!==null)var ye=!0;else{var we=t(g);we!==null&&Ie(L,we.startTime-ce),ye=!1}return ye}finally{_=null,b=X,k=!1}}var H=!1,Q=null,se=-1,ve=5,G=-1;function Ce(){return!(i.unstable_now()-G<ve)}function ge(){if(Q!==null){var K=i.unstable_now();G=K;var ce=!0;try{ce=Q(!0,K)}finally{ce?Ee():(H=!1,Q=null)}}else H=!1}var Ee;if(typeof S=="function")Ee=function(){S(ge)};else if(typeof MessageChannel<"u"){var qe=new MessageChannel,rt=qe.port2;qe.port1.onmessage=ge,Ee=function(){rt.postMessage(null)}}else Ee=function(){C(ge,0)};function Ge(K){Q=K,H||(H=!0,Ee())}function Ie(K,ce){se=C(function(){K(i.unstable_now())},ce)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(K){K.callback=null},i.unstable_continueExecution=function(){T||k||(T=!0,Ge(W))},i.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ve=0<K?Math.floor(1e3/K):5},i.unstable_getCurrentPriorityLevel=function(){return b},i.unstable_getFirstCallbackNode=function(){return t(f)},i.unstable_next=function(K){switch(b){case 1:case 2:case 3:var ce=3;break;default:ce=b}var X=b;b=ce;try{return K()}finally{b=X}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(K,ce){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var X=b;b=K;try{return ce()}finally{b=X}},i.unstable_scheduleCallback=function(K,ce,X){var j=i.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?j+X:j):X=j,K){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=X+F,K={id:w++,callback:ce,priorityLevel:K,startTime:X,expirationTime:F,sortIndex:-1},X>j?(K.sortIndex=X,e(g,K),t(f)===null&&K===t(g)&&(N?(I(se),se=-1):N=!0,Ie(L,X-j))):(K.sortIndex=F,e(f,K),T||k||(T=!0,Ge(W))),K},i.unstable_shouldYield=Ce,i.unstable_wrapCallback=function(K){var ce=b;return function(){var X=b;b=ce;try{return K.apply(this,arguments)}finally{b=X}}}})(Cl)),Cl}var _h;function L0(){return _h||(_h=1,Sl.exports=M0()),Sl.exports}var bh;function D0(){if(bh)return vt;bh=1;var i=au(),e=L0();function t(n){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function l(n,r){u(n,r),u(n+"Capture",r)}function u(n,r){for(o[n]=r,n=0;n<r.length;n++)s.add(r[n])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},_={};function b(n){return f.call(_,n)?!0:f.call(w,n)?!1:g.test(n)?_[n]=!0:(w[n]=!0,!1)}function k(n,r,a,c){if(a!==null&&a.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function T(n,r,a,c){if(r===null||typeof r>"u"||k(n,r,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function N(n,r,a,c,h,p,x){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=c,this.attributeNamespace=h,this.mustUseProperty=a,this.propertyName=n,this.type=r,this.sanitizeURL=p,this.removeEmptyString=x}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){C[n]=new N(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var r=n[0];C[r]=new N(r,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){C[n]=new N(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){C[n]=new N(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){C[n]=new N(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){C[n]=new N(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){C[n]=new N(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){C[n]=new N(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){C[n]=new N(n,5,!1,n.toLowerCase(),null,!1,!1)});var I=/[\-:]([a-z])/g;function S(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var r=n.replace(I,S);C[r]=new N(r,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var r=n.replace(I,S);C[r]=new N(r,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var r=n.replace(I,S);C[r]=new N(r,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){C[n]=new N(n,1,!1,n.toLowerCase(),null,!1,!1)}),C.xlinkHref=new N("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){C[n]=new N(n,1,!1,n.toLowerCase(),null,!0,!0)});function P(n,r,a,c){var h=C.hasOwnProperty(r)?C[r]:null;(h!==null?h.type!==0:c||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(T(r,a,h,c)&&(a=null),c||h===null?b(r)&&(a===null?n.removeAttribute(r):n.setAttribute(r,""+a)):h.mustUseProperty?n[h.propertyName]=a===null?h.type===3?!1:"":a:(r=h.attributeName,c=h.attributeNamespace,a===null?n.removeAttribute(r):(h=h.type,a=h===3||h===4&&a===!0?"":""+a,c?n.setAttributeNS(c,r,a):n.setAttribute(r,a))))}var L=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,W=Symbol.for("react.element"),H=Symbol.for("react.portal"),Q=Symbol.for("react.fragment"),se=Symbol.for("react.strict_mode"),ve=Symbol.for("react.profiler"),G=Symbol.for("react.provider"),Ce=Symbol.for("react.context"),ge=Symbol.for("react.forward_ref"),Ee=Symbol.for("react.suspense"),qe=Symbol.for("react.suspense_list"),rt=Symbol.for("react.memo"),Ge=Symbol.for("react.lazy"),Ie=Symbol.for("react.offscreen"),K=Symbol.iterator;function ce(n){return n===null||typeof n!="object"?null:(n=K&&n[K]||n["@@iterator"],typeof n=="function"?n:null)}var X=Object.assign,j;function F(n){if(j===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);j=r&&r[1]||""}return`
`+j+n}var ye=!1;function we(n,r){if(!n||ye)return"";ye=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(D){var c=D}Reflect.construct(n,[],r)}else{try{r.call()}catch(D){c=D}n.call(r.prototype)}else{try{throw Error()}catch(D){c=D}n()}}catch(D){if(D&&c&&typeof D.stack=="string"){for(var h=D.stack.split(`
`),p=c.stack.split(`
`),x=h.length-1,E=p.length-1;1<=x&&0<=E&&h[x]!==p[E];)E--;for(;1<=x&&0<=E;x--,E--)if(h[x]!==p[E]){if(x!==1||E!==1)do if(x--,E--,0>E||h[x]!==p[E]){var R=`
`+h[x].replace(" at new "," at ");return n.displayName&&R.includes("<anonymous>")&&(R=R.replace("<anonymous>",n.displayName)),R}while(1<=x&&0<=E);break}}}finally{ye=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?F(n):""}function $(n){switch(n.tag){case 5:return F(n.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return n=we(n.type,!1),n;case 11:return n=we(n.type.render,!1),n;case 1:return n=we(n.type,!0),n;default:return""}}function J(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Q:return"Fragment";case H:return"Portal";case ve:return"Profiler";case se:return"StrictMode";case Ee:return"Suspense";case qe:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case Ce:return(n.displayName||"Context")+".Consumer";case G:return(n._context.displayName||"Context")+".Provider";case ge:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case rt:return r=n.displayName||null,r!==null?r:J(n.type)||"Memo";case Ge:r=n._payload,n=n._init;try{return J(n(r))}catch{}}return null}function fe(n){var r=n.type;switch(n.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=r.render,n=n.displayName||n.name||"",r.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return J(r);case 8:return r===se?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function de(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function xe(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function ne(n){var r=xe(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,r),c=""+n[r];if(!n.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,p=a.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return h.call(this)},set:function(x){c=""+x,p.call(this,x)}}),Object.defineProperty(n,r,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(x){c=""+x},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function ae(n){n._valueTracker||(n._valueTracker=ne(n))}function be(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var a=r.getValue(),c="";return n&&(c=xe(n)?n.checked?"true":"false":n.value),n=c,n!==a?(r.setValue(n),!0):!1}function dt(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Tt(n,r){var a=r.checked;return X({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function rr(n,r){var a=r.defaultValue==null?"":r.defaultValue,c=r.checked!=null?r.checked:r.defaultChecked;a=de(r.value!=null?r.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function Eu(n,r){r=r.checked,r!=null&&P(n,"checked",r,!1)}function Po(n,r){Eu(n,r);var a=de(r.value),c=r.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}r.hasOwnProperty("value")?Ao(n,r.type,a):r.hasOwnProperty("defaultValue")&&Ao(n,r.type,de(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(n.defaultChecked=!!r.defaultChecked)}function Su(n,r,a){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var c=r.type;if(!(c!=="submit"&&c!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+n._wrapperState.initialValue,a||r===n.value||(n.value=r),n.defaultValue=r}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function Ao(n,r,a){(r!=="number"||dt(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var zr=Array.isArray;function sr(n,r,a,c){if(n=n.options,r){r={};for(var h=0;h<a.length;h++)r["$"+a[h]]=!0;for(a=0;a<n.length;a++)h=r.hasOwnProperty("$"+n[a].value),n[a].selected!==h&&(n[a].selected=h),h&&c&&(n[a].defaultSelected=!0)}else{for(a=""+de(a),r=null,h=0;h<n.length;h++){if(n[h].value===a){n[h].selected=!0,c&&(n[h].defaultSelected=!0);return}r!==null||n[h].disabled||(r=n[h])}r!==null&&(r.selected=!0)}}function Io(n,r){if(r.dangerouslySetInnerHTML!=null)throw Error(t(91));return X({},r,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Cu(n,r){var a=r.value;if(a==null){if(a=r.children,r=r.defaultValue,a!=null){if(r!=null)throw Error(t(92));if(zr(a)){if(1<a.length)throw Error(t(93));a=a[0]}r=a}r==null&&(r=""),a=r}n._wrapperState={initialValue:de(a)}}function Tu(n,r){var a=de(r.value),c=de(r.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),r.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function Nu(n){var r=n.textContent;r===n._wrapperState.initialValue&&r!==""&&r!==null&&(n.value=r)}function Ru(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function jo(n,r){return n==null||n==="http://www.w3.org/1999/xhtml"?Ru(r):n==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var zs,Pu=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,a,c,h){MSApp.execUnsafeLocalFunction(function(){return n(r,a,c,h)})}:n})(function(n,r){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=r;else{for(zs=zs||document.createElement("div"),zs.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=zs.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;r.firstChild;)n.appendChild(r.firstChild)}});function qr(n,r){if(r){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=r;return}}n.textContent=r}var Hr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Om=["Webkit","ms","Moz","O"];Object.keys(Hr).forEach(function(n){Om.forEach(function(r){r=r+n.charAt(0).toUpperCase()+n.substring(1),Hr[r]=Hr[n]})});function Au(n,r,a){return r==null||typeof r=="boolean"||r===""?"":a||typeof r!="number"||r===0||Hr.hasOwnProperty(n)&&Hr[n]?(""+r).trim():r+"px"}function Iu(n,r){n=n.style;for(var a in r)if(r.hasOwnProperty(a)){var c=a.indexOf("--")===0,h=Au(a,r[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,h):n[a]=h}}var Mm=X({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Oo(n,r){if(r){if(Mm[n]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(t(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(t(61))}if(r.style!=null&&typeof r.style!="object")throw Error(t(62))}}function Mo(n,r){if(n.indexOf("-")===-1)return typeof r.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Lo=null;function Do(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Uo=null,ir=null,or=null;function ju(n){if(n=fs(n)){if(typeof Uo!="function")throw Error(t(280));var r=n.stateNode;r&&(r=hi(r),Uo(n.stateNode,n.type,r))}}function Ou(n){ir?or?or.push(n):or=[n]:ir=n}function Mu(){if(ir){var n=ir,r=or;if(or=ir=null,ju(n),r)for(n=0;n<r.length;n++)ju(r[n])}}function Lu(n,r){return n(r)}function Du(){}var $o=!1;function Uu(n,r,a){if($o)return n(r,a);$o=!0;try{return Lu(n,r,a)}finally{$o=!1,(ir!==null||or!==null)&&(Du(),Mu())}}function Wr(n,r){var a=n.stateNode;if(a===null)return null;var c=hi(a);if(c===null)return null;a=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,r,typeof a));return a}var Fo=!1;if(d)try{var Gr={};Object.defineProperty(Gr,"passive",{get:function(){Fo=!0}}),window.addEventListener("test",Gr,Gr),window.removeEventListener("test",Gr,Gr)}catch{Fo=!1}function Lm(n,r,a,c,h,p,x,E,R){var D=Array.prototype.slice.call(arguments,3);try{r.apply(a,D)}catch(V){this.onError(V)}}var Kr=!1,qs=null,Hs=!1,Bo=null,Dm={onError:function(n){Kr=!0,qs=n}};function Um(n,r,a,c,h,p,x,E,R){Kr=!1,qs=null,Lm.apply(Dm,arguments)}function $m(n,r,a,c,h,p,x,E,R){if(Um.apply(this,arguments),Kr){if(Kr){var D=qs;Kr=!1,qs=null}else throw Error(t(198));Hs||(Hs=!0,Bo=D)}}function Mn(n){var r=n,a=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(a=r.return),n=r.return;while(n)}return r.tag===3?a:null}function $u(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function Fu(n){if(Mn(n)!==n)throw Error(t(188))}function Fm(n){var r=n.alternate;if(!r){if(r=Mn(n),r===null)throw Error(t(188));return r!==n?null:n}for(var a=n,c=r;;){var h=a.return;if(h===null)break;var p=h.alternate;if(p===null){if(c=h.return,c!==null){a=c;continue}break}if(h.child===p.child){for(p=h.child;p;){if(p===a)return Fu(h),n;if(p===c)return Fu(h),r;p=p.sibling}throw Error(t(188))}if(a.return!==c.return)a=h,c=p;else{for(var x=!1,E=h.child;E;){if(E===a){x=!0,a=h,c=p;break}if(E===c){x=!0,c=h,a=p;break}E=E.sibling}if(!x){for(E=p.child;E;){if(E===a){x=!0,a=p,c=h;break}if(E===c){x=!0,c=p,a=h;break}E=E.sibling}if(!x)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:r}function Bu(n){return n=Fm(n),n!==null?Vu(n):null}function Vu(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var r=Vu(n);if(r!==null)return r;n=n.sibling}return null}var zu=e.unstable_scheduleCallback,qu=e.unstable_cancelCallback,Bm=e.unstable_shouldYield,Vm=e.unstable_requestPaint,Be=e.unstable_now,zm=e.unstable_getCurrentPriorityLevel,Vo=e.unstable_ImmediatePriority,Hu=e.unstable_UserBlockingPriority,Ws=e.unstable_NormalPriority,qm=e.unstable_LowPriority,Wu=e.unstable_IdlePriority,Gs=null,Ht=null;function Hm(n){if(Ht&&typeof Ht.onCommitFiberRoot=="function")try{Ht.onCommitFiberRoot(Gs,n,void 0,(n.current.flags&128)===128)}catch{}}var Mt=Math.clz32?Math.clz32:Km,Wm=Math.log,Gm=Math.LN2;function Km(n){return n>>>=0,n===0?32:31-(Wm(n)/Gm|0)|0}var Ks=64,Js=4194304;function Jr(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Ys(n,r){var a=n.pendingLanes;if(a===0)return 0;var c=0,h=n.suspendedLanes,p=n.pingedLanes,x=a&268435455;if(x!==0){var E=x&~h;E!==0?c=Jr(E):(p&=x,p!==0&&(c=Jr(p)))}else x=a&~h,x!==0?c=Jr(x):p!==0&&(c=Jr(p));if(c===0)return 0;if(r!==0&&r!==c&&(r&h)===0&&(h=c&-c,p=r&-r,h>=p||h===16&&(p&4194240)!==0))return r;if((c&4)!==0&&(c|=a&16),r=n.entangledLanes,r!==0)for(n=n.entanglements,r&=c;0<r;)a=31-Mt(r),h=1<<a,c|=n[a],r&=~h;return c}function Jm(n,r){switch(n){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ym(n,r){for(var a=n.suspendedLanes,c=n.pingedLanes,h=n.expirationTimes,p=n.pendingLanes;0<p;){var x=31-Mt(p),E=1<<x,R=h[x];R===-1?((E&a)===0||(E&c)!==0)&&(h[x]=Jm(E,r)):R<=r&&(n.expiredLanes|=E),p&=~E}}function zo(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Gu(){var n=Ks;return Ks<<=1,(Ks&4194240)===0&&(Ks=64),n}function qo(n){for(var r=[],a=0;31>a;a++)r.push(n);return r}function Yr(n,r,a){n.pendingLanes|=r,r!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,r=31-Mt(r),n[r]=a}function Qm(n,r){var a=n.pendingLanes&~r;n.pendingLanes=r,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=r,n.mutableReadLanes&=r,n.entangledLanes&=r,r=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var h=31-Mt(a),p=1<<h;r[h]=0,c[h]=-1,n[h]=-1,a&=~p}}function Ho(n,r){var a=n.entangledLanes|=r;for(n=n.entanglements;a;){var c=31-Mt(a),h=1<<c;h&r|n[c]&r&&(n[c]|=r),a&=~h}}var Te=0;function Ku(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var Ju,Wo,Yu,Qu,Xu,Go=!1,Qs=[],on=null,an=null,ln=null,Qr=new Map,Xr=new Map,un=[],Xm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Zu(n,r){switch(n){case"focusin":case"focusout":on=null;break;case"dragenter":case"dragleave":an=null;break;case"mouseover":case"mouseout":ln=null;break;case"pointerover":case"pointerout":Qr.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xr.delete(r.pointerId)}}function Zr(n,r,a,c,h,p){return n===null||n.nativeEvent!==p?(n={blockedOn:r,domEventName:a,eventSystemFlags:c,nativeEvent:p,targetContainers:[h]},r!==null&&(r=fs(r),r!==null&&Wo(r)),n):(n.eventSystemFlags|=c,r=n.targetContainers,h!==null&&r.indexOf(h)===-1&&r.push(h),n)}function Zm(n,r,a,c,h){switch(r){case"focusin":return on=Zr(on,n,r,a,c,h),!0;case"dragenter":return an=Zr(an,n,r,a,c,h),!0;case"mouseover":return ln=Zr(ln,n,r,a,c,h),!0;case"pointerover":var p=h.pointerId;return Qr.set(p,Zr(Qr.get(p)||null,n,r,a,c,h)),!0;case"gotpointercapture":return p=h.pointerId,Xr.set(p,Zr(Xr.get(p)||null,n,r,a,c,h)),!0}return!1}function ec(n){var r=Ln(n.target);if(r!==null){var a=Mn(r);if(a!==null){if(r=a.tag,r===13){if(r=$u(a),r!==null){n.blockedOn=r,Xu(n.priority,function(){Yu(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Xs(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var a=Jo(n.domEventName,n.eventSystemFlags,r[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);Lo=c,a.target.dispatchEvent(c),Lo=null}else return r=fs(a),r!==null&&Wo(r),n.blockedOn=a,!1;r.shift()}return!0}function tc(n,r,a){Xs(n)&&a.delete(r)}function eg(){Go=!1,on!==null&&Xs(on)&&(on=null),an!==null&&Xs(an)&&(an=null),ln!==null&&Xs(ln)&&(ln=null),Qr.forEach(tc),Xr.forEach(tc)}function es(n,r){n.blockedOn===r&&(n.blockedOn=null,Go||(Go=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,eg)))}function ts(n){function r(h){return es(h,n)}if(0<Qs.length){es(Qs[0],n);for(var a=1;a<Qs.length;a++){var c=Qs[a];c.blockedOn===n&&(c.blockedOn=null)}}for(on!==null&&es(on,n),an!==null&&es(an,n),ln!==null&&es(ln,n),Qr.forEach(r),Xr.forEach(r),a=0;a<un.length;a++)c=un[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<un.length&&(a=un[0],a.blockedOn===null);)ec(a),a.blockedOn===null&&un.shift()}var ar=L.ReactCurrentBatchConfig,Zs=!0;function tg(n,r,a,c){var h=Te,p=ar.transition;ar.transition=null;try{Te=1,Ko(n,r,a,c)}finally{Te=h,ar.transition=p}}function ng(n,r,a,c){var h=Te,p=ar.transition;ar.transition=null;try{Te=4,Ko(n,r,a,c)}finally{Te=h,ar.transition=p}}function Ko(n,r,a,c){if(Zs){var h=Jo(n,r,a,c);if(h===null)ha(n,r,c,ei,a),Zu(n,c);else if(Zm(h,n,r,a,c))c.stopPropagation();else if(Zu(n,c),r&4&&-1<Xm.indexOf(n)){for(;h!==null;){var p=fs(h);if(p!==null&&Ju(p),p=Jo(n,r,a,c),p===null&&ha(n,r,c,ei,a),p===h)break;h=p}h!==null&&c.stopPropagation()}else ha(n,r,c,null,a)}}var ei=null;function Jo(n,r,a,c){if(ei=null,n=Do(c),n=Ln(n),n!==null)if(r=Mn(n),r===null)n=null;else if(a=r.tag,a===13){if(n=$u(r),n!==null)return n;n=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null);return ei=n,null}function nc(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(zm()){case Vo:return 1;case Hu:return 4;case Ws:case qm:return 16;case Wu:return 536870912;default:return 16}default:return 16}}var cn=null,Yo=null,ti=null;function rc(){if(ti)return ti;var n,r=Yo,a=r.length,c,h="value"in cn?cn.value:cn.textContent,p=h.length;for(n=0;n<a&&r[n]===h[n];n++);var x=a-n;for(c=1;c<=x&&r[a-c]===h[p-c];c++);return ti=h.slice(n,1<c?1-c:void 0)}function ni(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function ri(){return!0}function sc(){return!1}function wt(n){function r(a,c,h,p,x){this._reactName=a,this._targetInst=h,this.type=c,this.nativeEvent=p,this.target=x,this.currentTarget=null;for(var E in n)n.hasOwnProperty(E)&&(a=n[E],this[E]=a?a(p):p[E]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?ri:sc,this.isPropagationStopped=sc,this}return X(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ri)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ri)},persist:function(){},isPersistent:ri}),r}var lr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qo=wt(lr),ns=X({},lr,{view:0,detail:0}),rg=wt(ns),Xo,Zo,rs,si=X({},ns,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ta,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==rs&&(rs&&n.type==="mousemove"?(Xo=n.screenX-rs.screenX,Zo=n.screenY-rs.screenY):Zo=Xo=0,rs=n),Xo)},movementY:function(n){return"movementY"in n?n.movementY:Zo}}),ic=wt(si),sg=X({},si,{dataTransfer:0}),ig=wt(sg),og=X({},ns,{relatedTarget:0}),ea=wt(og),ag=X({},lr,{animationName:0,elapsedTime:0,pseudoElement:0}),lg=wt(ag),ug=X({},lr,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),cg=wt(ug),dg=X({},lr,{data:0}),oc=wt(dg),hg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mg(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=pg[n])?!!r[n]:!1}function ta(){return mg}var gg=X({},ns,{key:function(n){if(n.key){var r=hg[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=ni(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?fg[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ta,charCode:function(n){return n.type==="keypress"?ni(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ni(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),vg=wt(gg),yg=X({},si,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ac=wt(yg),wg=X({},ns,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ta}),xg=wt(wg),_g=X({},lr,{propertyName:0,elapsedTime:0,pseudoElement:0}),bg=wt(_g),kg=X({},si,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Eg=wt(kg),Sg=[9,13,27,32],na=d&&"CompositionEvent"in window,ss=null;d&&"documentMode"in document&&(ss=document.documentMode);var Cg=d&&"TextEvent"in window&&!ss,lc=d&&(!na||ss&&8<ss&&11>=ss),uc=" ",cc=!1;function dc(n,r){switch(n){case"keyup":return Sg.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hc(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ur=!1;function Tg(n,r){switch(n){case"compositionend":return hc(r);case"keypress":return r.which!==32?null:(cc=!0,uc);case"textInput":return n=r.data,n===uc&&cc?null:n;default:return null}}function Ng(n,r){if(ur)return n==="compositionend"||!na&&dc(n,r)?(n=rc(),ti=Yo=cn=null,ur=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return lc&&r.locale!=="ko"?null:r.data;default:return null}}var Rg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fc(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!Rg[n.type]:r==="textarea"}function pc(n,r,a,c){Ou(c),r=ui(r,"onChange"),0<r.length&&(a=new Qo("onChange","change",null,a,c),n.push({event:a,listeners:r}))}var is=null,os=null;function Pg(n){Ic(n,0)}function ii(n){var r=pr(n);if(be(r))return n}function Ag(n,r){if(n==="change")return r}var mc=!1;if(d){var ra;if(d){var sa="oninput"in document;if(!sa){var gc=document.createElement("div");gc.setAttribute("oninput","return;"),sa=typeof gc.oninput=="function"}ra=sa}else ra=!1;mc=ra&&(!document.documentMode||9<document.documentMode)}function vc(){is&&(is.detachEvent("onpropertychange",yc),os=is=null)}function yc(n){if(n.propertyName==="value"&&ii(os)){var r=[];pc(r,os,n,Do(n)),Uu(Pg,r)}}function Ig(n,r,a){n==="focusin"?(vc(),is=r,os=a,is.attachEvent("onpropertychange",yc)):n==="focusout"&&vc()}function jg(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return ii(os)}function Og(n,r){if(n==="click")return ii(r)}function Mg(n,r){if(n==="input"||n==="change")return ii(r)}function Lg(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var Lt=typeof Object.is=="function"?Object.is:Lg;function as(n,r){if(Lt(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var a=Object.keys(n),c=Object.keys(r);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var h=a[c];if(!f.call(r,h)||!Lt(n[h],r[h]))return!1}return!0}function wc(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function xc(n,r){var a=wc(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=r&&c>=r)return{node:a,offset:r-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=wc(a)}}function _c(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?_c(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function bc(){for(var n=window,r=dt();r instanceof n.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)n=r.contentWindow;else break;r=dt(n.document)}return r}function ia(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}function Dg(n){var r=bc(),a=n.focusedElem,c=n.selectionRange;if(r!==a&&a&&a.ownerDocument&&_c(a.ownerDocument.documentElement,a)){if(c!==null&&ia(a)){if(r=c.start,n=c.end,n===void 0&&(n=r),"selectionStart"in a)a.selectionStart=r,a.selectionEnd=Math.min(n,a.value.length);else if(n=(r=a.ownerDocument||document)&&r.defaultView||window,n.getSelection){n=n.getSelection();var h=a.textContent.length,p=Math.min(c.start,h);c=c.end===void 0?p:Math.min(c.end,h),!n.extend&&p>c&&(h=c,c=p,p=h),h=xc(a,p);var x=xc(a,c);h&&x&&(n.rangeCount!==1||n.anchorNode!==h.node||n.anchorOffset!==h.offset||n.focusNode!==x.node||n.focusOffset!==x.offset)&&(r=r.createRange(),r.setStart(h.node,h.offset),n.removeAllRanges(),p>c?(n.addRange(r),n.extend(x.node,x.offset)):(r.setEnd(x.node,x.offset),n.addRange(r)))}}for(r=[],n=a;n=n.parentNode;)n.nodeType===1&&r.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<r.length;a++)n=r[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Ug=d&&"documentMode"in document&&11>=document.documentMode,cr=null,oa=null,ls=null,aa=!1;function kc(n,r,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;aa||cr==null||cr!==dt(c)||(c=cr,"selectionStart"in c&&ia(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),ls&&as(ls,c)||(ls=c,c=ui(oa,"onSelect"),0<c.length&&(r=new Qo("onSelect","select",null,r,a),n.push({event:r,listeners:c}),r.target=cr)))}function oi(n,r){var a={};return a[n.toLowerCase()]=r.toLowerCase(),a["Webkit"+n]="webkit"+r,a["Moz"+n]="moz"+r,a}var dr={animationend:oi("Animation","AnimationEnd"),animationiteration:oi("Animation","AnimationIteration"),animationstart:oi("Animation","AnimationStart"),transitionend:oi("Transition","TransitionEnd")},la={},Ec={};d&&(Ec=document.createElement("div").style,"AnimationEvent"in window||(delete dr.animationend.animation,delete dr.animationiteration.animation,delete dr.animationstart.animation),"TransitionEvent"in window||delete dr.transitionend.transition);function ai(n){if(la[n])return la[n];if(!dr[n])return n;var r=dr[n],a;for(a in r)if(r.hasOwnProperty(a)&&a in Ec)return la[n]=r[a];return n}var Sc=ai("animationend"),Cc=ai("animationiteration"),Tc=ai("animationstart"),Nc=ai("transitionend"),Rc=new Map,Pc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function dn(n,r){Rc.set(n,r),l(r,[n])}for(var ua=0;ua<Pc.length;ua++){var ca=Pc[ua],$g=ca.toLowerCase(),Fg=ca[0].toUpperCase()+ca.slice(1);dn($g,"on"+Fg)}dn(Sc,"onAnimationEnd"),dn(Cc,"onAnimationIteration"),dn(Tc,"onAnimationStart"),dn("dblclick","onDoubleClick"),dn("focusin","onFocus"),dn("focusout","onBlur"),dn(Nc,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var us="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Bg=new Set("cancel close invalid load scroll toggle".split(" ").concat(us));function Ac(n,r,a){var c=n.type||"unknown-event";n.currentTarget=a,$m(c,r,void 0,n),n.currentTarget=null}function Ic(n,r){r=(r&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],h=c.event;c=c.listeners;e:{var p=void 0;if(r)for(var x=c.length-1;0<=x;x--){var E=c[x],R=E.instance,D=E.currentTarget;if(E=E.listener,R!==p&&h.isPropagationStopped())break e;Ac(h,E,D),p=R}else for(x=0;x<c.length;x++){if(E=c[x],R=E.instance,D=E.currentTarget,E=E.listener,R!==p&&h.isPropagationStopped())break e;Ac(h,E,D),p=R}}}if(Hs)throw n=Bo,Hs=!1,Bo=null,n}function je(n,r){var a=r[ya];a===void 0&&(a=r[ya]=new Set);var c=n+"__bubble";a.has(c)||(jc(r,n,2,!1),a.add(c))}function da(n,r,a){var c=0;r&&(c|=4),jc(a,n,c,r)}var li="_reactListening"+Math.random().toString(36).slice(2);function cs(n){if(!n[li]){n[li]=!0,s.forEach(function(a){a!=="selectionchange"&&(Bg.has(a)||da(a,!1,n),da(a,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[li]||(r[li]=!0,da("selectionchange",!1,r))}}function jc(n,r,a,c){switch(nc(r)){case 1:var h=tg;break;case 4:h=ng;break;default:h=Ko}a=h.bind(null,r,a,n),h=void 0,!Fo||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(h=!0),c?h!==void 0?n.addEventListener(r,a,{capture:!0,passive:h}):n.addEventListener(r,a,!0):h!==void 0?n.addEventListener(r,a,{passive:h}):n.addEventListener(r,a,!1)}function ha(n,r,a,c,h){var p=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var x=c.tag;if(x===3||x===4){var E=c.stateNode.containerInfo;if(E===h||E.nodeType===8&&E.parentNode===h)break;if(x===4)for(x=c.return;x!==null;){var R=x.tag;if((R===3||R===4)&&(R=x.stateNode.containerInfo,R===h||R.nodeType===8&&R.parentNode===h))return;x=x.return}for(;E!==null;){if(x=Ln(E),x===null)return;if(R=x.tag,R===5||R===6){c=p=x;continue e}E=E.parentNode}}c=c.return}Uu(function(){var D=p,V=Do(a),z=[];e:{var B=Rc.get(n);if(B!==void 0){var Y=Qo,ee=n;switch(n){case"keypress":if(ni(a)===0)break e;case"keydown":case"keyup":Y=vg;break;case"focusin":ee="focus",Y=ea;break;case"focusout":ee="blur",Y=ea;break;case"beforeblur":case"afterblur":Y=ea;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=ic;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=ig;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=xg;break;case Sc:case Cc:case Tc:Y=lg;break;case Nc:Y=bg;break;case"scroll":Y=rg;break;case"wheel":Y=Eg;break;case"copy":case"cut":case"paste":Y=cg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=ac}var re=(r&4)!==0,Ve=!re&&n==="scroll",O=re?B!==null?B+"Capture":null:B;re=[];for(var A=D,M;A!==null;){M=A;var q=M.stateNode;if(M.tag===5&&q!==null&&(M=q,O!==null&&(q=Wr(A,O),q!=null&&re.push(ds(A,q,M)))),Ve)break;A=A.return}0<re.length&&(B=new Y(B,ee,null,a,V),z.push({event:B,listeners:re}))}}if((r&7)===0){e:{if(B=n==="mouseover"||n==="pointerover",Y=n==="mouseout"||n==="pointerout",B&&a!==Lo&&(ee=a.relatedTarget||a.fromElement)&&(Ln(ee)||ee[Yt]))break e;if((Y||B)&&(B=V.window===V?V:(B=V.ownerDocument)?B.defaultView||B.parentWindow:window,Y?(ee=a.relatedTarget||a.toElement,Y=D,ee=ee?Ln(ee):null,ee!==null&&(Ve=Mn(ee),ee!==Ve||ee.tag!==5&&ee.tag!==6)&&(ee=null)):(Y=null,ee=D),Y!==ee)){if(re=ic,q="onMouseLeave",O="onMouseEnter",A="mouse",(n==="pointerout"||n==="pointerover")&&(re=ac,q="onPointerLeave",O="onPointerEnter",A="pointer"),Ve=Y==null?B:pr(Y),M=ee==null?B:pr(ee),B=new re(q,A+"leave",Y,a,V),B.target=Ve,B.relatedTarget=M,q=null,Ln(V)===D&&(re=new re(O,A+"enter",ee,a,V),re.target=M,re.relatedTarget=Ve,q=re),Ve=q,Y&&ee)t:{for(re=Y,O=ee,A=0,M=re;M;M=hr(M))A++;for(M=0,q=O;q;q=hr(q))M++;for(;0<A-M;)re=hr(re),A--;for(;0<M-A;)O=hr(O),M--;for(;A--;){if(re===O||O!==null&&re===O.alternate)break t;re=hr(re),O=hr(O)}re=null}else re=null;Y!==null&&Oc(z,B,Y,re,!1),ee!==null&&Ve!==null&&Oc(z,Ve,ee,re,!0)}}e:{if(B=D?pr(D):window,Y=B.nodeName&&B.nodeName.toLowerCase(),Y==="select"||Y==="input"&&B.type==="file")var ie=Ag;else if(fc(B))if(mc)ie=Mg;else{ie=jg;var le=Ig}else(Y=B.nodeName)&&Y.toLowerCase()==="input"&&(B.type==="checkbox"||B.type==="radio")&&(ie=Og);if(ie&&(ie=ie(n,D))){pc(z,ie,a,V);break e}le&&le(n,B,D),n==="focusout"&&(le=B._wrapperState)&&le.controlled&&B.type==="number"&&Ao(B,"number",B.value)}switch(le=D?pr(D):window,n){case"focusin":(fc(le)||le.contentEditable==="true")&&(cr=le,oa=D,ls=null);break;case"focusout":ls=oa=cr=null;break;case"mousedown":aa=!0;break;case"contextmenu":case"mouseup":case"dragend":aa=!1,kc(z,a,V);break;case"selectionchange":if(Ug)break;case"keydown":case"keyup":kc(z,a,V)}var ue;if(na)e:{switch(n){case"compositionstart":var pe="onCompositionStart";break e;case"compositionend":pe="onCompositionEnd";break e;case"compositionupdate":pe="onCompositionUpdate";break e}pe=void 0}else ur?dc(n,a)&&(pe="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(pe="onCompositionStart");pe&&(lc&&a.locale!=="ko"&&(ur||pe!=="onCompositionStart"?pe==="onCompositionEnd"&&ur&&(ue=rc()):(cn=V,Yo="value"in cn?cn.value:cn.textContent,ur=!0)),le=ui(D,pe),0<le.length&&(pe=new oc(pe,n,null,a,V),z.push({event:pe,listeners:le}),ue?pe.data=ue:(ue=hc(a),ue!==null&&(pe.data=ue)))),(ue=Cg?Tg(n,a):Ng(n,a))&&(D=ui(D,"onBeforeInput"),0<D.length&&(V=new oc("onBeforeInput","beforeinput",null,a,V),z.push({event:V,listeners:D}),V.data=ue))}Ic(z,r)})}function ds(n,r,a){return{instance:n,listener:r,currentTarget:a}}function ui(n,r){for(var a=r+"Capture",c=[];n!==null;){var h=n,p=h.stateNode;h.tag===5&&p!==null&&(h=p,p=Wr(n,a),p!=null&&c.unshift(ds(n,p,h)),p=Wr(n,r),p!=null&&c.push(ds(n,p,h))),n=n.return}return c}function hr(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Oc(n,r,a,c,h){for(var p=r._reactName,x=[];a!==null&&a!==c;){var E=a,R=E.alternate,D=E.stateNode;if(R!==null&&R===c)break;E.tag===5&&D!==null&&(E=D,h?(R=Wr(a,p),R!=null&&x.unshift(ds(a,R,E))):h||(R=Wr(a,p),R!=null&&x.push(ds(a,R,E)))),a=a.return}x.length!==0&&n.push({event:r,listeners:x})}var Vg=/\r\n?/g,zg=/\u0000|\uFFFD/g;function Mc(n){return(typeof n=="string"?n:""+n).replace(Vg,`
`).replace(zg,"")}function ci(n,r,a){if(r=Mc(r),Mc(n)!==r&&a)throw Error(t(425))}function di(){}var fa=null,pa=null;function ma(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var ga=typeof setTimeout=="function"?setTimeout:void 0,qg=typeof clearTimeout=="function"?clearTimeout:void 0,Lc=typeof Promise=="function"?Promise:void 0,Hg=typeof queueMicrotask=="function"?queueMicrotask:typeof Lc<"u"?function(n){return Lc.resolve(null).then(n).catch(Wg)}:ga;function Wg(n){setTimeout(function(){throw n})}function va(n,r){var a=r,c=0;do{var h=a.nextSibling;if(n.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"){if(c===0){n.removeChild(h),ts(r);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=h}while(a);ts(r)}function hn(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return n}function Dc(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return n;r--}else a==="/$"&&r++}n=n.previousSibling}return null}var fr=Math.random().toString(36).slice(2),Wt="__reactFiber$"+fr,hs="__reactProps$"+fr,Yt="__reactContainer$"+fr,ya="__reactEvents$"+fr,Gg="__reactListeners$"+fr,Kg="__reactHandles$"+fr;function Ln(n){var r=n[Wt];if(r)return r;for(var a=n.parentNode;a;){if(r=a[Yt]||a[Wt]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(n=Dc(n);n!==null;){if(a=n[Wt])return a;n=Dc(n)}return r}n=a,a=n.parentNode}return null}function fs(n){return n=n[Wt]||n[Yt],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function pr(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function hi(n){return n[hs]||null}var wa=[],mr=-1;function fn(n){return{current:n}}function Oe(n){0>mr||(n.current=wa[mr],wa[mr]=null,mr--)}function Pe(n,r){mr++,wa[mr]=n.current,n.current=r}var pn={},st=fn(pn),ht=fn(!1),Dn=pn;function gr(n,r){var a=n.type.contextTypes;if(!a)return pn;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===r)return c.__reactInternalMemoizedMaskedChildContext;var h={},p;for(p in a)h[p]=r[p];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=h),h}function ft(n){return n=n.childContextTypes,n!=null}function fi(){Oe(ht),Oe(st)}function Uc(n,r,a){if(st.current!==pn)throw Error(t(168));Pe(st,r),Pe(ht,a)}function $c(n,r,a){var c=n.stateNode;if(r=r.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var h in c)if(!(h in r))throw Error(t(108,fe(n)||"Unknown",h));return X({},a,c)}function pi(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||pn,Dn=st.current,Pe(st,n),Pe(ht,ht.current),!0}function Fc(n,r,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=$c(n,r,Dn),c.__reactInternalMemoizedMergedChildContext=n,Oe(ht),Oe(st),Pe(st,n)):Oe(ht),Pe(ht,a)}var Qt=null,mi=!1,xa=!1;function Bc(n){Qt===null?Qt=[n]:Qt.push(n)}function Jg(n){mi=!0,Bc(n)}function mn(){if(!xa&&Qt!==null){xa=!0;var n=0,r=Te;try{var a=Qt;for(Te=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}Qt=null,mi=!1}catch(h){throw Qt!==null&&(Qt=Qt.slice(n+1)),zu(Vo,mn),h}finally{Te=r,xa=!1}}return null}var vr=[],yr=0,gi=null,vi=0,Nt=[],Rt=0,Un=null,Xt=1,Zt="";function $n(n,r){vr[yr++]=vi,vr[yr++]=gi,gi=n,vi=r}function Vc(n,r,a){Nt[Rt++]=Xt,Nt[Rt++]=Zt,Nt[Rt++]=Un,Un=n;var c=Xt;n=Zt;var h=32-Mt(c)-1;c&=~(1<<h),a+=1;var p=32-Mt(r)+h;if(30<p){var x=h-h%5;p=(c&(1<<x)-1).toString(32),c>>=x,h-=x,Xt=1<<32-Mt(r)+h|a<<h|c,Zt=p+n}else Xt=1<<p|a<<h|c,Zt=n}function _a(n){n.return!==null&&($n(n,1),Vc(n,1,0))}function ba(n){for(;n===gi;)gi=vr[--yr],vr[yr]=null,vi=vr[--yr],vr[yr]=null;for(;n===Un;)Un=Nt[--Rt],Nt[Rt]=null,Zt=Nt[--Rt],Nt[Rt]=null,Xt=Nt[--Rt],Nt[Rt]=null}var xt=null,_t=null,Me=!1,Dt=null;function zc(n,r){var a=jt(5,null,null,0);a.elementType="DELETED",a.stateNode=r,a.return=n,r=n.deletions,r===null?(n.deletions=[a],n.flags|=16):r.push(a)}function qc(n,r){switch(n.tag){case 5:var a=n.type;return r=r.nodeType!==1||a.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(n.stateNode=r,xt=n,_t=hn(r.firstChild),!0):!1;case 6:return r=n.pendingProps===""||r.nodeType!==3?null:r,r!==null?(n.stateNode=r,xt=n,_t=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(a=Un!==null?{id:Xt,overflow:Zt}:null,n.memoizedState={dehydrated:r,treeContext:a,retryLane:1073741824},a=jt(18,null,null,0),a.stateNode=r,a.return=n,n.child=a,xt=n,_t=null,!0):!1;default:return!1}}function ka(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Ea(n){if(Me){var r=_t;if(r){var a=r;if(!qc(n,r)){if(ka(n))throw Error(t(418));r=hn(a.nextSibling);var c=xt;r&&qc(n,r)?zc(c,a):(n.flags=n.flags&-4097|2,Me=!1,xt=n)}}else{if(ka(n))throw Error(t(418));n.flags=n.flags&-4097|2,Me=!1,xt=n}}}function Hc(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;xt=n}function yi(n){if(n!==xt)return!1;if(!Me)return Hc(n),Me=!0,!1;var r;if((r=n.tag!==3)&&!(r=n.tag!==5)&&(r=n.type,r=r!=="head"&&r!=="body"&&!ma(n.type,n.memoizedProps)),r&&(r=_t)){if(ka(n))throw Wc(),Error(t(418));for(;r;)zc(n,r),r=hn(r.nextSibling)}if(Hc(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,r=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(r===0){_t=hn(n.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++}n=n.nextSibling}_t=null}}else _t=xt?hn(n.stateNode.nextSibling):null;return!0}function Wc(){for(var n=_t;n;)n=hn(n.nextSibling)}function wr(){_t=xt=null,Me=!1}function Sa(n){Dt===null?Dt=[n]:Dt.push(n)}var Yg=L.ReactCurrentBatchConfig;function ps(n,r,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var h=c,p=""+n;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===p?r.ref:(r=function(x){var E=h.refs;x===null?delete E[p]:E[p]=x},r._stringRef=p,r)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function wi(n,r){throw n=Object.prototype.toString.call(r),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n))}function Gc(n){var r=n._init;return r(n._payload)}function Kc(n){function r(O,A){if(n){var M=O.deletions;M===null?(O.deletions=[A],O.flags|=16):M.push(A)}}function a(O,A){if(!n)return null;for(;A!==null;)r(O,A),A=A.sibling;return null}function c(O,A){for(O=new Map;A!==null;)A.key!==null?O.set(A.key,A):O.set(A.index,A),A=A.sibling;return O}function h(O,A){return O=kn(O,A),O.index=0,O.sibling=null,O}function p(O,A,M){return O.index=M,n?(M=O.alternate,M!==null?(M=M.index,M<A?(O.flags|=2,A):M):(O.flags|=2,A)):(O.flags|=1048576,A)}function x(O){return n&&O.alternate===null&&(O.flags|=2),O}function E(O,A,M,q){return A===null||A.tag!==6?(A=gl(M,O.mode,q),A.return=O,A):(A=h(A,M),A.return=O,A)}function R(O,A,M,q){var ie=M.type;return ie===Q?V(O,A,M.props.children,q,M.key):A!==null&&(A.elementType===ie||typeof ie=="object"&&ie!==null&&ie.$$typeof===Ge&&Gc(ie)===A.type)?(q=h(A,M.props),q.ref=ps(O,A,M),q.return=O,q):(q=zi(M.type,M.key,M.props,null,O.mode,q),q.ref=ps(O,A,M),q.return=O,q)}function D(O,A,M,q){return A===null||A.tag!==4||A.stateNode.containerInfo!==M.containerInfo||A.stateNode.implementation!==M.implementation?(A=vl(M,O.mode,q),A.return=O,A):(A=h(A,M.children||[]),A.return=O,A)}function V(O,A,M,q,ie){return A===null||A.tag!==7?(A=Gn(M,O.mode,q,ie),A.return=O,A):(A=h(A,M),A.return=O,A)}function z(O,A,M){if(typeof A=="string"&&A!==""||typeof A=="number")return A=gl(""+A,O.mode,M),A.return=O,A;if(typeof A=="object"&&A!==null){switch(A.$$typeof){case W:return M=zi(A.type,A.key,A.props,null,O.mode,M),M.ref=ps(O,null,A),M.return=O,M;case H:return A=vl(A,O.mode,M),A.return=O,A;case Ge:var q=A._init;return z(O,q(A._payload),M)}if(zr(A)||ce(A))return A=Gn(A,O.mode,M,null),A.return=O,A;wi(O,A)}return null}function B(O,A,M,q){var ie=A!==null?A.key:null;if(typeof M=="string"&&M!==""||typeof M=="number")return ie!==null?null:E(O,A,""+M,q);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case W:return M.key===ie?R(O,A,M,q):null;case H:return M.key===ie?D(O,A,M,q):null;case Ge:return ie=M._init,B(O,A,ie(M._payload),q)}if(zr(M)||ce(M))return ie!==null?null:V(O,A,M,q,null);wi(O,M)}return null}function Y(O,A,M,q,ie){if(typeof q=="string"&&q!==""||typeof q=="number")return O=O.get(M)||null,E(A,O,""+q,ie);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case W:return O=O.get(q.key===null?M:q.key)||null,R(A,O,q,ie);case H:return O=O.get(q.key===null?M:q.key)||null,D(A,O,q,ie);case Ge:var le=q._init;return Y(O,A,M,le(q._payload),ie)}if(zr(q)||ce(q))return O=O.get(M)||null,V(A,O,q,ie,null);wi(A,q)}return null}function ee(O,A,M,q){for(var ie=null,le=null,ue=A,pe=A=0,Ze=null;ue!==null&&pe<M.length;pe++){ue.index>pe?(Ze=ue,ue=null):Ze=ue.sibling;var Se=B(O,ue,M[pe],q);if(Se===null){ue===null&&(ue=Ze);break}n&&ue&&Se.alternate===null&&r(O,ue),A=p(Se,A,pe),le===null?ie=Se:le.sibling=Se,le=Se,ue=Ze}if(pe===M.length)return a(O,ue),Me&&$n(O,pe),ie;if(ue===null){for(;pe<M.length;pe++)ue=z(O,M[pe],q),ue!==null&&(A=p(ue,A,pe),le===null?ie=ue:le.sibling=ue,le=ue);return Me&&$n(O,pe),ie}for(ue=c(O,ue);pe<M.length;pe++)Ze=Y(ue,O,pe,M[pe],q),Ze!==null&&(n&&Ze.alternate!==null&&ue.delete(Ze.key===null?pe:Ze.key),A=p(Ze,A,pe),le===null?ie=Ze:le.sibling=Ze,le=Ze);return n&&ue.forEach(function(En){return r(O,En)}),Me&&$n(O,pe),ie}function re(O,A,M,q){var ie=ce(M);if(typeof ie!="function")throw Error(t(150));if(M=ie.call(M),M==null)throw Error(t(151));for(var le=ie=null,ue=A,pe=A=0,Ze=null,Se=M.next();ue!==null&&!Se.done;pe++,Se=M.next()){ue.index>pe?(Ze=ue,ue=null):Ze=ue.sibling;var En=B(O,ue,Se.value,q);if(En===null){ue===null&&(ue=Ze);break}n&&ue&&En.alternate===null&&r(O,ue),A=p(En,A,pe),le===null?ie=En:le.sibling=En,le=En,ue=Ze}if(Se.done)return a(O,ue),Me&&$n(O,pe),ie;if(ue===null){for(;!Se.done;pe++,Se=M.next())Se=z(O,Se.value,q),Se!==null&&(A=p(Se,A,pe),le===null?ie=Se:le.sibling=Se,le=Se);return Me&&$n(O,pe),ie}for(ue=c(O,ue);!Se.done;pe++,Se=M.next())Se=Y(ue,O,pe,Se.value,q),Se!==null&&(n&&Se.alternate!==null&&ue.delete(Se.key===null?pe:Se.key),A=p(Se,A,pe),le===null?ie=Se:le.sibling=Se,le=Se);return n&&ue.forEach(function(R0){return r(O,R0)}),Me&&$n(O,pe),ie}function Ve(O,A,M,q){if(typeof M=="object"&&M!==null&&M.type===Q&&M.key===null&&(M=M.props.children),typeof M=="object"&&M!==null){switch(M.$$typeof){case W:e:{for(var ie=M.key,le=A;le!==null;){if(le.key===ie){if(ie=M.type,ie===Q){if(le.tag===7){a(O,le.sibling),A=h(le,M.props.children),A.return=O,O=A;break e}}else if(le.elementType===ie||typeof ie=="object"&&ie!==null&&ie.$$typeof===Ge&&Gc(ie)===le.type){a(O,le.sibling),A=h(le,M.props),A.ref=ps(O,le,M),A.return=O,O=A;break e}a(O,le);break}else r(O,le);le=le.sibling}M.type===Q?(A=Gn(M.props.children,O.mode,q,M.key),A.return=O,O=A):(q=zi(M.type,M.key,M.props,null,O.mode,q),q.ref=ps(O,A,M),q.return=O,O=q)}return x(O);case H:e:{for(le=M.key;A!==null;){if(A.key===le)if(A.tag===4&&A.stateNode.containerInfo===M.containerInfo&&A.stateNode.implementation===M.implementation){a(O,A.sibling),A=h(A,M.children||[]),A.return=O,O=A;break e}else{a(O,A);break}else r(O,A);A=A.sibling}A=vl(M,O.mode,q),A.return=O,O=A}return x(O);case Ge:return le=M._init,Ve(O,A,le(M._payload),q)}if(zr(M))return ee(O,A,M,q);if(ce(M))return re(O,A,M,q);wi(O,M)}return typeof M=="string"&&M!==""||typeof M=="number"?(M=""+M,A!==null&&A.tag===6?(a(O,A.sibling),A=h(A,M),A.return=O,O=A):(a(O,A),A=gl(M,O.mode,q),A.return=O,O=A),x(O)):a(O,A)}return Ve}var xr=Kc(!0),Jc=Kc(!1),xi=fn(null),_i=null,_r=null,Ca=null;function Ta(){Ca=_r=_i=null}function Na(n){var r=xi.current;Oe(xi),n._currentValue=r}function Ra(n,r,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),n===a)break;n=n.return}}function br(n,r){_i=n,Ca=_r=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&r)!==0&&(pt=!0),n.firstContext=null)}function Pt(n){var r=n._currentValue;if(Ca!==n)if(n={context:n,memoizedValue:r,next:null},_r===null){if(_i===null)throw Error(t(308));_r=n,_i.dependencies={lanes:0,firstContext:n}}else _r=_r.next=n;return r}var Fn=null;function Pa(n){Fn===null?Fn=[n]:Fn.push(n)}function Yc(n,r,a,c){var h=r.interleaved;return h===null?(a.next=a,Pa(r)):(a.next=h.next,h.next=a),r.interleaved=a,en(n,c)}function en(n,r){n.lanes|=r;var a=n.alternate;for(a!==null&&(a.lanes|=r),a=n,n=n.return;n!==null;)n.childLanes|=r,a=n.alternate,a!==null&&(a.childLanes|=r),a=n,n=n.return;return a.tag===3?a.stateNode:null}var gn=!1;function Aa(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Qc(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function tn(n,r){return{eventTime:n,lane:r,tag:0,payload:null,callback:null,next:null}}function vn(n,r,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(ke&2)!==0){var h=c.pending;return h===null?r.next=r:(r.next=h.next,h.next=r),c.pending=r,en(n,a)}return h=c.interleaved,h===null?(r.next=r,Pa(c)):(r.next=h.next,h.next=r),c.interleaved=r,en(n,a)}function bi(n,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194240)!==0)){var c=r.lanes;c&=n.pendingLanes,a|=c,r.lanes=a,Ho(n,a)}}function Xc(n,r){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var h=null,p=null;if(a=a.firstBaseUpdate,a!==null){do{var x={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};p===null?h=p=x:p=p.next=x,a=a.next}while(a!==null);p===null?h=p=r:p=p.next=r}else h=p=r;a={baseState:c.baseState,firstBaseUpdate:h,lastBaseUpdate:p,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=r:n.next=r,a.lastBaseUpdate=r}function ki(n,r,a,c){var h=n.updateQueue;gn=!1;var p=h.firstBaseUpdate,x=h.lastBaseUpdate,E=h.shared.pending;if(E!==null){h.shared.pending=null;var R=E,D=R.next;R.next=null,x===null?p=D:x.next=D,x=R;var V=n.alternate;V!==null&&(V=V.updateQueue,E=V.lastBaseUpdate,E!==x&&(E===null?V.firstBaseUpdate=D:E.next=D,V.lastBaseUpdate=R))}if(p!==null){var z=h.baseState;x=0,V=D=R=null,E=p;do{var B=E.lane,Y=E.eventTime;if((c&B)===B){V!==null&&(V=V.next={eventTime:Y,lane:0,tag:E.tag,payload:E.payload,callback:E.callback,next:null});e:{var ee=n,re=E;switch(B=r,Y=a,re.tag){case 1:if(ee=re.payload,typeof ee=="function"){z=ee.call(Y,z,B);break e}z=ee;break e;case 3:ee.flags=ee.flags&-65537|128;case 0:if(ee=re.payload,B=typeof ee=="function"?ee.call(Y,z,B):ee,B==null)break e;z=X({},z,B);break e;case 2:gn=!0}}E.callback!==null&&E.lane!==0&&(n.flags|=64,B=h.effects,B===null?h.effects=[E]:B.push(E))}else Y={eventTime:Y,lane:B,tag:E.tag,payload:E.payload,callback:E.callback,next:null},V===null?(D=V=Y,R=z):V=V.next=Y,x|=B;if(E=E.next,E===null){if(E=h.shared.pending,E===null)break;B=E,E=B.next,B.next=null,h.lastBaseUpdate=B,h.shared.pending=null}}while(!0);if(V===null&&(R=z),h.baseState=R,h.firstBaseUpdate=D,h.lastBaseUpdate=V,r=h.shared.interleaved,r!==null){h=r;do x|=h.lane,h=h.next;while(h!==r)}else p===null&&(h.shared.lanes=0);zn|=x,n.lanes=x,n.memoizedState=z}}function Zc(n,r,a){if(n=r.effects,r.effects=null,n!==null)for(r=0;r<n.length;r++){var c=n[r],h=c.callback;if(h!==null){if(c.callback=null,c=a,typeof h!="function")throw Error(t(191,h));h.call(c)}}}var ms={},Gt=fn(ms),gs=fn(ms),vs=fn(ms);function Bn(n){if(n===ms)throw Error(t(174));return n}function Ia(n,r){switch(Pe(vs,r),Pe(gs,n),Pe(Gt,ms),n=r.nodeType,n){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:jo(null,"");break;default:n=n===8?r.parentNode:r,r=n.namespaceURI||null,n=n.tagName,r=jo(r,n)}Oe(Gt),Pe(Gt,r)}function kr(){Oe(Gt),Oe(gs),Oe(vs)}function ed(n){Bn(vs.current);var r=Bn(Gt.current),a=jo(r,n.type);r!==a&&(Pe(gs,n),Pe(Gt,a))}function ja(n){gs.current===n&&(Oe(Gt),Oe(gs))}var Le=fn(0);function Ei(n){for(var r=n;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Oa=[];function Ma(){for(var n=0;n<Oa.length;n++)Oa[n]._workInProgressVersionPrimary=null;Oa.length=0}var Si=L.ReactCurrentDispatcher,La=L.ReactCurrentBatchConfig,Vn=0,De=null,Ke=null,Qe=null,Ci=!1,ys=!1,ws=0,Qg=0;function it(){throw Error(t(321))}function Da(n,r){if(r===null)return!1;for(var a=0;a<r.length&&a<n.length;a++)if(!Lt(n[a],r[a]))return!1;return!0}function Ua(n,r,a,c,h,p){if(Vn=p,De=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Si.current=n===null||n.memoizedState===null?t0:n0,n=a(c,h),ys){p=0;do{if(ys=!1,ws=0,25<=p)throw Error(t(301));p+=1,Qe=Ke=null,r.updateQueue=null,Si.current=r0,n=a(c,h)}while(ys)}if(Si.current=Ri,r=Ke!==null&&Ke.next!==null,Vn=0,Qe=Ke=De=null,Ci=!1,r)throw Error(t(300));return n}function $a(){var n=ws!==0;return ws=0,n}function Kt(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qe===null?De.memoizedState=Qe=n:Qe=Qe.next=n,Qe}function At(){if(Ke===null){var n=De.alternate;n=n!==null?n.memoizedState:null}else n=Ke.next;var r=Qe===null?De.memoizedState:Qe.next;if(r!==null)Qe=r,Ke=n;else{if(n===null)throw Error(t(310));Ke=n,n={memoizedState:Ke.memoizedState,baseState:Ke.baseState,baseQueue:Ke.baseQueue,queue:Ke.queue,next:null},Qe===null?De.memoizedState=Qe=n:Qe=Qe.next=n}return Qe}function xs(n,r){return typeof r=="function"?r(n):r}function Fa(n){var r=At(),a=r.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=Ke,h=c.baseQueue,p=a.pending;if(p!==null){if(h!==null){var x=h.next;h.next=p.next,p.next=x}c.baseQueue=h=p,a.pending=null}if(h!==null){p=h.next,c=c.baseState;var E=x=null,R=null,D=p;do{var V=D.lane;if((Vn&V)===V)R!==null&&(R=R.next={lane:0,action:D.action,hasEagerState:D.hasEagerState,eagerState:D.eagerState,next:null}),c=D.hasEagerState?D.eagerState:n(c,D.action);else{var z={lane:V,action:D.action,hasEagerState:D.hasEagerState,eagerState:D.eagerState,next:null};R===null?(E=R=z,x=c):R=R.next=z,De.lanes|=V,zn|=V}D=D.next}while(D!==null&&D!==p);R===null?x=c:R.next=E,Lt(c,r.memoizedState)||(pt=!0),r.memoizedState=c,r.baseState=x,r.baseQueue=R,a.lastRenderedState=c}if(n=a.interleaved,n!==null){h=n;do p=h.lane,De.lanes|=p,zn|=p,h=h.next;while(h!==n)}else h===null&&(a.lanes=0);return[r.memoizedState,a.dispatch]}function Ba(n){var r=At(),a=r.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,h=a.pending,p=r.memoizedState;if(h!==null){a.pending=null;var x=h=h.next;do p=n(p,x.action),x=x.next;while(x!==h);Lt(p,r.memoizedState)||(pt=!0),r.memoizedState=p,r.baseQueue===null&&(r.baseState=p),a.lastRenderedState=p}return[p,c]}function td(){}function nd(n,r){var a=De,c=At(),h=r(),p=!Lt(c.memoizedState,h);if(p&&(c.memoizedState=h,pt=!0),c=c.queue,Va(id.bind(null,a,c,n),[n]),c.getSnapshot!==r||p||Qe!==null&&Qe.memoizedState.tag&1){if(a.flags|=2048,_s(9,sd.bind(null,a,c,h,r),void 0,null),Xe===null)throw Error(t(349));(Vn&30)!==0||rd(a,r,h)}return h}function rd(n,r,a){n.flags|=16384,n={getSnapshot:r,value:a},r=De.updateQueue,r===null?(r={lastEffect:null,stores:null},De.updateQueue=r,r.stores=[n]):(a=r.stores,a===null?r.stores=[n]:a.push(n))}function sd(n,r,a,c){r.value=a,r.getSnapshot=c,od(r)&&ad(n)}function id(n,r,a){return a(function(){od(r)&&ad(n)})}function od(n){var r=n.getSnapshot;n=n.value;try{var a=r();return!Lt(n,a)}catch{return!0}}function ad(n){var r=en(n,1);r!==null&&Bt(r,n,1,-1)}function ld(n){var r=Kt();return typeof n=="function"&&(n=n()),r.memoizedState=r.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xs,lastRenderedState:n},r.queue=n,n=n.dispatch=e0.bind(null,De,n),[r.memoizedState,n]}function _s(n,r,a,c){return n={tag:n,create:r,destroy:a,deps:c,next:null},r=De.updateQueue,r===null?(r={lastEffect:null,stores:null},De.updateQueue=r,r.lastEffect=n.next=n):(a=r.lastEffect,a===null?r.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,r.lastEffect=n)),n}function ud(){return At().memoizedState}function Ti(n,r,a,c){var h=Kt();De.flags|=n,h.memoizedState=_s(1|r,a,void 0,c===void 0?null:c)}function Ni(n,r,a,c){var h=At();c=c===void 0?null:c;var p=void 0;if(Ke!==null){var x=Ke.memoizedState;if(p=x.destroy,c!==null&&Da(c,x.deps)){h.memoizedState=_s(r,a,p,c);return}}De.flags|=n,h.memoizedState=_s(1|r,a,p,c)}function cd(n,r){return Ti(8390656,8,n,r)}function Va(n,r){return Ni(2048,8,n,r)}function dd(n,r){return Ni(4,2,n,r)}function hd(n,r){return Ni(4,4,n,r)}function fd(n,r){if(typeof r=="function")return n=n(),r(n),function(){r(null)};if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function pd(n,r,a){return a=a!=null?a.concat([n]):null,Ni(4,4,fd.bind(null,r,n),a)}function za(){}function md(n,r){var a=At();r=r===void 0?null:r;var c=a.memoizedState;return c!==null&&r!==null&&Da(r,c[1])?c[0]:(a.memoizedState=[n,r],n)}function gd(n,r){var a=At();r=r===void 0?null:r;var c=a.memoizedState;return c!==null&&r!==null&&Da(r,c[1])?c[0]:(n=n(),a.memoizedState=[n,r],n)}function vd(n,r,a){return(Vn&21)===0?(n.baseState&&(n.baseState=!1,pt=!0),n.memoizedState=a):(Lt(a,r)||(a=Gu(),De.lanes|=a,zn|=a,n.baseState=!0),r)}function Xg(n,r){var a=Te;Te=a!==0&&4>a?a:4,n(!0);var c=La.transition;La.transition={};try{n(!1),r()}finally{Te=a,La.transition=c}}function yd(){return At().memoizedState}function Zg(n,r,a){var c=_n(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},wd(n))xd(r,a);else if(a=Yc(n,r,a,c),a!==null){var h=ct();Bt(a,n,c,h),_d(a,r,c)}}function e0(n,r,a){var c=_n(n),h={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(wd(n))xd(r,h);else{var p=n.alternate;if(n.lanes===0&&(p===null||p.lanes===0)&&(p=r.lastRenderedReducer,p!==null))try{var x=r.lastRenderedState,E=p(x,a);if(h.hasEagerState=!0,h.eagerState=E,Lt(E,x)){var R=r.interleaved;R===null?(h.next=h,Pa(r)):(h.next=R.next,R.next=h),r.interleaved=h;return}}catch{}finally{}a=Yc(n,r,h,c),a!==null&&(h=ct(),Bt(a,n,c,h),_d(a,r,c))}}function wd(n){var r=n.alternate;return n===De||r!==null&&r===De}function xd(n,r){ys=Ci=!0;var a=n.pending;a===null?r.next=r:(r.next=a.next,a.next=r),n.pending=r}function _d(n,r,a){if((a&4194240)!==0){var c=r.lanes;c&=n.pendingLanes,a|=c,r.lanes=a,Ho(n,a)}}var Ri={readContext:Pt,useCallback:it,useContext:it,useEffect:it,useImperativeHandle:it,useInsertionEffect:it,useLayoutEffect:it,useMemo:it,useReducer:it,useRef:it,useState:it,useDebugValue:it,useDeferredValue:it,useTransition:it,useMutableSource:it,useSyncExternalStore:it,useId:it,unstable_isNewReconciler:!1},t0={readContext:Pt,useCallback:function(n,r){return Kt().memoizedState=[n,r===void 0?null:r],n},useContext:Pt,useEffect:cd,useImperativeHandle:function(n,r,a){return a=a!=null?a.concat([n]):null,Ti(4194308,4,fd.bind(null,r,n),a)},useLayoutEffect:function(n,r){return Ti(4194308,4,n,r)},useInsertionEffect:function(n,r){return Ti(4,2,n,r)},useMemo:function(n,r){var a=Kt();return r=r===void 0?null:r,n=n(),a.memoizedState=[n,r],n},useReducer:function(n,r,a){var c=Kt();return r=a!==void 0?a(r):r,c.memoizedState=c.baseState=r,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:r},c.queue=n,n=n.dispatch=Zg.bind(null,De,n),[c.memoizedState,n]},useRef:function(n){var r=Kt();return n={current:n},r.memoizedState=n},useState:ld,useDebugValue:za,useDeferredValue:function(n){return Kt().memoizedState=n},useTransition:function(){var n=ld(!1),r=n[0];return n=Xg.bind(null,n[1]),Kt().memoizedState=n,[r,n]},useMutableSource:function(){},useSyncExternalStore:function(n,r,a){var c=De,h=Kt();if(Me){if(a===void 0)throw Error(t(407));a=a()}else{if(a=r(),Xe===null)throw Error(t(349));(Vn&30)!==0||rd(c,r,a)}h.memoizedState=a;var p={value:a,getSnapshot:r};return h.queue=p,cd(id.bind(null,c,p,n),[n]),c.flags|=2048,_s(9,sd.bind(null,c,p,a,r),void 0,null),a},useId:function(){var n=Kt(),r=Xe.identifierPrefix;if(Me){var a=Zt,c=Xt;a=(c&~(1<<32-Mt(c)-1)).toString(32)+a,r=":"+r+"R"+a,a=ws++,0<a&&(r+="H"+a.toString(32)),r+=":"}else a=Qg++,r=":"+r+"r"+a.toString(32)+":";return n.memoizedState=r},unstable_isNewReconciler:!1},n0={readContext:Pt,useCallback:md,useContext:Pt,useEffect:Va,useImperativeHandle:pd,useInsertionEffect:dd,useLayoutEffect:hd,useMemo:gd,useReducer:Fa,useRef:ud,useState:function(){return Fa(xs)},useDebugValue:za,useDeferredValue:function(n){var r=At();return vd(r,Ke.memoizedState,n)},useTransition:function(){var n=Fa(xs)[0],r=At().memoizedState;return[n,r]},useMutableSource:td,useSyncExternalStore:nd,useId:yd,unstable_isNewReconciler:!1},r0={readContext:Pt,useCallback:md,useContext:Pt,useEffect:Va,useImperativeHandle:pd,useInsertionEffect:dd,useLayoutEffect:hd,useMemo:gd,useReducer:Ba,useRef:ud,useState:function(){return Ba(xs)},useDebugValue:za,useDeferredValue:function(n){var r=At();return Ke===null?r.memoizedState=n:vd(r,Ke.memoizedState,n)},useTransition:function(){var n=Ba(xs)[0],r=At().memoizedState;return[n,r]},useMutableSource:td,useSyncExternalStore:nd,useId:yd,unstable_isNewReconciler:!1};function Ut(n,r){if(n&&n.defaultProps){r=X({},r),n=n.defaultProps;for(var a in n)r[a]===void 0&&(r[a]=n[a]);return r}return r}function qa(n,r,a,c){r=n.memoizedState,a=a(c,r),a=a==null?r:X({},r,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Pi={isMounted:function(n){return(n=n._reactInternals)?Mn(n)===n:!1},enqueueSetState:function(n,r,a){n=n._reactInternals;var c=ct(),h=_n(n),p=tn(c,h);p.payload=r,a!=null&&(p.callback=a),r=vn(n,p,h),r!==null&&(Bt(r,n,h,c),bi(r,n,h))},enqueueReplaceState:function(n,r,a){n=n._reactInternals;var c=ct(),h=_n(n),p=tn(c,h);p.tag=1,p.payload=r,a!=null&&(p.callback=a),r=vn(n,p,h),r!==null&&(Bt(r,n,h,c),bi(r,n,h))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var a=ct(),c=_n(n),h=tn(a,c);h.tag=2,r!=null&&(h.callback=r),r=vn(n,h,c),r!==null&&(Bt(r,n,c,a),bi(r,n,c))}};function bd(n,r,a,c,h,p,x){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,p,x):r.prototype&&r.prototype.isPureReactComponent?!as(a,c)||!as(h,p):!0}function kd(n,r,a){var c=!1,h=pn,p=r.contextType;return typeof p=="object"&&p!==null?p=Pt(p):(h=ft(r)?Dn:st.current,c=r.contextTypes,p=(c=c!=null)?gr(n,h):pn),r=new r(a,p),n.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Pi,n.stateNode=r,r._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=h,n.__reactInternalMemoizedMaskedChildContext=p),r}function Ed(n,r,a,c){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,c),r.state!==n&&Pi.enqueueReplaceState(r,r.state,null)}function Ha(n,r,a,c){var h=n.stateNode;h.props=a,h.state=n.memoizedState,h.refs={},Aa(n);var p=r.contextType;typeof p=="object"&&p!==null?h.context=Pt(p):(p=ft(r)?Dn:st.current,h.context=gr(n,p)),h.state=n.memoizedState,p=r.getDerivedStateFromProps,typeof p=="function"&&(qa(n,r,p,a),h.state=n.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(r=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),r!==h.state&&Pi.enqueueReplaceState(h,h.state,null),ki(n,a,h,c),h.state=n.memoizedState),typeof h.componentDidMount=="function"&&(n.flags|=4194308)}function Er(n,r){try{var a="",c=r;do a+=$(c),c=c.return;while(c);var h=a}catch(p){h=`
Error generating stack: `+p.message+`
`+p.stack}return{value:n,source:r,stack:h,digest:null}}function Wa(n,r,a){return{value:n,source:null,stack:a??null,digest:r??null}}function Ga(n,r){try{console.error(r.value)}catch(a){setTimeout(function(){throw a})}}var s0=typeof WeakMap=="function"?WeakMap:Map;function Sd(n,r,a){a=tn(-1,a),a.tag=3,a.payload={element:null};var c=r.value;return a.callback=function(){Di||(Di=!0,ll=c),Ga(n,r)},a}function Cd(n,r,a){a=tn(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var h=r.value;a.payload=function(){return c(h)},a.callback=function(){Ga(n,r)}}var p=n.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(a.callback=function(){Ga(n,r),typeof c!="function"&&(wn===null?wn=new Set([this]):wn.add(this));var x=r.stack;this.componentDidCatch(r.value,{componentStack:x!==null?x:""})}),a}function Td(n,r,a){var c=n.pingCache;if(c===null){c=n.pingCache=new s0;var h=new Set;c.set(r,h)}else h=c.get(r),h===void 0&&(h=new Set,c.set(r,h));h.has(a)||(h.add(a),n=y0.bind(null,n,r,a),r.then(n,n))}function Nd(n){do{var r;if((r=n.tag===13)&&(r=n.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return n;n=n.return}while(n!==null);return null}function Rd(n,r,a,c,h){return(n.mode&1)===0?(n===r?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(r=tn(-1,1),r.tag=2,vn(a,r,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=h,n)}var i0=L.ReactCurrentOwner,pt=!1;function ut(n,r,a,c){r.child=n===null?Jc(r,null,a,c):xr(r,n.child,a,c)}function Pd(n,r,a,c,h){a=a.render;var p=r.ref;return br(r,h),c=Ua(n,r,a,c,p,h),a=$a(),n!==null&&!pt?(r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~h,nn(n,r,h)):(Me&&a&&_a(r),r.flags|=1,ut(n,r,c,h),r.child)}function Ad(n,r,a,c,h){if(n===null){var p=a.type;return typeof p=="function"&&!ml(p)&&p.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(r.tag=15,r.type=p,Id(n,r,p,c,h)):(n=zi(a.type,null,c,r,r.mode,h),n.ref=r.ref,n.return=r,r.child=n)}if(p=n.child,(n.lanes&h)===0){var x=p.memoizedProps;if(a=a.compare,a=a!==null?a:as,a(x,c)&&n.ref===r.ref)return nn(n,r,h)}return r.flags|=1,n=kn(p,c),n.ref=r.ref,n.return=r,r.child=n}function Id(n,r,a,c,h){if(n!==null){var p=n.memoizedProps;if(as(p,c)&&n.ref===r.ref)if(pt=!1,r.pendingProps=c=p,(n.lanes&h)!==0)(n.flags&131072)!==0&&(pt=!0);else return r.lanes=n.lanes,nn(n,r,h)}return Ka(n,r,a,c,h)}function jd(n,r,a){var c=r.pendingProps,h=c.children,p=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pe(Cr,bt),bt|=a;else{if((a&1073741824)===0)return n=p!==null?p.baseLanes|a:a,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:n,cachePool:null,transitions:null},r.updateQueue=null,Pe(Cr,bt),bt|=n,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=p!==null?p.baseLanes:a,Pe(Cr,bt),bt|=c}else p!==null?(c=p.baseLanes|a,r.memoizedState=null):c=a,Pe(Cr,bt),bt|=c;return ut(n,r,h,a),r.child}function Od(n,r){var a=r.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(r.flags|=512,r.flags|=2097152)}function Ka(n,r,a,c,h){var p=ft(a)?Dn:st.current;return p=gr(r,p),br(r,h),a=Ua(n,r,a,c,p,h),c=$a(),n!==null&&!pt?(r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~h,nn(n,r,h)):(Me&&c&&_a(r),r.flags|=1,ut(n,r,a,h),r.child)}function Md(n,r,a,c,h){if(ft(a)){var p=!0;pi(r)}else p=!1;if(br(r,h),r.stateNode===null)Ii(n,r),kd(r,a,c),Ha(r,a,c,h),c=!0;else if(n===null){var x=r.stateNode,E=r.memoizedProps;x.props=E;var R=x.context,D=a.contextType;typeof D=="object"&&D!==null?D=Pt(D):(D=ft(a)?Dn:st.current,D=gr(r,D));var V=a.getDerivedStateFromProps,z=typeof V=="function"||typeof x.getSnapshotBeforeUpdate=="function";z||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(E!==c||R!==D)&&Ed(r,x,c,D),gn=!1;var B=r.memoizedState;x.state=B,ki(r,c,x,h),R=r.memoizedState,E!==c||B!==R||ht.current||gn?(typeof V=="function"&&(qa(r,a,V,c),R=r.memoizedState),(E=gn||bd(r,a,E,c,B,R,D))?(z||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(r.flags|=4194308)):(typeof x.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=R),x.props=c,x.state=R,x.context=D,c=E):(typeof x.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{x=r.stateNode,Qc(n,r),E=r.memoizedProps,D=r.type===r.elementType?E:Ut(r.type,E),x.props=D,z=r.pendingProps,B=x.context,R=a.contextType,typeof R=="object"&&R!==null?R=Pt(R):(R=ft(a)?Dn:st.current,R=gr(r,R));var Y=a.getDerivedStateFromProps;(V=typeof Y=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(E!==z||B!==R)&&Ed(r,x,c,R),gn=!1,B=r.memoizedState,x.state=B,ki(r,c,x,h);var ee=r.memoizedState;E!==z||B!==ee||ht.current||gn?(typeof Y=="function"&&(qa(r,a,Y,c),ee=r.memoizedState),(D=gn||bd(r,a,D,c,B,ee,R)||!1)?(V||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(c,ee,R),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(c,ee,R)),typeof x.componentDidUpdate=="function"&&(r.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof x.componentDidUpdate!="function"||E===n.memoizedProps&&B===n.memoizedState||(r.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&B===n.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=ee),x.props=c,x.state=ee,x.context=R,c=D):(typeof x.componentDidUpdate!="function"||E===n.memoizedProps&&B===n.memoizedState||(r.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&B===n.memoizedState||(r.flags|=1024),c=!1)}return Ja(n,r,a,c,p,h)}function Ja(n,r,a,c,h,p){Od(n,r);var x=(r.flags&128)!==0;if(!c&&!x)return h&&Fc(r,a,!1),nn(n,r,p);c=r.stateNode,i0.current=r;var E=x&&typeof a.getDerivedStateFromError!="function"?null:c.render();return r.flags|=1,n!==null&&x?(r.child=xr(r,n.child,null,p),r.child=xr(r,null,E,p)):ut(n,r,E,p),r.memoizedState=c.state,h&&Fc(r,a,!0),r.child}function Ld(n){var r=n.stateNode;r.pendingContext?Uc(n,r.pendingContext,r.pendingContext!==r.context):r.context&&Uc(n,r.context,!1),Ia(n,r.containerInfo)}function Dd(n,r,a,c,h){return wr(),Sa(h),r.flags|=256,ut(n,r,a,c),r.child}var Ya={dehydrated:null,treeContext:null,retryLane:0};function Qa(n){return{baseLanes:n,cachePool:null,transitions:null}}function Ud(n,r,a){var c=r.pendingProps,h=Le.current,p=!1,x=(r.flags&128)!==0,E;if((E=x)||(E=n!==null&&n.memoizedState===null?!1:(h&2)!==0),E?(p=!0,r.flags&=-129):(n===null||n.memoizedState!==null)&&(h|=1),Pe(Le,h&1),n===null)return Ea(r),n=r.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((r.mode&1)===0?r.lanes=1:n.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(x=c.children,n=c.fallback,p?(c=r.mode,p=r.child,x={mode:"hidden",children:x},(c&1)===0&&p!==null?(p.childLanes=0,p.pendingProps=x):p=qi(x,c,0,null),n=Gn(n,c,a,null),p.return=r,n.return=r,p.sibling=n,r.child=p,r.child.memoizedState=Qa(a),r.memoizedState=Ya,n):Xa(r,x));if(h=n.memoizedState,h!==null&&(E=h.dehydrated,E!==null))return o0(n,r,x,c,E,h,a);if(p){p=c.fallback,x=r.mode,h=n.child,E=h.sibling;var R={mode:"hidden",children:c.children};return(x&1)===0&&r.child!==h?(c=r.child,c.childLanes=0,c.pendingProps=R,r.deletions=null):(c=kn(h,R),c.subtreeFlags=h.subtreeFlags&14680064),E!==null?p=kn(E,p):(p=Gn(p,x,a,null),p.flags|=2),p.return=r,c.return=r,c.sibling=p,r.child=c,c=p,p=r.child,x=n.child.memoizedState,x=x===null?Qa(a):{baseLanes:x.baseLanes|a,cachePool:null,transitions:x.transitions},p.memoizedState=x,p.childLanes=n.childLanes&~a,r.memoizedState=Ya,c}return p=n.child,n=p.sibling,c=kn(p,{mode:"visible",children:c.children}),(r.mode&1)===0&&(c.lanes=a),c.return=r,c.sibling=null,n!==null&&(a=r.deletions,a===null?(r.deletions=[n],r.flags|=16):a.push(n)),r.child=c,r.memoizedState=null,c}function Xa(n,r){return r=qi({mode:"visible",children:r},n.mode,0,null),r.return=n,n.child=r}function Ai(n,r,a,c){return c!==null&&Sa(c),xr(r,n.child,null,a),n=Xa(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function o0(n,r,a,c,h,p,x){if(a)return r.flags&256?(r.flags&=-257,c=Wa(Error(t(422))),Ai(n,r,x,c)):r.memoizedState!==null?(r.child=n.child,r.flags|=128,null):(p=c.fallback,h=r.mode,c=qi({mode:"visible",children:c.children},h,0,null),p=Gn(p,h,x,null),p.flags|=2,c.return=r,p.return=r,c.sibling=p,r.child=c,(r.mode&1)!==0&&xr(r,n.child,null,x),r.child.memoizedState=Qa(x),r.memoizedState=Ya,p);if((r.mode&1)===0)return Ai(n,r,x,null);if(h.data==="$!"){if(c=h.nextSibling&&h.nextSibling.dataset,c)var E=c.dgst;return c=E,p=Error(t(419)),c=Wa(p,c,void 0),Ai(n,r,x,c)}if(E=(x&n.childLanes)!==0,pt||E){if(c=Xe,c!==null){switch(x&-x){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=(h&(c.suspendedLanes|x))!==0?0:h,h!==0&&h!==p.retryLane&&(p.retryLane=h,en(n,h),Bt(c,n,h,-1))}return pl(),c=Wa(Error(t(421))),Ai(n,r,x,c)}return h.data==="$?"?(r.flags|=128,r.child=n.child,r=w0.bind(null,n),h._reactRetry=r,null):(n=p.treeContext,_t=hn(h.nextSibling),xt=r,Me=!0,Dt=null,n!==null&&(Nt[Rt++]=Xt,Nt[Rt++]=Zt,Nt[Rt++]=Un,Xt=n.id,Zt=n.overflow,Un=r),r=Xa(r,c.children),r.flags|=4096,r)}function $d(n,r,a){n.lanes|=r;var c=n.alternate;c!==null&&(c.lanes|=r),Ra(n.return,r,a)}function Za(n,r,a,c,h){var p=n.memoizedState;p===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:h}:(p.isBackwards=r,p.rendering=null,p.renderingStartTime=0,p.last=c,p.tail=a,p.tailMode=h)}function Fd(n,r,a){var c=r.pendingProps,h=c.revealOrder,p=c.tail;if(ut(n,r,c.children,a),c=Le.current,(c&2)!==0)c=c&1|2,r.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&$d(n,a,r);else if(n.tag===19)$d(n,a,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(Pe(Le,c),(r.mode&1)===0)r.memoizedState=null;else switch(h){case"forwards":for(a=r.child,h=null;a!==null;)n=a.alternate,n!==null&&Ei(n)===null&&(h=a),a=a.sibling;a=h,a===null?(h=r.child,r.child=null):(h=a.sibling,a.sibling=null),Za(r,!1,h,a,p);break;case"backwards":for(a=null,h=r.child,r.child=null;h!==null;){if(n=h.alternate,n!==null&&Ei(n)===null){r.child=h;break}n=h.sibling,h.sibling=a,a=h,h=n}Za(r,!0,a,null,p);break;case"together":Za(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Ii(n,r){(r.mode&1)===0&&n!==null&&(n.alternate=null,r.alternate=null,r.flags|=2)}function nn(n,r,a){if(n!==null&&(r.dependencies=n.dependencies),zn|=r.lanes,(a&r.childLanes)===0)return null;if(n!==null&&r.child!==n.child)throw Error(t(153));if(r.child!==null){for(n=r.child,a=kn(n,n.pendingProps),r.child=a,a.return=r;n.sibling!==null;)n=n.sibling,a=a.sibling=kn(n,n.pendingProps),a.return=r;a.sibling=null}return r.child}function a0(n,r,a){switch(r.tag){case 3:Ld(r),wr();break;case 5:ed(r);break;case 1:ft(r.type)&&pi(r);break;case 4:Ia(r,r.stateNode.containerInfo);break;case 10:var c=r.type._context,h=r.memoizedProps.value;Pe(xi,c._currentValue),c._currentValue=h;break;case 13:if(c=r.memoizedState,c!==null)return c.dehydrated!==null?(Pe(Le,Le.current&1),r.flags|=128,null):(a&r.child.childLanes)!==0?Ud(n,r,a):(Pe(Le,Le.current&1),n=nn(n,r,a),n!==null?n.sibling:null);Pe(Le,Le.current&1);break;case 19:if(c=(a&r.childLanes)!==0,(n.flags&128)!==0){if(c)return Fd(n,r,a);r.flags|=128}if(h=r.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),Pe(Le,Le.current),c)break;return null;case 22:case 23:return r.lanes=0,jd(n,r,a)}return nn(n,r,a)}var Bd,el,Vd,zd;Bd=function(n,r){for(var a=r.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},el=function(){},Vd=function(n,r,a,c){var h=n.memoizedProps;if(h!==c){n=r.stateNode,Bn(Gt.current);var p=null;switch(a){case"input":h=Tt(n,h),c=Tt(n,c),p=[];break;case"select":h=X({},h,{value:void 0}),c=X({},c,{value:void 0}),p=[];break;case"textarea":h=Io(n,h),c=Io(n,c),p=[];break;default:typeof h.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=di)}Oo(a,c);var x;a=null;for(D in h)if(!c.hasOwnProperty(D)&&h.hasOwnProperty(D)&&h[D]!=null)if(D==="style"){var E=h[D];for(x in E)E.hasOwnProperty(x)&&(a||(a={}),a[x]="")}else D!=="dangerouslySetInnerHTML"&&D!=="children"&&D!=="suppressContentEditableWarning"&&D!=="suppressHydrationWarning"&&D!=="autoFocus"&&(o.hasOwnProperty(D)?p||(p=[]):(p=p||[]).push(D,null));for(D in c){var R=c[D];if(E=h?.[D],c.hasOwnProperty(D)&&R!==E&&(R!=null||E!=null))if(D==="style")if(E){for(x in E)!E.hasOwnProperty(x)||R&&R.hasOwnProperty(x)||(a||(a={}),a[x]="");for(x in R)R.hasOwnProperty(x)&&E[x]!==R[x]&&(a||(a={}),a[x]=R[x])}else a||(p||(p=[]),p.push(D,a)),a=R;else D==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,E=E?E.__html:void 0,R!=null&&E!==R&&(p=p||[]).push(D,R)):D==="children"?typeof R!="string"&&typeof R!="number"||(p=p||[]).push(D,""+R):D!=="suppressContentEditableWarning"&&D!=="suppressHydrationWarning"&&(o.hasOwnProperty(D)?(R!=null&&D==="onScroll"&&je("scroll",n),p||E===R||(p=[])):(p=p||[]).push(D,R))}a&&(p=p||[]).push("style",a);var D=p;(r.updateQueue=D)&&(r.flags|=4)}},zd=function(n,r,a,c){a!==c&&(r.flags|=4)};function bs(n,r){if(!Me)switch(n.tailMode){case"hidden":r=n.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function ot(n){var r=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(r)for(var h=n.child;h!==null;)a|=h.lanes|h.childLanes,c|=h.subtreeFlags&14680064,c|=h.flags&14680064,h.return=n,h=h.sibling;else for(h=n.child;h!==null;)a|=h.lanes|h.childLanes,c|=h.subtreeFlags,c|=h.flags,h.return=n,h=h.sibling;return n.subtreeFlags|=c,n.childLanes=a,r}function l0(n,r,a){var c=r.pendingProps;switch(ba(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ot(r),null;case 1:return ft(r.type)&&fi(),ot(r),null;case 3:return c=r.stateNode,kr(),Oe(ht),Oe(st),Ma(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(yi(r)?r.flags|=4:n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Dt!==null&&(dl(Dt),Dt=null))),el(n,r),ot(r),null;case 5:ja(r);var h=Bn(vs.current);if(a=r.type,n!==null&&r.stateNode!=null)Vd(n,r,a,c,h),n.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!c){if(r.stateNode===null)throw Error(t(166));return ot(r),null}if(n=Bn(Gt.current),yi(r)){c=r.stateNode,a=r.type;var p=r.memoizedProps;switch(c[Wt]=r,c[hs]=p,n=(r.mode&1)!==0,a){case"dialog":je("cancel",c),je("close",c);break;case"iframe":case"object":case"embed":je("load",c);break;case"video":case"audio":for(h=0;h<us.length;h++)je(us[h],c);break;case"source":je("error",c);break;case"img":case"image":case"link":je("error",c),je("load",c);break;case"details":je("toggle",c);break;case"input":rr(c,p),je("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!p.multiple},je("invalid",c);break;case"textarea":Cu(c,p),je("invalid",c)}Oo(a,p),h=null;for(var x in p)if(p.hasOwnProperty(x)){var E=p[x];x==="children"?typeof E=="string"?c.textContent!==E&&(p.suppressHydrationWarning!==!0&&ci(c.textContent,E,n),h=["children",E]):typeof E=="number"&&c.textContent!==""+E&&(p.suppressHydrationWarning!==!0&&ci(c.textContent,E,n),h=["children",""+E]):o.hasOwnProperty(x)&&E!=null&&x==="onScroll"&&je("scroll",c)}switch(a){case"input":ae(c),Su(c,p,!0);break;case"textarea":ae(c),Nu(c);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(c.onclick=di)}c=h,r.updateQueue=c,c!==null&&(r.flags|=4)}else{x=h.nodeType===9?h:h.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Ru(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=x.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=x.createElement(a,{is:c.is}):(n=x.createElement(a),a==="select"&&(x=n,c.multiple?x.multiple=!0:c.size&&(x.size=c.size))):n=x.createElementNS(n,a),n[Wt]=r,n[hs]=c,Bd(n,r,!1,!1),r.stateNode=n;e:{switch(x=Mo(a,c),a){case"dialog":je("cancel",n),je("close",n),h=c;break;case"iframe":case"object":case"embed":je("load",n),h=c;break;case"video":case"audio":for(h=0;h<us.length;h++)je(us[h],n);h=c;break;case"source":je("error",n),h=c;break;case"img":case"image":case"link":je("error",n),je("load",n),h=c;break;case"details":je("toggle",n),h=c;break;case"input":rr(n,c),h=Tt(n,c),je("invalid",n);break;case"option":h=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},h=X({},c,{value:void 0}),je("invalid",n);break;case"textarea":Cu(n,c),h=Io(n,c),je("invalid",n);break;default:h=c}Oo(a,h),E=h;for(p in E)if(E.hasOwnProperty(p)){var R=E[p];p==="style"?Iu(n,R):p==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,R!=null&&Pu(n,R)):p==="children"?typeof R=="string"?(a!=="textarea"||R!=="")&&qr(n,R):typeof R=="number"&&qr(n,""+R):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(o.hasOwnProperty(p)?R!=null&&p==="onScroll"&&je("scroll",n):R!=null&&P(n,p,R,x))}switch(a){case"input":ae(n),Su(n,c,!1);break;case"textarea":ae(n),Nu(n);break;case"option":c.value!=null&&n.setAttribute("value",""+de(c.value));break;case"select":n.multiple=!!c.multiple,p=c.value,p!=null?sr(n,!!c.multiple,p,!1):c.defaultValue!=null&&sr(n,!!c.multiple,c.defaultValue,!0);break;default:typeof h.onClick=="function"&&(n.onclick=di)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return ot(r),null;case 6:if(n&&r.stateNode!=null)zd(n,r,n.memoizedProps,c);else{if(typeof c!="string"&&r.stateNode===null)throw Error(t(166));if(a=Bn(vs.current),Bn(Gt.current),yi(r)){if(c=r.stateNode,a=r.memoizedProps,c[Wt]=r,(p=c.nodeValue!==a)&&(n=xt,n!==null))switch(n.tag){case 3:ci(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&ci(c.nodeValue,a,(n.mode&1)!==0)}p&&(r.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[Wt]=r,r.stateNode=c}return ot(r),null;case 13:if(Oe(Le),c=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Me&&_t!==null&&(r.mode&1)!==0&&(r.flags&128)===0)Wc(),wr(),r.flags|=98560,p=!1;else if(p=yi(r),c!==null&&c.dehydrated!==null){if(n===null){if(!p)throw Error(t(318));if(p=r.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(t(317));p[Wt]=r}else wr(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ot(r),p=!1}else Dt!==null&&(dl(Dt),Dt=null),p=!0;if(!p)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=a,r):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(r.child.flags|=8192,(r.mode&1)!==0&&(n===null||(Le.current&1)!==0?Je===0&&(Je=3):pl())),r.updateQueue!==null&&(r.flags|=4),ot(r),null);case 4:return kr(),el(n,r),n===null&&cs(r.stateNode.containerInfo),ot(r),null;case 10:return Na(r.type._context),ot(r),null;case 17:return ft(r.type)&&fi(),ot(r),null;case 19:if(Oe(Le),p=r.memoizedState,p===null)return ot(r),null;if(c=(r.flags&128)!==0,x=p.rendering,x===null)if(c)bs(p,!1);else{if(Je!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(x=Ei(n),x!==null){for(r.flags|=128,bs(p,!1),c=x.updateQueue,c!==null&&(r.updateQueue=c,r.flags|=4),r.subtreeFlags=0,c=a,a=r.child;a!==null;)p=a,n=c,p.flags&=14680066,x=p.alternate,x===null?(p.childLanes=0,p.lanes=n,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=x.childLanes,p.lanes=x.lanes,p.child=x.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=x.memoizedProps,p.memoizedState=x.memoizedState,p.updateQueue=x.updateQueue,p.type=x.type,n=x.dependencies,p.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return Pe(Le,Le.current&1|2),r.child}n=n.sibling}p.tail!==null&&Be()>Tr&&(r.flags|=128,c=!0,bs(p,!1),r.lanes=4194304)}else{if(!c)if(n=Ei(x),n!==null){if(r.flags|=128,c=!0,a=n.updateQueue,a!==null&&(r.updateQueue=a,r.flags|=4),bs(p,!0),p.tail===null&&p.tailMode==="hidden"&&!x.alternate&&!Me)return ot(r),null}else 2*Be()-p.renderingStartTime>Tr&&a!==1073741824&&(r.flags|=128,c=!0,bs(p,!1),r.lanes=4194304);p.isBackwards?(x.sibling=r.child,r.child=x):(a=p.last,a!==null?a.sibling=x:r.child=x,p.last=x)}return p.tail!==null?(r=p.tail,p.rendering=r,p.tail=r.sibling,p.renderingStartTime=Be(),r.sibling=null,a=Le.current,Pe(Le,c?a&1|2:a&1),r):(ot(r),null);case 22:case 23:return fl(),c=r.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(r.flags|=8192),c&&(r.mode&1)!==0?(bt&1073741824)!==0&&(ot(r),r.subtreeFlags&6&&(r.flags|=8192)):ot(r),null;case 24:return null;case 25:return null}throw Error(t(156,r.tag))}function u0(n,r){switch(ba(r),r.tag){case 1:return ft(r.type)&&fi(),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return kr(),Oe(ht),Oe(st),Ma(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 5:return ja(r),null;case 13:if(Oe(Le),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(t(340));wr()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return Oe(Le),null;case 4:return kr(),null;case 10:return Na(r.type._context),null;case 22:case 23:return fl(),null;case 24:return null;default:return null}}var ji=!1,at=!1,c0=typeof WeakSet=="function"?WeakSet:Set,Z=null;function Sr(n,r){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){$e(n,r,c)}else a.current=null}function tl(n,r,a){try{a()}catch(c){$e(n,r,c)}}var qd=!1;function d0(n,r){if(fa=Zs,n=bc(),ia(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var h=c.anchorOffset,p=c.focusNode;c=c.focusOffset;try{a.nodeType,p.nodeType}catch{a=null;break e}var x=0,E=-1,R=-1,D=0,V=0,z=n,B=null;t:for(;;){for(var Y;z!==a||h!==0&&z.nodeType!==3||(E=x+h),z!==p||c!==0&&z.nodeType!==3||(R=x+c),z.nodeType===3&&(x+=z.nodeValue.length),(Y=z.firstChild)!==null;)B=z,z=Y;for(;;){if(z===n)break t;if(B===a&&++D===h&&(E=x),B===p&&++V===c&&(R=x),(Y=z.nextSibling)!==null)break;z=B,B=z.parentNode}z=Y}a=E===-1||R===-1?null:{start:E,end:R}}else a=null}a=a||{start:0,end:0}}else a=null;for(pa={focusedElem:n,selectionRange:a},Zs=!1,Z=r;Z!==null;)if(r=Z,n=r.child,(r.subtreeFlags&1028)!==0&&n!==null)n.return=r,Z=n;else for(;Z!==null;){r=Z;try{var ee=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(ee!==null){var re=ee.memoizedProps,Ve=ee.memoizedState,O=r.stateNode,A=O.getSnapshotBeforeUpdate(r.elementType===r.type?re:Ut(r.type,re),Ve);O.__reactInternalSnapshotBeforeUpdate=A}break;case 3:var M=r.stateNode.containerInfo;M.nodeType===1?M.textContent="":M.nodeType===9&&M.documentElement&&M.removeChild(M.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(q){$e(r,r.return,q)}if(n=r.sibling,n!==null){n.return=r.return,Z=n;break}Z=r.return}return ee=qd,qd=!1,ee}function ks(n,r,a){var c=r.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var h=c=c.next;do{if((h.tag&n)===n){var p=h.destroy;h.destroy=void 0,p!==void 0&&tl(r,a,p)}h=h.next}while(h!==c)}}function Oi(n,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==r)}}function nl(n){var r=n.ref;if(r!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof r=="function"?r(n):r.current=n}}function Hd(n){var r=n.alternate;r!==null&&(n.alternate=null,Hd(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&(delete r[Wt],delete r[hs],delete r[ya],delete r[Gg],delete r[Kg])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Wd(n){return n.tag===5||n.tag===3||n.tag===4}function Gd(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Wd(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function rl(n,r,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?a.nodeType===8?a.parentNode.insertBefore(n,r):a.insertBefore(n,r):(a.nodeType===8?(r=a.parentNode,r.insertBefore(n,a)):(r=a,r.appendChild(n)),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=di));else if(c!==4&&(n=n.child,n!==null))for(rl(n,r,a),n=n.sibling;n!==null;)rl(n,r,a),n=n.sibling}function sl(n,r,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?a.insertBefore(n,r):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(sl(n,r,a),n=n.sibling;n!==null;)sl(n,r,a),n=n.sibling}var et=null,$t=!1;function yn(n,r,a){for(a=a.child;a!==null;)Kd(n,r,a),a=a.sibling}function Kd(n,r,a){if(Ht&&typeof Ht.onCommitFiberUnmount=="function")try{Ht.onCommitFiberUnmount(Gs,a)}catch{}switch(a.tag){case 5:at||Sr(a,r);case 6:var c=et,h=$t;et=null,yn(n,r,a),et=c,$t=h,et!==null&&($t?(n=et,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):et.removeChild(a.stateNode));break;case 18:et!==null&&($t?(n=et,a=a.stateNode,n.nodeType===8?va(n.parentNode,a):n.nodeType===1&&va(n,a),ts(n)):va(et,a.stateNode));break;case 4:c=et,h=$t,et=a.stateNode.containerInfo,$t=!0,yn(n,r,a),et=c,$t=h;break;case 0:case 11:case 14:case 15:if(!at&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){h=c=c.next;do{var p=h,x=p.destroy;p=p.tag,x!==void 0&&((p&2)!==0||(p&4)!==0)&&tl(a,r,x),h=h.next}while(h!==c)}yn(n,r,a);break;case 1:if(!at&&(Sr(a,r),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(E){$e(a,r,E)}yn(n,r,a);break;case 21:yn(n,r,a);break;case 22:a.mode&1?(at=(c=at)||a.memoizedState!==null,yn(n,r,a),at=c):yn(n,r,a);break;default:yn(n,r,a)}}function Jd(n){var r=n.updateQueue;if(r!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new c0),r.forEach(function(c){var h=x0.bind(null,n,c);a.has(c)||(a.add(c),c.then(h,h))})}}function Ft(n,r){var a=r.deletions;if(a!==null)for(var c=0;c<a.length;c++){var h=a[c];try{var p=n,x=r,E=x;e:for(;E!==null;){switch(E.tag){case 5:et=E.stateNode,$t=!1;break e;case 3:et=E.stateNode.containerInfo,$t=!0;break e;case 4:et=E.stateNode.containerInfo,$t=!0;break e}E=E.return}if(et===null)throw Error(t(160));Kd(p,x,h),et=null,$t=!1;var R=h.alternate;R!==null&&(R.return=null),h.return=null}catch(D){$e(h,r,D)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)Yd(r,n),r=r.sibling}function Yd(n,r){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Ft(r,n),Jt(n),c&4){try{ks(3,n,n.return),Oi(3,n)}catch(re){$e(n,n.return,re)}try{ks(5,n,n.return)}catch(re){$e(n,n.return,re)}}break;case 1:Ft(r,n),Jt(n),c&512&&a!==null&&Sr(a,a.return);break;case 5:if(Ft(r,n),Jt(n),c&512&&a!==null&&Sr(a,a.return),n.flags&32){var h=n.stateNode;try{qr(h,"")}catch(re){$e(n,n.return,re)}}if(c&4&&(h=n.stateNode,h!=null)){var p=n.memoizedProps,x=a!==null?a.memoizedProps:p,E=n.type,R=n.updateQueue;if(n.updateQueue=null,R!==null)try{E==="input"&&p.type==="radio"&&p.name!=null&&Eu(h,p),Mo(E,x);var D=Mo(E,p);for(x=0;x<R.length;x+=2){var V=R[x],z=R[x+1];V==="style"?Iu(h,z):V==="dangerouslySetInnerHTML"?Pu(h,z):V==="children"?qr(h,z):P(h,V,z,D)}switch(E){case"input":Po(h,p);break;case"textarea":Tu(h,p);break;case"select":var B=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!p.multiple;var Y=p.value;Y!=null?sr(h,!!p.multiple,Y,!1):B!==!!p.multiple&&(p.defaultValue!=null?sr(h,!!p.multiple,p.defaultValue,!0):sr(h,!!p.multiple,p.multiple?[]:"",!1))}h[hs]=p}catch(re){$e(n,n.return,re)}}break;case 6:if(Ft(r,n),Jt(n),c&4){if(n.stateNode===null)throw Error(t(162));h=n.stateNode,p=n.memoizedProps;try{h.nodeValue=p}catch(re){$e(n,n.return,re)}}break;case 3:if(Ft(r,n),Jt(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{ts(r.containerInfo)}catch(re){$e(n,n.return,re)}break;case 4:Ft(r,n),Jt(n);break;case 13:Ft(r,n),Jt(n),h=n.child,h.flags&8192&&(p=h.memoizedState!==null,h.stateNode.isHidden=p,!p||h.alternate!==null&&h.alternate.memoizedState!==null||(al=Be())),c&4&&Jd(n);break;case 22:if(V=a!==null&&a.memoizedState!==null,n.mode&1?(at=(D=at)||V,Ft(r,n),at=D):Ft(r,n),Jt(n),c&8192){if(D=n.memoizedState!==null,(n.stateNode.isHidden=D)&&!V&&(n.mode&1)!==0)for(Z=n,V=n.child;V!==null;){for(z=Z=V;Z!==null;){switch(B=Z,Y=B.child,B.tag){case 0:case 11:case 14:case 15:ks(4,B,B.return);break;case 1:Sr(B,B.return);var ee=B.stateNode;if(typeof ee.componentWillUnmount=="function"){c=B,a=B.return;try{r=c,ee.props=r.memoizedProps,ee.state=r.memoizedState,ee.componentWillUnmount()}catch(re){$e(c,a,re)}}break;case 5:Sr(B,B.return);break;case 22:if(B.memoizedState!==null){Zd(z);continue}}Y!==null?(Y.return=B,Z=Y):Zd(z)}V=V.sibling}e:for(V=null,z=n;;){if(z.tag===5){if(V===null){V=z;try{h=z.stateNode,D?(p=h.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(E=z.stateNode,R=z.memoizedProps.style,x=R!=null&&R.hasOwnProperty("display")?R.display:null,E.style.display=Au("display",x))}catch(re){$e(n,n.return,re)}}}else if(z.tag===6){if(V===null)try{z.stateNode.nodeValue=D?"":z.memoizedProps}catch(re){$e(n,n.return,re)}}else if((z.tag!==22&&z.tag!==23||z.memoizedState===null||z===n)&&z.child!==null){z.child.return=z,z=z.child;continue}if(z===n)break e;for(;z.sibling===null;){if(z.return===null||z.return===n)break e;V===z&&(V=null),z=z.return}V===z&&(V=null),z.sibling.return=z.return,z=z.sibling}}break;case 19:Ft(r,n),Jt(n),c&4&&Jd(n);break;case 21:break;default:Ft(r,n),Jt(n)}}function Jt(n){var r=n.flags;if(r&2){try{e:{for(var a=n.return;a!==null;){if(Wd(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var h=c.stateNode;c.flags&32&&(qr(h,""),c.flags&=-33);var p=Gd(n);sl(n,p,h);break;case 3:case 4:var x=c.stateNode.containerInfo,E=Gd(n);rl(n,E,x);break;default:throw Error(t(161))}}catch(R){$e(n,n.return,R)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function h0(n,r,a){Z=n,Qd(n)}function Qd(n,r,a){for(var c=(n.mode&1)!==0;Z!==null;){var h=Z,p=h.child;if(h.tag===22&&c){var x=h.memoizedState!==null||ji;if(!x){var E=h.alternate,R=E!==null&&E.memoizedState!==null||at;E=ji;var D=at;if(ji=x,(at=R)&&!D)for(Z=h;Z!==null;)x=Z,R=x.child,x.tag===22&&x.memoizedState!==null?eh(h):R!==null?(R.return=x,Z=R):eh(h);for(;p!==null;)Z=p,Qd(p),p=p.sibling;Z=h,ji=E,at=D}Xd(n)}else(h.subtreeFlags&8772)!==0&&p!==null?(p.return=h,Z=p):Xd(n)}}function Xd(n){for(;Z!==null;){var r=Z;if((r.flags&8772)!==0){var a=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:at||Oi(5,r);break;case 1:var c=r.stateNode;if(r.flags&4&&!at)if(a===null)c.componentDidMount();else{var h=r.elementType===r.type?a.memoizedProps:Ut(r.type,a.memoizedProps);c.componentDidUpdate(h,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var p=r.updateQueue;p!==null&&Zc(r,p,c);break;case 3:var x=r.updateQueue;if(x!==null){if(a=null,r.child!==null)switch(r.child.tag){case 5:a=r.child.stateNode;break;case 1:a=r.child.stateNode}Zc(r,x,a)}break;case 5:var E=r.stateNode;if(a===null&&r.flags&4){a=E;var R=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":R.autoFocus&&a.focus();break;case"img":R.src&&(a.src=R.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var D=r.alternate;if(D!==null){var V=D.memoizedState;if(V!==null){var z=V.dehydrated;z!==null&&ts(z)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}at||r.flags&512&&nl(r)}catch(B){$e(r,r.return,B)}}if(r===n){Z=null;break}if(a=r.sibling,a!==null){a.return=r.return,Z=a;break}Z=r.return}}function Zd(n){for(;Z!==null;){var r=Z;if(r===n){Z=null;break}var a=r.sibling;if(a!==null){a.return=r.return,Z=a;break}Z=r.return}}function eh(n){for(;Z!==null;){var r=Z;try{switch(r.tag){case 0:case 11:case 15:var a=r.return;try{Oi(4,r)}catch(R){$e(r,a,R)}break;case 1:var c=r.stateNode;if(typeof c.componentDidMount=="function"){var h=r.return;try{c.componentDidMount()}catch(R){$e(r,h,R)}}var p=r.return;try{nl(r)}catch(R){$e(r,p,R)}break;case 5:var x=r.return;try{nl(r)}catch(R){$e(r,x,R)}}}catch(R){$e(r,r.return,R)}if(r===n){Z=null;break}var E=r.sibling;if(E!==null){E.return=r.return,Z=E;break}Z=r.return}}var f0=Math.ceil,Mi=L.ReactCurrentDispatcher,il=L.ReactCurrentOwner,It=L.ReactCurrentBatchConfig,ke=0,Xe=null,He=null,tt=0,bt=0,Cr=fn(0),Je=0,Es=null,zn=0,Li=0,ol=0,Ss=null,mt=null,al=0,Tr=1/0,rn=null,Di=!1,ll=null,wn=null,Ui=!1,xn=null,$i=0,Cs=0,ul=null,Fi=-1,Bi=0;function ct(){return(ke&6)!==0?Be():Fi!==-1?Fi:Fi=Be()}function _n(n){return(n.mode&1)===0?1:(ke&2)!==0&&tt!==0?tt&-tt:Yg.transition!==null?(Bi===0&&(Bi=Gu()),Bi):(n=Te,n!==0||(n=window.event,n=n===void 0?16:nc(n.type)),n)}function Bt(n,r,a,c){if(50<Cs)throw Cs=0,ul=null,Error(t(185));Yr(n,a,c),((ke&2)===0||n!==Xe)&&(n===Xe&&((ke&2)===0&&(Li|=a),Je===4&&bn(n,tt)),gt(n,c),a===1&&ke===0&&(r.mode&1)===0&&(Tr=Be()+500,mi&&mn()))}function gt(n,r){var a=n.callbackNode;Ym(n,r);var c=Ys(n,n===Xe?tt:0);if(c===0)a!==null&&qu(a),n.callbackNode=null,n.callbackPriority=0;else if(r=c&-c,n.callbackPriority!==r){if(a!=null&&qu(a),r===1)n.tag===0?Jg(nh.bind(null,n)):Bc(nh.bind(null,n)),Hg(function(){(ke&6)===0&&mn()}),a=null;else{switch(Ku(c)){case 1:a=Vo;break;case 4:a=Hu;break;case 16:a=Ws;break;case 536870912:a=Wu;break;default:a=Ws}a=ch(a,th.bind(null,n))}n.callbackPriority=r,n.callbackNode=a}}function th(n,r){if(Fi=-1,Bi=0,(ke&6)!==0)throw Error(t(327));var a=n.callbackNode;if(Nr()&&n.callbackNode!==a)return null;var c=Ys(n,n===Xe?tt:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||r)r=Vi(n,c);else{r=c;var h=ke;ke|=2;var p=sh();(Xe!==n||tt!==r)&&(rn=null,Tr=Be()+500,Hn(n,r));do try{g0();break}catch(E){rh(n,E)}while(!0);Ta(),Mi.current=p,ke=h,He!==null?r=0:(Xe=null,tt=0,r=Je)}if(r!==0){if(r===2&&(h=zo(n),h!==0&&(c=h,r=cl(n,h))),r===1)throw a=Es,Hn(n,0),bn(n,c),gt(n,Be()),a;if(r===6)bn(n,c);else{if(h=n.current.alternate,(c&30)===0&&!p0(h)&&(r=Vi(n,c),r===2&&(p=zo(n),p!==0&&(c=p,r=cl(n,p))),r===1))throw a=Es,Hn(n,0),bn(n,c),gt(n,Be()),a;switch(n.finishedWork=h,n.finishedLanes=c,r){case 0:case 1:throw Error(t(345));case 2:Wn(n,mt,rn);break;case 3:if(bn(n,c),(c&130023424)===c&&(r=al+500-Be(),10<r)){if(Ys(n,0)!==0)break;if(h=n.suspendedLanes,(h&c)!==c){ct(),n.pingedLanes|=n.suspendedLanes&h;break}n.timeoutHandle=ga(Wn.bind(null,n,mt,rn),r);break}Wn(n,mt,rn);break;case 4:if(bn(n,c),(c&4194240)===c)break;for(r=n.eventTimes,h=-1;0<c;){var x=31-Mt(c);p=1<<x,x=r[x],x>h&&(h=x),c&=~p}if(c=h,c=Be()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*f0(c/1960))-c,10<c){n.timeoutHandle=ga(Wn.bind(null,n,mt,rn),c);break}Wn(n,mt,rn);break;case 5:Wn(n,mt,rn);break;default:throw Error(t(329))}}}return gt(n,Be()),n.callbackNode===a?th.bind(null,n):null}function cl(n,r){var a=Ss;return n.current.memoizedState.isDehydrated&&(Hn(n,r).flags|=256),n=Vi(n,r),n!==2&&(r=mt,mt=a,r!==null&&dl(r)),n}function dl(n){mt===null?mt=n:mt.push.apply(mt,n)}function p0(n){for(var r=n;;){if(r.flags&16384){var a=r.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var h=a[c],p=h.getSnapshot;h=h.value;try{if(!Lt(p(),h))return!1}catch{return!1}}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function bn(n,r){for(r&=~ol,r&=~Li,n.suspendedLanes|=r,n.pingedLanes&=~r,n=n.expirationTimes;0<r;){var a=31-Mt(r),c=1<<a;n[a]=-1,r&=~c}}function nh(n){if((ke&6)!==0)throw Error(t(327));Nr();var r=Ys(n,0);if((r&1)===0)return gt(n,Be()),null;var a=Vi(n,r);if(n.tag!==0&&a===2){var c=zo(n);c!==0&&(r=c,a=cl(n,c))}if(a===1)throw a=Es,Hn(n,0),bn(n,r),gt(n,Be()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=r,Wn(n,mt,rn),gt(n,Be()),null}function hl(n,r){var a=ke;ke|=1;try{return n(r)}finally{ke=a,ke===0&&(Tr=Be()+500,mi&&mn())}}function qn(n){xn!==null&&xn.tag===0&&(ke&6)===0&&Nr();var r=ke;ke|=1;var a=It.transition,c=Te;try{if(It.transition=null,Te=1,n)return n()}finally{Te=c,It.transition=a,ke=r,(ke&6)===0&&mn()}}function fl(){bt=Cr.current,Oe(Cr)}function Hn(n,r){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,qg(a)),He!==null)for(a=He.return;a!==null;){var c=a;switch(ba(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&fi();break;case 3:kr(),Oe(ht),Oe(st),Ma();break;case 5:ja(c);break;case 4:kr();break;case 13:Oe(Le);break;case 19:Oe(Le);break;case 10:Na(c.type._context);break;case 22:case 23:fl()}a=a.return}if(Xe=n,He=n=kn(n.current,null),tt=bt=r,Je=0,Es=null,ol=Li=zn=0,mt=Ss=null,Fn!==null){for(r=0;r<Fn.length;r++)if(a=Fn[r],c=a.interleaved,c!==null){a.interleaved=null;var h=c.next,p=a.pending;if(p!==null){var x=p.next;p.next=h,c.next=x}a.pending=c}Fn=null}return n}function rh(n,r){do{var a=He;try{if(Ta(),Si.current=Ri,Ci){for(var c=De.memoizedState;c!==null;){var h=c.queue;h!==null&&(h.pending=null),c=c.next}Ci=!1}if(Vn=0,Qe=Ke=De=null,ys=!1,ws=0,il.current=null,a===null||a.return===null){Je=1,Es=r,He=null;break}e:{var p=n,x=a.return,E=a,R=r;if(r=tt,E.flags|=32768,R!==null&&typeof R=="object"&&typeof R.then=="function"){var D=R,V=E,z=V.tag;if((V.mode&1)===0&&(z===0||z===11||z===15)){var B=V.alternate;B?(V.updateQueue=B.updateQueue,V.memoizedState=B.memoizedState,V.lanes=B.lanes):(V.updateQueue=null,V.memoizedState=null)}var Y=Nd(x);if(Y!==null){Y.flags&=-257,Rd(Y,x,E,p,r),Y.mode&1&&Td(p,D,r),r=Y,R=D;var ee=r.updateQueue;if(ee===null){var re=new Set;re.add(R),r.updateQueue=re}else ee.add(R);break e}else{if((r&1)===0){Td(p,D,r),pl();break e}R=Error(t(426))}}else if(Me&&E.mode&1){var Ve=Nd(x);if(Ve!==null){(Ve.flags&65536)===0&&(Ve.flags|=256),Rd(Ve,x,E,p,r),Sa(Er(R,E));break e}}p=R=Er(R,E),Je!==4&&(Je=2),Ss===null?Ss=[p]:Ss.push(p),p=x;do{switch(p.tag){case 3:p.flags|=65536,r&=-r,p.lanes|=r;var O=Sd(p,R,r);Xc(p,O);break e;case 1:E=R;var A=p.type,M=p.stateNode;if((p.flags&128)===0&&(typeof A.getDerivedStateFromError=="function"||M!==null&&typeof M.componentDidCatch=="function"&&(wn===null||!wn.has(M)))){p.flags|=65536,r&=-r,p.lanes|=r;var q=Cd(p,E,r);Xc(p,q);break e}}p=p.return}while(p!==null)}oh(a)}catch(ie){r=ie,He===a&&a!==null&&(He=a=a.return);continue}break}while(!0)}function sh(){var n=Mi.current;return Mi.current=Ri,n===null?Ri:n}function pl(){(Je===0||Je===3||Je===2)&&(Je=4),Xe===null||(zn&268435455)===0&&(Li&268435455)===0||bn(Xe,tt)}function Vi(n,r){var a=ke;ke|=2;var c=sh();(Xe!==n||tt!==r)&&(rn=null,Hn(n,r));do try{m0();break}catch(h){rh(n,h)}while(!0);if(Ta(),ke=a,Mi.current=c,He!==null)throw Error(t(261));return Xe=null,tt=0,Je}function m0(){for(;He!==null;)ih(He)}function g0(){for(;He!==null&&!Bm();)ih(He)}function ih(n){var r=uh(n.alternate,n,bt);n.memoizedProps=n.pendingProps,r===null?oh(n):He=r,il.current=null}function oh(n){var r=n;do{var a=r.alternate;if(n=r.return,(r.flags&32768)===0){if(a=l0(a,r,bt),a!==null){He=a;return}}else{if(a=u0(a,r),a!==null){a.flags&=32767,He=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Je=6,He=null;return}}if(r=r.sibling,r!==null){He=r;return}He=r=n}while(r!==null);Je===0&&(Je=5)}function Wn(n,r,a){var c=Te,h=It.transition;try{It.transition=null,Te=1,v0(n,r,a,c)}finally{It.transition=h,Te=c}return null}function v0(n,r,a,c){do Nr();while(xn!==null);if((ke&6)!==0)throw Error(t(327));a=n.finishedWork;var h=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var p=a.lanes|a.childLanes;if(Qm(n,p),n===Xe&&(He=Xe=null,tt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Ui||(Ui=!0,ch(Ws,function(){return Nr(),null})),p=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||p){p=It.transition,It.transition=null;var x=Te;Te=1;var E=ke;ke|=4,il.current=null,d0(n,a),Yd(a,n),Dg(pa),Zs=!!fa,pa=fa=null,n.current=a,h0(a),Vm(),ke=E,Te=x,It.transition=p}else n.current=a;if(Ui&&(Ui=!1,xn=n,$i=h),p=n.pendingLanes,p===0&&(wn=null),Hm(a.stateNode),gt(n,Be()),r!==null)for(c=n.onRecoverableError,a=0;a<r.length;a++)h=r[a],c(h.value,{componentStack:h.stack,digest:h.digest});if(Di)throw Di=!1,n=ll,ll=null,n;return($i&1)!==0&&n.tag!==0&&Nr(),p=n.pendingLanes,(p&1)!==0?n===ul?Cs++:(Cs=0,ul=n):Cs=0,mn(),null}function Nr(){if(xn!==null){var n=Ku($i),r=It.transition,a=Te;try{if(It.transition=null,Te=16>n?16:n,xn===null)var c=!1;else{if(n=xn,xn=null,$i=0,(ke&6)!==0)throw Error(t(331));var h=ke;for(ke|=4,Z=n.current;Z!==null;){var p=Z,x=p.child;if((Z.flags&16)!==0){var E=p.deletions;if(E!==null){for(var R=0;R<E.length;R++){var D=E[R];for(Z=D;Z!==null;){var V=Z;switch(V.tag){case 0:case 11:case 15:ks(8,V,p)}var z=V.child;if(z!==null)z.return=V,Z=z;else for(;Z!==null;){V=Z;var B=V.sibling,Y=V.return;if(Hd(V),V===D){Z=null;break}if(B!==null){B.return=Y,Z=B;break}Z=Y}}}var ee=p.alternate;if(ee!==null){var re=ee.child;if(re!==null){ee.child=null;do{var Ve=re.sibling;re.sibling=null,re=Ve}while(re!==null)}}Z=p}}if((p.subtreeFlags&2064)!==0&&x!==null)x.return=p,Z=x;else e:for(;Z!==null;){if(p=Z,(p.flags&2048)!==0)switch(p.tag){case 0:case 11:case 15:ks(9,p,p.return)}var O=p.sibling;if(O!==null){O.return=p.return,Z=O;break e}Z=p.return}}var A=n.current;for(Z=A;Z!==null;){x=Z;var M=x.child;if((x.subtreeFlags&2064)!==0&&M!==null)M.return=x,Z=M;else e:for(x=A;Z!==null;){if(E=Z,(E.flags&2048)!==0)try{switch(E.tag){case 0:case 11:case 15:Oi(9,E)}}catch(ie){$e(E,E.return,ie)}if(E===x){Z=null;break e}var q=E.sibling;if(q!==null){q.return=E.return,Z=q;break e}Z=E.return}}if(ke=h,mn(),Ht&&typeof Ht.onPostCommitFiberRoot=="function")try{Ht.onPostCommitFiberRoot(Gs,n)}catch{}c=!0}return c}finally{Te=a,It.transition=r}}return!1}function ah(n,r,a){r=Er(a,r),r=Sd(n,r,1),n=vn(n,r,1),r=ct(),n!==null&&(Yr(n,1,r),gt(n,r))}function $e(n,r,a){if(n.tag===3)ah(n,n,a);else for(;r!==null;){if(r.tag===3){ah(r,n,a);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(wn===null||!wn.has(c))){n=Er(a,n),n=Cd(r,n,1),r=vn(r,n,1),n=ct(),r!==null&&(Yr(r,1,n),gt(r,n));break}}r=r.return}}function y0(n,r,a){var c=n.pingCache;c!==null&&c.delete(r),r=ct(),n.pingedLanes|=n.suspendedLanes&a,Xe===n&&(tt&a)===a&&(Je===4||Je===3&&(tt&130023424)===tt&&500>Be()-al?Hn(n,0):ol|=a),gt(n,r)}function lh(n,r){r===0&&((n.mode&1)===0?r=1:(r=Js,Js<<=1,(Js&130023424)===0&&(Js=4194304)));var a=ct();n=en(n,r),n!==null&&(Yr(n,r,a),gt(n,a))}function w0(n){var r=n.memoizedState,a=0;r!==null&&(a=r.retryLane),lh(n,a)}function x0(n,r){var a=0;switch(n.tag){case 13:var c=n.stateNode,h=n.memoizedState;h!==null&&(a=h.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(r),lh(n,a)}var uh;uh=function(n,r,a){if(n!==null)if(n.memoizedProps!==r.pendingProps||ht.current)pt=!0;else{if((n.lanes&a)===0&&(r.flags&128)===0)return pt=!1,a0(n,r,a);pt=(n.flags&131072)!==0}else pt=!1,Me&&(r.flags&1048576)!==0&&Vc(r,vi,r.index);switch(r.lanes=0,r.tag){case 2:var c=r.type;Ii(n,r),n=r.pendingProps;var h=gr(r,st.current);br(r,a),h=Ua(null,r,c,n,h,a);var p=$a();return r.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,ft(c)?(p=!0,pi(r)):p=!1,r.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,Aa(r),h.updater=Pi,r.stateNode=h,h._reactInternals=r,Ha(r,c,n,a),r=Ja(null,r,c,!0,p,a)):(r.tag=0,Me&&p&&_a(r),ut(null,r,h,a),r=r.child),r;case 16:c=r.elementType;e:{switch(Ii(n,r),n=r.pendingProps,h=c._init,c=h(c._payload),r.type=c,h=r.tag=b0(c),n=Ut(c,n),h){case 0:r=Ka(null,r,c,n,a);break e;case 1:r=Md(null,r,c,n,a);break e;case 11:r=Pd(null,r,c,n,a);break e;case 14:r=Ad(null,r,c,Ut(c.type,n),a);break e}throw Error(t(306,c,""))}return r;case 0:return c=r.type,h=r.pendingProps,h=r.elementType===c?h:Ut(c,h),Ka(n,r,c,h,a);case 1:return c=r.type,h=r.pendingProps,h=r.elementType===c?h:Ut(c,h),Md(n,r,c,h,a);case 3:e:{if(Ld(r),n===null)throw Error(t(387));c=r.pendingProps,p=r.memoizedState,h=p.element,Qc(n,r),ki(r,c,null,a);var x=r.memoizedState;if(c=x.element,p.isDehydrated)if(p={element:c,isDehydrated:!1,cache:x.cache,pendingSuspenseBoundaries:x.pendingSuspenseBoundaries,transitions:x.transitions},r.updateQueue.baseState=p,r.memoizedState=p,r.flags&256){h=Er(Error(t(423)),r),r=Dd(n,r,c,a,h);break e}else if(c!==h){h=Er(Error(t(424)),r),r=Dd(n,r,c,a,h);break e}else for(_t=hn(r.stateNode.containerInfo.firstChild),xt=r,Me=!0,Dt=null,a=Jc(r,null,c,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(wr(),c===h){r=nn(n,r,a);break e}ut(n,r,c,a)}r=r.child}return r;case 5:return ed(r),n===null&&Ea(r),c=r.type,h=r.pendingProps,p=n!==null?n.memoizedProps:null,x=h.children,ma(c,h)?x=null:p!==null&&ma(c,p)&&(r.flags|=32),Od(n,r),ut(n,r,x,a),r.child;case 6:return n===null&&Ea(r),null;case 13:return Ud(n,r,a);case 4:return Ia(r,r.stateNode.containerInfo),c=r.pendingProps,n===null?r.child=xr(r,null,c,a):ut(n,r,c,a),r.child;case 11:return c=r.type,h=r.pendingProps,h=r.elementType===c?h:Ut(c,h),Pd(n,r,c,h,a);case 7:return ut(n,r,r.pendingProps,a),r.child;case 8:return ut(n,r,r.pendingProps.children,a),r.child;case 12:return ut(n,r,r.pendingProps.children,a),r.child;case 10:e:{if(c=r.type._context,h=r.pendingProps,p=r.memoizedProps,x=h.value,Pe(xi,c._currentValue),c._currentValue=x,p!==null)if(Lt(p.value,x)){if(p.children===h.children&&!ht.current){r=nn(n,r,a);break e}}else for(p=r.child,p!==null&&(p.return=r);p!==null;){var E=p.dependencies;if(E!==null){x=p.child;for(var R=E.firstContext;R!==null;){if(R.context===c){if(p.tag===1){R=tn(-1,a&-a),R.tag=2;var D=p.updateQueue;if(D!==null){D=D.shared;var V=D.pending;V===null?R.next=R:(R.next=V.next,V.next=R),D.pending=R}}p.lanes|=a,R=p.alternate,R!==null&&(R.lanes|=a),Ra(p.return,a,r),E.lanes|=a;break}R=R.next}}else if(p.tag===10)x=p.type===r.type?null:p.child;else if(p.tag===18){if(x=p.return,x===null)throw Error(t(341));x.lanes|=a,E=x.alternate,E!==null&&(E.lanes|=a),Ra(x,a,r),x=p.sibling}else x=p.child;if(x!==null)x.return=p;else for(x=p;x!==null;){if(x===r){x=null;break}if(p=x.sibling,p!==null){p.return=x.return,x=p;break}x=x.return}p=x}ut(n,r,h.children,a),r=r.child}return r;case 9:return h=r.type,c=r.pendingProps.children,br(r,a),h=Pt(h),c=c(h),r.flags|=1,ut(n,r,c,a),r.child;case 14:return c=r.type,h=Ut(c,r.pendingProps),h=Ut(c.type,h),Ad(n,r,c,h,a);case 15:return Id(n,r,r.type,r.pendingProps,a);case 17:return c=r.type,h=r.pendingProps,h=r.elementType===c?h:Ut(c,h),Ii(n,r),r.tag=1,ft(c)?(n=!0,pi(r)):n=!1,br(r,a),kd(r,c,h),Ha(r,c,h,a),Ja(null,r,c,!0,n,a);case 19:return Fd(n,r,a);case 22:return jd(n,r,a)}throw Error(t(156,r.tag))};function ch(n,r){return zu(n,r)}function _0(n,r,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jt(n,r,a,c){return new _0(n,r,a,c)}function ml(n){return n=n.prototype,!(!n||!n.isReactComponent)}function b0(n){if(typeof n=="function")return ml(n)?1:0;if(n!=null){if(n=n.$$typeof,n===ge)return 11;if(n===rt)return 14}return 2}function kn(n,r){var a=n.alternate;return a===null?(a=jt(n.tag,r,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=r,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,r=n.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function zi(n,r,a,c,h,p){var x=2;if(c=n,typeof n=="function")ml(n)&&(x=1);else if(typeof n=="string")x=5;else e:switch(n){case Q:return Gn(a.children,h,p,r);case se:x=8,h|=8;break;case ve:return n=jt(12,a,r,h|2),n.elementType=ve,n.lanes=p,n;case Ee:return n=jt(13,a,r,h),n.elementType=Ee,n.lanes=p,n;case qe:return n=jt(19,a,r,h),n.elementType=qe,n.lanes=p,n;case Ie:return qi(a,h,p,r);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case G:x=10;break e;case Ce:x=9;break e;case ge:x=11;break e;case rt:x=14;break e;case Ge:x=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return r=jt(x,a,r,h),r.elementType=n,r.type=c,r.lanes=p,r}function Gn(n,r,a,c){return n=jt(7,n,c,r),n.lanes=a,n}function qi(n,r,a,c){return n=jt(22,n,c,r),n.elementType=Ie,n.lanes=a,n.stateNode={isHidden:!1},n}function gl(n,r,a){return n=jt(6,n,null,r),n.lanes=a,n}function vl(n,r,a){return r=jt(4,n.children!==null?n.children:[],n.key,r),r.lanes=a,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}function k0(n,r,a,c,h){this.tag=r,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=qo(0),this.expirationTimes=qo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qo(0),this.identifierPrefix=c,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function yl(n,r,a,c,h,p,x,E,R){return n=new k0(n,r,a,E,R),r===1?(r=1,p===!0&&(r|=8)):r=0,p=jt(3,null,null,r),n.current=p,p.stateNode=n,p.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Aa(p),n}function E0(n,r,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:H,key:c==null?null:""+c,children:n,containerInfo:r,implementation:a}}function dh(n){if(!n)return pn;n=n._reactInternals;e:{if(Mn(n)!==n||n.tag!==1)throw Error(t(170));var r=n;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(ft(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(ft(a))return $c(n,a,r)}return r}function hh(n,r,a,c,h,p,x,E,R){return n=yl(a,c,!0,n,h,p,x,E,R),n.context=dh(null),a=n.current,c=ct(),h=_n(a),p=tn(c,h),p.callback=r??null,vn(a,p,h),n.current.lanes=h,Yr(n,h,c),gt(n,c),n}function Hi(n,r,a,c){var h=r.current,p=ct(),x=_n(h);return a=dh(a),r.context===null?r.context=a:r.pendingContext=a,r=tn(p,x),r.payload={element:n},c=c===void 0?null:c,c!==null&&(r.callback=c),n=vn(h,r,x),n!==null&&(Bt(n,h,x,p),bi(n,h,x)),x}function Wi(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function fh(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<r?a:r}}function wl(n,r){fh(n,r),(n=n.alternate)&&fh(n,r)}function S0(){return null}var ph=typeof reportError=="function"?reportError:function(n){console.error(n)};function xl(n){this._internalRoot=n}Gi.prototype.render=xl.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(t(409));Hi(n,r,null,null)},Gi.prototype.unmount=xl.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;qn(function(){Hi(null,n,null,null)}),r[Yt]=null}};function Gi(n){this._internalRoot=n}Gi.prototype.unstable_scheduleHydration=function(n){if(n){var r=Qu();n={blockedOn:null,target:n,priority:r};for(var a=0;a<un.length&&r!==0&&r<un[a].priority;a++);un.splice(a,0,n),a===0&&ec(n)}};function _l(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Ki(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function mh(){}function C0(n,r,a,c,h){if(h){if(typeof c=="function"){var p=c;c=function(){var D=Wi(x);p.call(D)}}var x=hh(r,c,n,0,null,!1,!1,"",mh);return n._reactRootContainer=x,n[Yt]=x.current,cs(n.nodeType===8?n.parentNode:n),qn(),x}for(;h=n.lastChild;)n.removeChild(h);if(typeof c=="function"){var E=c;c=function(){var D=Wi(R);E.call(D)}}var R=yl(n,0,!1,null,null,!1,!1,"",mh);return n._reactRootContainer=R,n[Yt]=R.current,cs(n.nodeType===8?n.parentNode:n),qn(function(){Hi(r,R,a,c)}),R}function Ji(n,r,a,c,h){var p=a._reactRootContainer;if(p){var x=p;if(typeof h=="function"){var E=h;h=function(){var R=Wi(x);E.call(R)}}Hi(r,x,n,h)}else x=C0(a,r,n,h,c);return Wi(x)}Ju=function(n){switch(n.tag){case 3:var r=n.stateNode;if(r.current.memoizedState.isDehydrated){var a=Jr(r.pendingLanes);a!==0&&(Ho(r,a|1),gt(r,Be()),(ke&6)===0&&(Tr=Be()+500,mn()))}break;case 13:qn(function(){var c=en(n,1);if(c!==null){var h=ct();Bt(c,n,1,h)}}),wl(n,1)}},Wo=function(n){if(n.tag===13){var r=en(n,134217728);if(r!==null){var a=ct();Bt(r,n,134217728,a)}wl(n,134217728)}},Yu=function(n){if(n.tag===13){var r=_n(n),a=en(n,r);if(a!==null){var c=ct();Bt(a,n,r,c)}wl(n,r)}},Qu=function(){return Te},Xu=function(n,r){var a=Te;try{return Te=n,r()}finally{Te=a}},Uo=function(n,r,a){switch(r){case"input":if(Po(n,a),r=a.name,a.type==="radio"&&r!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<a.length;r++){var c=a[r];if(c!==n&&c.form===n.form){var h=hi(c);if(!h)throw Error(t(90));be(c),Po(c,h)}}}break;case"textarea":Tu(n,a);break;case"select":r=a.value,r!=null&&sr(n,!!a.multiple,r,!1)}},Lu=hl,Du=qn;var T0={usingClientEntryPoint:!1,Events:[fs,pr,hi,Ou,Mu,hl]},Ts={findFiberByHostInstance:Ln,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},N0={bundleType:Ts.bundleType,version:Ts.version,rendererPackageName:Ts.rendererPackageName,rendererConfig:Ts.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:L.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Bu(n),n===null?null:n.stateNode},findFiberByHostInstance:Ts.findFiberByHostInstance||S0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yi.isDisabled&&Yi.supportsFiber)try{Gs=Yi.inject(N0),Ht=Yi}catch{}}return vt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=T0,vt.createPortal=function(n,r){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_l(r))throw Error(t(200));return E0(n,r,null,a)},vt.createRoot=function(n,r){if(!_l(n))throw Error(t(299));var a=!1,c="",h=ph;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onRecoverableError!==void 0&&(h=r.onRecoverableError)),r=yl(n,1,!1,null,null,a,!1,c,h),n[Yt]=r.current,cs(n.nodeType===8?n.parentNode:n),new xl(r)},vt.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=Bu(r),n=n===null?null:n.stateNode,n},vt.flushSync=function(n){return qn(n)},vt.hydrate=function(n,r,a){if(!Ki(r))throw Error(t(200));return Ji(null,n,r,!0,a)},vt.hydrateRoot=function(n,r,a){if(!_l(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,h=!1,p="",x=ph;if(a!=null&&(a.unstable_strictMode===!0&&(h=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onRecoverableError!==void 0&&(x=a.onRecoverableError)),r=hh(r,null,n,1,a??null,h,!1,p,x),n[Yt]=r.current,cs(n),c)for(n=0;n<c.length;n++)a=c[n],h=a._getVersion,h=h(a._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[a,h]:r.mutableSourceEagerHydrationData.push(a,h);return new Gi(r)},vt.render=function(n,r,a){if(!Ki(r))throw Error(t(200));return Ji(null,n,r,!1,a)},vt.unmountComponentAtNode=function(n){if(!Ki(n))throw Error(t(40));return n._reactRootContainer?(qn(function(){Ji(null,null,n,!1,function(){n._reactRootContainer=null,n[Yt]=null})}),!0):!1},vt.unstable_batchedUpdates=hl,vt.unstable_renderSubtreeIntoContainer=function(n,r,a,c){if(!Ki(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Ji(n,r,a,!1,c)},vt.version="18.3.1-next-f1338f8080-20240426",vt}var kh;function ip(){if(kh)return El.exports;kh=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),El.exports=D0(),El.exports}var Eh;function U0(){if(Eh)return Qi;Eh=1;var i=ip();return Qi.createRoot=i.createRoot,Qi.hydrateRoot=i.hydrateRoot,Qi}var $0=U0();const F0=ou($0);ip();function js(){return js=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(i[s]=t[s])}return i},js.apply(this,arguments)}var Nn;(function(i){i.Pop="POP",i.Push="PUSH",i.Replace="REPLACE"})(Nn||(Nn={}));const Sh="popstate";function B0(i){i===void 0&&(i={});function e(o,l){let{pathname:u="/",search:d="",hash:f=""}=tr(o.location.hash.substr(1));return!u.startsWith("/")&&!u.startsWith(".")&&(u="/"+u),Ul("",{pathname:u,search:d,hash:f},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(o,l){let u=o.document.querySelector("base"),d="";if(u&&u.getAttribute("href")){let f=o.location.href,g=f.indexOf("#");d=g===-1?f:f.slice(0,g)}return d+"#"+(typeof l=="string"?l:go(l))}function s(o,l){Co(o.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(l)+")")}return z0(e,t,s,i)}function ze(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function Co(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function V0(){return Math.random().toString(36).substr(2,8)}function Ch(i,e){return{usr:i.state,key:i.key,idx:e}}function Ul(i,e,t,s){return t===void 0&&(t=null),js({pathname:typeof i=="string"?i:i.pathname,search:"",hash:""},typeof e=="string"?tr(e):e,{state:t,key:e&&e.key||s||V0()})}function go(i){let{pathname:e="/",search:t="",hash:s=""}=i;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function tr(i){let e={};if(i){let t=i.indexOf("#");t>=0&&(e.hash=i.substr(t),i=i.substr(0,t));let s=i.indexOf("?");s>=0&&(e.search=i.substr(s),i=i.substr(0,s)),i&&(e.pathname=i)}return e}function z0(i,e,t,s){s===void 0&&(s={});let{window:o=document.defaultView,v5Compat:l=!1}=s,u=o.history,d=Nn.Pop,f=null,g=w();g==null&&(g=0,u.replaceState(js({},u.state,{idx:g}),""));function w(){return(u.state||{idx:null}).idx}function _(){d=Nn.Pop;let C=w(),I=C==null?null:C-g;g=C,f&&f({action:d,location:N.location,delta:I})}function b(C,I){d=Nn.Push;let S=Ul(N.location,C,I);t&&t(S,C),g=w()+1;let P=Ch(S,g),L=N.createHref(S);try{u.pushState(P,"",L)}catch(W){if(W instanceof DOMException&&W.name==="DataCloneError")throw W;o.location.assign(L)}l&&f&&f({action:d,location:N.location,delta:1})}function k(C,I){d=Nn.Replace;let S=Ul(N.location,C,I);t&&t(S,C),g=w();let P=Ch(S,g),L=N.createHref(S);u.replaceState(P,"",L),l&&f&&f({action:d,location:N.location,delta:0})}function T(C){let I=o.location.origin!=="null"?o.location.origin:o.location.href,S=typeof C=="string"?C:go(C);return S=S.replace(/ $/,"%20"),ze(I,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,I)}let N={get action(){return d},get location(){return i(o,u)},listen(C){if(f)throw new Error("A history only accepts one active listener");return o.addEventListener(Sh,_),f=C,()=>{o.removeEventListener(Sh,_),f=null}},createHref(C){return e(o,C)},createURL:T,encodeLocation(C){let I=T(C);return{pathname:I.pathname,search:I.search,hash:I.hash}},push:b,replace:k,go(C){return u.go(C)}};return N}var Th;(function(i){i.data="data",i.deferred="deferred",i.redirect="redirect",i.error="error"})(Th||(Th={}));function q0(i,e,t){return t===void 0&&(t="/"),H0(i,e,t)}function H0(i,e,t,s){let o=typeof e=="string"?tr(e):e,l=lu(o.pathname||"/",t);if(l==null)return null;let u=op(i);W0(u);let d=null;for(let f=0;d==null&&f<u.length;++f){let g=sv(l);d=tv(u[f],g)}return d}function op(i,e,t,s){e===void 0&&(e=[]),t===void 0&&(t=[]),s===void 0&&(s="");let o=(l,u,d)=>{let f={relativePath:d===void 0?l.path||"":d,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};f.relativePath.startsWith("/")&&(ze(f.relativePath.startsWith(s),'Absolute route path "'+f.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),f.relativePath=f.relativePath.slice(s.length));let g=Pn([s,f.relativePath]),w=t.concat(f);l.children&&l.children.length>0&&(ze(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+g+'".')),op(l.children,e,w,g)),!(l.path==null&&!l.index)&&e.push({path:g,score:Z0(g,l.index),routesMeta:w})};return i.forEach((l,u)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))o(l,u);else for(let f of ap(l.path))o(l,u,f)}),e}function ap(i){let e=i.split("/");if(e.length===0)return[];let[t,...s]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(s.length===0)return o?[l,""]:[l];let u=ap(s.join("/")),d=[];return d.push(...u.map(f=>f===""?l:[l,f].join("/"))),o&&d.push(...u),d.map(f=>i.startsWith("/")&&f===""?"/":f)}function W0(i){i.sort((e,t)=>e.score!==t.score?t.score-e.score:ev(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}const G0=/^:[\w-]+$/,K0=3,J0=2,Y0=1,Q0=10,X0=-2,Nh=i=>i==="*";function Z0(i,e){let t=i.split("/"),s=t.length;return t.some(Nh)&&(s+=X0),e&&(s+=J0),t.filter(o=>!Nh(o)).reduce((o,l)=>o+(G0.test(l)?K0:l===""?Y0:Q0),s)}function ev(i,e){return i.length===e.length&&i.slice(0,-1).every((s,o)=>s===e[o])?i[i.length-1]-e[e.length-1]:0}function tv(i,e,t){let{routesMeta:s}=i,o={},l="/",u=[];for(let d=0;d<s.length;++d){let f=s[d],g=d===s.length-1,w=l==="/"?e:e.slice(l.length)||"/",_=nv({path:f.relativePath,caseSensitive:f.caseSensitive,end:g},w),b=f.route;if(!_)return null;Object.assign(o,_.params),u.push({params:o,pathname:Pn([l,_.pathname]),pathnameBase:uv(Pn([l,_.pathnameBase])),route:b}),_.pathnameBase!=="/"&&(l=Pn([l,_.pathnameBase]))}return u}function nv(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[t,s]=rv(i.path,i.caseSensitive,i.end),o=e.match(t);if(!o)return null;let l=o[0],u=l.replace(/(.)\/+$/,"$1"),d=o.slice(1);return{params:s.reduce((g,w,_)=>{let{paramName:b,isOptional:k}=w;if(b==="*"){let N=d[_]||"";u=l.slice(0,l.length-N.length).replace(/(.)\/+$/,"$1")}const T=d[_];return k&&!T?g[b]=void 0:g[b]=(T||"").replace(/%2F/g,"/"),g},{}),pathname:l,pathnameBase:u,pattern:i}}function rv(i,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Co(i==="*"||!i.endsWith("*")||i.endsWith("/*"),'Route path "'+i+'" will be treated as if it were '+('"'+i.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+i.replace(/\*$/,"/*")+'".'));let s=[],o="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,d,f)=>(s.push({paramName:d,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(s.push({paramName:"*"}),o+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":i!==""&&i!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function sv(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Co(!1,'The URL path "'+i+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),i}}function lu(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=i.charAt(t);return s&&s!=="/"?null:i.slice(t)||"/"}const iv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ov=i=>iv.test(i);function av(i,e){e===void 0&&(e="/");let{pathname:t,search:s="",hash:o=""}=typeof i=="string"?tr(i):i,l;if(t)if(ov(t))l=t;else{if(t.includes("//")){let u=t;t=t.replace(/\/\/+/g,"/"),Co(!1,"Pathnames cannot have embedded double slashes - normalizing "+(u+" -> "+t))}t.startsWith("/")?l=Rh(t.substring(1),"/"):l=Rh(t,e)}else l=e;return{pathname:l,search:cv(s),hash:dv(o)}}function Rh(i,e){let t=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Tl(i,e,t,s){return"Cannot include a '"+i+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function lv(i){return i.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function uu(i,e){let t=lv(i);return e?t.map((s,o)=>o===t.length-1?s.pathname:s.pathnameBase):t.map(s=>s.pathnameBase)}function cu(i,e,t,s){s===void 0&&(s=!1);let o;typeof i=="string"?o=tr(i):(o=js({},i),ze(!o.pathname||!o.pathname.includes("?"),Tl("?","pathname","search",o)),ze(!o.pathname||!o.pathname.includes("#"),Tl("#","pathname","hash",o)),ze(!o.search||!o.search.includes("#"),Tl("#","search","hash",o)));let l=i===""||o.pathname==="",u=l?"/":o.pathname,d;if(u==null)d=t;else{let _=e.length-1;if(!s&&u.startsWith("..")){let b=u.split("/");for(;b[0]==="..";)b.shift(),_-=1;o.pathname=b.join("/")}d=_>=0?e[_]:"/"}let f=av(o,d),g=u&&u!=="/"&&u.endsWith("/"),w=(l||u===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(g||w)&&(f.pathname+="/"),f}const Pn=i=>i.join("/").replace(/\/\/+/g,"/"),uv=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),cv=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,dv=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function hv(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}const lp=["post","put","patch","delete"];new Set(lp);const fv=["get",...lp];new Set(fv);function Os(){return Os=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(i[s]=t[s])}return i},Os.apply(this,arguments)}const du=U.createContext(null),pv=U.createContext(null),An=U.createContext(null),To=U.createContext(null),In=U.createContext({outlet:null,matches:[],isDataRoute:!1}),up=U.createContext(null);function mv(i,e){let{relative:t}=e===void 0?{}:e;$r()||ze(!1);let{basename:s,navigator:o}=U.useContext(An),{hash:l,pathname:u,search:d}=hp(i,{relative:t}),f=u;return s!=="/"&&(f=u==="/"?s:Pn([s,u])),o.createHref({pathname:f,search:d,hash:l})}function $r(){return U.useContext(To)!=null}function Fr(){return $r()||ze(!1),U.useContext(To).location}function cp(i){U.useContext(An).static||U.useLayoutEffect(i)}function dp(){let{isDataRoute:i}=U.useContext(In);return i?Nv():gv()}function gv(){$r()||ze(!1);let i=U.useContext(du),{basename:e,future:t,navigator:s}=U.useContext(An),{matches:o}=U.useContext(In),{pathname:l}=Fr(),u=JSON.stringify(uu(o,t.v7_relativeSplatPath)),d=U.useRef(!1);return cp(()=>{d.current=!0}),U.useCallback(function(g,w){if(w===void 0&&(w={}),!d.current)return;if(typeof g=="number"){s.go(g);return}let _=cu(g,JSON.parse(u),l,w.relative==="path");i==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:Pn([e,_.pathname])),(w.replace?s.replace:s.push)(_,w.state,w)},[e,s,u,l,i])}function hp(i,e){let{relative:t}=e===void 0?{}:e,{future:s}=U.useContext(An),{matches:o}=U.useContext(In),{pathname:l}=Fr(),u=JSON.stringify(uu(o,s.v7_relativeSplatPath));return U.useMemo(()=>cu(i,JSON.parse(u),l,t==="path"),[i,u,l,t])}function vv(i,e){return yv(i,e)}function yv(i,e,t,s){$r()||ze(!1);let{navigator:o}=U.useContext(An),{matches:l}=U.useContext(In),u=l[l.length-1],d=u?u.params:{};u&&u.pathname;let f=u?u.pathnameBase:"/";u&&u.route;let g=Fr(),w;if(e){var _;let C=typeof e=="string"?tr(e):e;f==="/"||(_=C.pathname)!=null&&_.startsWith(f)||ze(!1),w=C}else w=g;let b=w.pathname||"/",k=b;if(f!=="/"){let C=f.replace(/^\//,"").split("/");k="/"+b.replace(/^\//,"").split("/").slice(C.length).join("/")}let T=q0(i,{pathname:k}),N=kv(T&&T.map(C=>Object.assign({},C,{params:Object.assign({},d,C.params),pathname:Pn([f,o.encodeLocation?o.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?f:Pn([f,o.encodeLocation?o.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),l,t,s);return e&&N?U.createElement(To.Provider,{value:{location:Os({pathname:"/",search:"",hash:"",state:null,key:"default"},w),navigationType:Nn.Pop}},N):N}function wv(){let i=Tv(),e=hv(i)?i.status+" "+i.statusText:i instanceof Error?i.message:JSON.stringify(i),t=i instanceof Error?i.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return U.createElement(U.Fragment,null,U.createElement("h2",null,"Unexpected Application Error!"),U.createElement("h3",{style:{fontStyle:"italic"}},e),t?U.createElement("pre",{style:o},t):null,null)}const xv=U.createElement(wv,null);class _v extends U.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?U.createElement(In.Provider,{value:this.props.routeContext},U.createElement(up.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function bv(i){let{routeContext:e,match:t,children:s}=i,o=U.useContext(du);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),U.createElement(In.Provider,{value:e},s)}function kv(i,e,t,s){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),s===void 0&&(s=null),i==null){var l;if(!t)return null;if(t.errors)i=t.matches;else if((l=s)!=null&&l.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)i=t.matches;else return null}let u=i,d=(o=t)==null?void 0:o.errors;if(d!=null){let w=u.findIndex(_=>_.route.id&&d?.[_.route.id]!==void 0);w>=0||ze(!1),u=u.slice(0,Math.min(u.length,w+1))}let f=!1,g=-1;if(t&&s&&s.v7_partialHydration)for(let w=0;w<u.length;w++){let _=u[w];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(g=w),_.route.id){let{loaderData:b,errors:k}=t,T=_.route.loader&&b[_.route.id]===void 0&&(!k||k[_.route.id]===void 0);if(_.route.lazy||T){f=!0,g>=0?u=u.slice(0,g+1):u=[u[0]];break}}}return u.reduceRight((w,_,b)=>{let k,T=!1,N=null,C=null;t&&(k=d&&_.route.id?d[_.route.id]:void 0,N=_.route.errorElement||xv,f&&(g<0&&b===0?(Rv("route-fallback"),T=!0,C=null):g===b&&(T=!0,C=_.route.hydrateFallbackElement||null)));let I=e.concat(u.slice(0,b+1)),S=()=>{let P;return k?P=N:T?P=C:_.route.Component?P=U.createElement(_.route.Component,null):_.route.element?P=_.route.element:P=w,U.createElement(bv,{match:_,routeContext:{outlet:w,matches:I,isDataRoute:t!=null},children:P})};return t&&(_.route.ErrorBoundary||_.route.errorElement||b===0)?U.createElement(_v,{location:t.location,revalidation:t.revalidation,component:N,error:k,children:S(),routeContext:{outlet:null,matches:I,isDataRoute:!0}}):S()},null)}var fp=(function(i){return i.UseBlocker="useBlocker",i.UseRevalidator="useRevalidator",i.UseNavigateStable="useNavigate",i})(fp||{}),pp=(function(i){return i.UseBlocker="useBlocker",i.UseLoaderData="useLoaderData",i.UseActionData="useActionData",i.UseRouteError="useRouteError",i.UseNavigation="useNavigation",i.UseRouteLoaderData="useRouteLoaderData",i.UseMatches="useMatches",i.UseRevalidator="useRevalidator",i.UseNavigateStable="useNavigate",i.UseRouteId="useRouteId",i})(pp||{});function Ev(i){let e=U.useContext(du);return e||ze(!1),e}function Sv(i){let e=U.useContext(pv);return e||ze(!1),e}function Cv(i){let e=U.useContext(In);return e||ze(!1),e}function mp(i){let e=Cv(),t=e.matches[e.matches.length-1];return t.route.id||ze(!1),t.route.id}function Tv(){var i;let e=U.useContext(up),t=Sv(),s=mp();return e!==void 0?e:(i=t.errors)==null?void 0:i[s]}function Nv(){let{router:i}=Ev(fp.UseNavigateStable),e=mp(pp.UseNavigateStable),t=U.useRef(!1);return cp(()=>{t.current=!0}),U.useCallback(function(o,l){l===void 0&&(l={}),t.current&&(typeof o=="number"?i.navigate(o):i.navigate(o,Os({fromRouteId:e},l)))},[i,e])}const Ph={};function Rv(i,e,t){Ph[i]||(Ph[i]=!0)}function Pv(i,e){i?.v7_startTransition,i?.v7_relativeSplatPath}function Av(i){let{to:e,replace:t,state:s,relative:o}=i;$r()||ze(!1);let{future:l,static:u}=U.useContext(An),{matches:d}=U.useContext(In),{pathname:f}=Fr(),g=dp(),w=cu(e,uu(d,l.v7_relativeSplatPath),f,o==="path"),_=JSON.stringify(w);return U.useEffect(()=>g(JSON.parse(_),{replace:t,state:s,relative:o}),[g,_,o,t,s]),null}function Cn(i){ze(!1)}function Iv(i){let{basename:e="/",children:t=null,location:s,navigationType:o=Nn.Pop,navigator:l,static:u=!1,future:d}=i;$r()&&ze(!1);let f=e.replace(/^\/*/,"/"),g=U.useMemo(()=>({basename:f,navigator:l,static:u,future:Os({v7_relativeSplatPath:!1},d)}),[f,d,l,u]);typeof s=="string"&&(s=tr(s));let{pathname:w="/",search:_="",hash:b="",state:k=null,key:T="default"}=s,N=U.useMemo(()=>{let C=lu(w,f);return C==null?null:{location:{pathname:C,search:_,hash:b,state:k,key:T},navigationType:o}},[f,w,_,b,k,T,o]);return N==null?null:U.createElement(An.Provider,{value:g},U.createElement(To.Provider,{children:t,value:N}))}function jv(i){let{children:e,location:t}=i;return vv($l(e),t)}new Promise(()=>{});function $l(i,e){e===void 0&&(e=[]);let t=[];return U.Children.forEach(i,(s,o)=>{if(!U.isValidElement(s))return;let l=[...e,o];if(s.type===U.Fragment){t.push.apply(t,$l(s.props.children,l));return}s.type!==Cn&&ze(!1),!s.props.index||!s.props.children||ze(!1);let u={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(u.children=$l(s.props.children,l)),t.push(u)}),t}function Fl(){return Fl=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(i[s]=t[s])}return i},Fl.apply(this,arguments)}function Ov(i,e){if(i==null)return{};var t={},s=Object.keys(i),o,l;for(l=0;l<s.length;l++)o=s[l],!(e.indexOf(o)>=0)&&(t[o]=i[o]);return t}function Mv(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function Lv(i,e){return i.button===0&&(!e||e==="_self")&&!Mv(i)}const Dv=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Uv="6";try{window.__reactRouterVersion=Uv}catch{}const $v="startTransition",Ah=O0[$v];function Fv(i){let{basename:e,children:t,future:s,window:o}=i,l=U.useRef();l.current==null&&(l.current=B0({window:o,v5Compat:!0}));let u=l.current,[d,f]=U.useState({action:u.action,location:u.location}),{v7_startTransition:g}=s||{},w=U.useCallback(_=>{g&&Ah?Ah(()=>f(_)):f(_)},[f,g]);return U.useLayoutEffect(()=>u.listen(w),[u,w]),U.useEffect(()=>Pv(s),[s]),U.createElement(Iv,{basename:e,children:t,location:d.location,navigationType:d.action,navigator:u,future:s})}const Bv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Vv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Rn=U.forwardRef(function(e,t){let{onClick:s,relative:o,reloadDocument:l,replace:u,state:d,target:f,to:g,preventScrollReset:w,viewTransition:_}=e,b=Ov(e,Dv),{basename:k}=U.useContext(An),T,N=!1;if(typeof g=="string"&&Vv.test(g)&&(T=g,Bv))try{let P=new URL(window.location.href),L=g.startsWith("//")?new URL(P.protocol+g):new URL(g),W=lu(L.pathname,k);L.origin===P.origin&&W!=null?g=W+L.search+L.hash:N=!0}catch{}let C=mv(g,{relative:o}),I=zv(g,{replace:u,state:d,target:f,preventScrollReset:w,relative:o,viewTransition:_});function S(P){s&&s(P),P.defaultPrevented||I(P)}return U.createElement("a",Fl({},b,{href:T||C,onClick:N||l?s:S,ref:t,target:f}))});var Ih;(function(i){i.UseScrollRestoration="useScrollRestoration",i.UseSubmit="useSubmit",i.UseSubmitFetcher="useSubmitFetcher",i.UseFetcher="useFetcher",i.useViewTransitionState="useViewTransitionState"})(Ih||(Ih={}));var jh;(function(i){i.UseFetcher="useFetcher",i.UseFetchers="useFetchers",i.UseScrollRestoration="useScrollRestoration"})(jh||(jh={}));function zv(i,e){let{target:t,replace:s,state:o,preventScrollReset:l,relative:u,viewTransition:d}=e===void 0?{}:e,f=dp(),g=Fr(),w=hp(i,{relative:u});return U.useCallback(_=>{if(Lv(_,t)){_.preventDefault();let b=s!==void 0?s:go(g)===go(w);f(i,{replace:b,state:o,preventScrollReset:l,relative:u,viewTransition:d})}},[g,f,w,s,o,t,i,l,u,d])}var qv={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Hv=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),me=(i,e)=>{const t=U.forwardRef(({color:s="currentColor",size:o=24,strokeWidth:l=2,absoluteStrokeWidth:u,className:d="",children:f,...g},w)=>U.createElement("svg",{ref:w,...qv,width:o,height:o,stroke:s,strokeWidth:u?Number(l)*24/Number(o):l,className:["lucide",`lucide-${Hv(i)}`,d].join(" "),...g},[...e.map(([_,b])=>U.createElement(_,b)),...Array.isArray(f)?f:[f]]));return t.displayName=`${i}`,t};const Wv=me("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);const gp=me("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);const vp=me("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const Oh=me("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);const yp=me("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]);const Gv=me("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);const vo=me("BrainCircuit",[["path",{d:"M12 4.5a2.5 2.5 0 0 0-4.96-.46 2.5 2.5 0 0 0-1.98 3 2.5 2.5 0 0 0-1.32 4.24 3 3 0 0 0 .34 5.58 2.5 2.5 0 0 0 2.96 3.08 2.5 2.5 0 0 0 4.91.05L12 20V4.5Z",key:"ixwj2a"}],["path",{d:"M16 8V5c0-1.1.9-2 2-2",key:"13dx7u"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M20.5 8a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0Z",key:"1s25gz"}],["path",{d:"M16.5 13a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0Z",key:"127460"}],["path",{d:"M20.5 21a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0Z",key:"fys062"}],["path",{d:"M18.5 3a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0Z",key:"1vib61"}]]);const wp=me("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);const Kv=me("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);const Bl=me("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const Jv=me("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);const Yv=me("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);const Qv=me("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]);const Xv=me("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);const xp=me("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]]);const Zv=me("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);const ey=me("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);const ty=me("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);const ny=me("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);const ry=me("HeartPulse",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M3.22 12H9.5l.5-1 2 4.5 2-7 1.5 3.5h5.27",key:"1uw2ng"}]]);const Mh=me("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);const sy=me("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);const Ms=me("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);const iy=me("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);const oy=me("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);const Nl=me("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]);const Xi=me("MinusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}]]);const _p=me("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);const bp=me("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);const ay=me("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);const Zi=me("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);const ly=me("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const kp=me("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);const uy=me("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);const Vl=me("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);const cy=me("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const zl=me("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);const dy=me("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);const ql=me("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);const ho=me("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const yo=me("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);const hy=me("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]);const Ls=me("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),fy=({children:i,onLogout:e,user:t,logoUrl:s,toggleTheme:o,currentTheme:l})=>{const d=Fr().pathname,f=({to:g,icon:w,label:_})=>{const b=d===g;return y.jsxs(Rn,{to:g,className:`relative flex flex-col items-center justify-center w-full h-full transition-all duration-500 ${b?"text-blue-600 dark:text-blue-400 -translate-y-2":"text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200"}`,children:[y.jsx("div",{className:`p-3 rounded-2xl transition-all duration-500 ${b?"bg-blue-500/20 dark:bg-white/10 shadow-[0_0_20px_rgba(59,130,246,0.4)] backdrop-blur-xl border border-white/10":"hover:bg-white/5"}`,children:y.jsx(w,{className:`w-6 h-6 transition-transform duration-300 ${b?"scale-110":""}`,strokeWidth:b?2.5:2})}),y.jsx("span",{className:`text-[10px] font-bold mt-1.5 transition-all duration-300 absolute -bottom-4 whitespace-nowrap ${b?"opacity-100 translate-y-0":"opacity-0 -translate-y-2"}`,children:_})]})};return y.jsxs("div",{className:"min-h-screen font-sans selection:bg-blue-500/30 relative transition-colors duration-700",children:[y.jsx("div",{className:"fixed top-0 left-0 right-0 h-32 mask-gradient-top z-30 pointer-events-none transition-all duration-500"}),y.jsx("div",{className:"fixed top-0 left-0 right-0 z-40 p-4 sm:p-6 pointer-events-none",children:y.jsxs("header",{className:"max-w-5xl mx-auto glass-heavy rounded-full px-2 pl-3 py-2 sm:px-6 sm:py-3 shadow-2xl pointer-events-auto flex justify-between items-center transition-all duration-500 border-white/20 dark:border-white/10",children:[y.jsxs(Rn,{to:"/",className:"flex items-center gap-3 group",children:[y.jsxs("div",{className:"relative",children:[y.jsx("img",{src:s||"/logo.png",alt:"Logo",className:"w-10 h-10 sm:w-11 sm:h-11 rounded-full object-cover border-2 border-white/30 shadow-lg group-hover:scale-110 transition duration-500",onError:g=>{g.currentTarget.src="/logo.png"}}),y.jsx("div",{className:"absolute inset-0 rounded-full bg-blue-500/30 blur-lg opacity-0 group-hover:opacity-100 transition duration-700"})]}),y.jsx("div",{className:"flex flex-col",children:y.jsxs("h1",{className:"text-lg font-bold tracking-tight text-slate-900 dark:text-white leading-none group-hover:text-blue-600 dark:group-hover:text-blue-300 transition-colors duration-300",children:["RMCH ",y.jsx("span",{className:"font-light opacity-60",children:"Hub"})]})})]}),y.jsx("div",{className:"hidden md:flex items-center gap-1 bg-slate-100/50 dark:bg-white/5 rounded-full p-1.5 border border-white/10 shadow-inner",children:[{to:"/",label:"Home"},{to:"/attendance",label:"Attendance"},{to:"/ai-tutor",label:"Tutor"},{to:"/library",label:"Library"},{to:"/social",label:"Chill"}].map(g=>y.jsx(Rn,{to:g.to,className:`px-5 py-2 rounded-full text-sm font-semibold transition-all duration-500 ${d===g.to?"bg-white dark:bg-white/10 text-slate-900 dark:text-white shadow-lg shadow-black/5":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white hover:bg-white/30 dark:hover:bg-white/5"}`,children:g.label},g.to))}),y.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 pr-1",children:[o&&y.jsx("button",{onClick:o,className:"w-10 h-10 rounded-full bg-slate-100/50 dark:bg-white/5 flex items-center justify-center text-slate-600 dark:text-slate-300 hover:bg-white dark:hover:bg-white/20 transition-all duration-300 border border-white/10 hover:shadow-lg hover:scale-110 active:scale-95",children:l==="dark"?y.jsx(ql,{className:"w-5 h-5"}):y.jsx(_p,{className:"w-5 h-5"})}),y.jsx(Rn,{to:"/profile",className:"flex items-center gap-2 group",children:y.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-tr from-blue-500 to-purple-500 flex items-center justify-center shadow-lg border-2 border-white/20 overflow-hidden group-hover:ring-4 ring-blue-500/20 transition-all duration-500 group-hover:scale-105",children:t.avatar?y.jsx("img",{src:t.avatar,className:"w-full h-full object-cover",alt:"User"}):y.jsx("span",{className:"font-bold text-sm text-white",children:t.fullname.charAt(0)})})})]})]})}),y.jsx("main",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 pt-36 pb-40 min-h-screen text-slate-900 dark:text-slate-200",children:i}),y.jsx("div",{className:"md:hidden fixed bottom-0 left-0 right-0 h-32 mask-gradient-bottom z-30 pointer-events-none transition-all duration-500"}),y.jsx("div",{className:"fixed bottom-8 left-0 right-0 z-50 px-4 md:hidden pointer-events-none",children:y.jsx("nav",{className:"glass-heavy mx-auto max-w-sm rounded-[2.5rem] shadow-[0_20px_50px_rgba(0,0,0,0.3)] border border-white/10 pointer-events-auto overflow-hidden",children:y.jsxs("div",{className:"flex justify-between items-center px-4 py-4 overflow-x-auto no-scrollbar gap-1",children:[y.jsx(f,{to:"/",icon:sy,label:"Home"}),y.jsx(f,{to:"/attendance",icon:Qv,label:"Attd."}),y.jsx(f,{to:"/ai-tutor",icon:vo,label:"Tutor"}),y.jsx(f,{to:"/library",icon:yp,label:"Library"}),y.jsx(f,{to:"/social",icon:xp,label:"Chill"}),y.jsx(f,{to:"/profile",icon:yo,label:"Me"})]})})})]})};var Hl=function(i,e){return Hl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])},Hl(i,e)};function Ep(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Hl(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var wo=function(){return wo=Object.assign||function(e){for(var t,s=1,o=arguments.length;s<o;s++){t=arguments[s];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},wo.apply(this,arguments)};function Br(i,e){var t={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(t[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(i);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(i,s[o])&&(t[s[o]]=i[s[o]]);return t}function Sp(i,e,t,s){var o=arguments.length,l=o<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(i,e,t,s);else for(var d=i.length-1;d>=0;d--)(u=i[d])&&(l=(o<3?u(l):o>3?u(e,t,l):u(e,t))||l);return o>3&&l&&Object.defineProperty(e,t,l),l}function Cp(i,e){return function(t,s){e(t,s,i)}}function Tp(i,e,t,s,o,l){function u(I){if(I!==void 0&&typeof I!="function")throw new TypeError("Function expected");return I}for(var d=s.kind,f=d==="getter"?"get":d==="setter"?"set":"value",g=!e&&i?s.static?i:i.prototype:null,w=e||(g?Object.getOwnPropertyDescriptor(g,s.name):{}),_,b=!1,k=t.length-1;k>=0;k--){var T={};for(var N in s)T[N]=N==="access"?{}:s[N];for(var N in s.access)T.access[N]=s.access[N];T.addInitializer=function(I){if(b)throw new TypeError("Cannot add initializers after decoration has completed");l.push(u(I||null))};var C=(0,t[k])(d==="accessor"?{get:w.get,set:w.set}:w[f],T);if(d==="accessor"){if(C===void 0)continue;if(C===null||typeof C!="object")throw new TypeError("Object expected");(_=u(C.get))&&(w.get=_),(_=u(C.set))&&(w.set=_),(_=u(C.init))&&o.unshift(_)}else(_=u(C))&&(d==="field"?o.unshift(_):w[f]=_)}g&&Object.defineProperty(g,s.name,w),b=!0}function Np(i,e,t){for(var s=arguments.length>2,o=0;o<e.length;o++)t=s?e[o].call(i,t):e[o].call(i);return s?t:void 0}function Rp(i){return typeof i=="symbol"?i:"".concat(i)}function Pp(i,e,t){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(i,"name",{configurable:!0,value:t?"".concat(t," ",e):e})}function Ap(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)}function te(i,e,t,s){function o(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function d(w){try{g(s.next(w))}catch(_){u(_)}}function f(w){try{g(s.throw(w))}catch(_){u(_)}}function g(w){w.done?l(w.value):o(w.value).then(d,f)}g((s=s.apply(i,e||[])).next())})}function Ip(i,e){var t={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},s,o,l,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=d(0),u.throw=d(1),u.return=d(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function d(g){return function(w){return f([g,w])}}function f(g){if(s)throw new TypeError("Generator is already executing.");for(;u&&(u=0,g[0]&&(t=0)),t;)try{if(s=1,o&&(l=g[0]&2?o.return:g[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,g[1])).done)return l;switch(o=0,l&&(g=[g[0]&2,l.value]),g[0]){case 0:case 1:l=g;break;case 4:return t.label++,{value:g[1],done:!1};case 5:t.label++,o=g[1],g=[0];continue;case 7:g=t.ops.pop(),t.trys.pop();continue;default:if(l=t.trys,!(l=l.length>0&&l[l.length-1])&&(g[0]===6||g[0]===2)){t=0;continue}if(g[0]===3&&(!l||g[1]>l[0]&&g[1]<l[3])){t.label=g[1];break}if(g[0]===6&&t.label<l[1]){t.label=l[1],l=g;break}if(l&&t.label<l[2]){t.label=l[2],t.ops.push(g);break}l[2]&&t.ops.pop(),t.trys.pop();continue}g=e.call(i,t)}catch(w){g=[6,w],o=0}finally{s=l=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}}var No=Object.create?(function(i,e,t,s){s===void 0&&(s=t);var o=Object.getOwnPropertyDescriptor(e,t);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(i,s,o)}):(function(i,e,t,s){s===void 0&&(s=t),i[s]=e[t]});function jp(i,e){for(var t in i)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&No(e,i,t)}function xo(i){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&i[e],s=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function hu(i,e){var t=typeof Symbol=="function"&&i[Symbol.iterator];if(!t)return i;var s=t.call(i),o,l=[],u;try{for(;(e===void 0||e-- >0)&&!(o=s.next()).done;)l.push(o.value)}catch(d){u={error:d}}finally{try{o&&!o.done&&(t=s.return)&&t.call(s)}finally{if(u)throw u.error}}return l}function Op(){for(var i=[],e=0;e<arguments.length;e++)i=i.concat(hu(arguments[e]));return i}function Mp(){for(var i=0,e=0,t=arguments.length;e<t;e++)i+=arguments[e].length;for(var s=Array(i),o=0,e=0;e<t;e++)for(var l=arguments[e],u=0,d=l.length;u<d;u++,o++)s[o]=l[u];return s}function Lp(i,e,t){if(t||arguments.length===2)for(var s=0,o=e.length,l;s<o;s++)(l||!(s in e))&&(l||(l=Array.prototype.slice.call(e,0,s)),l[s]=e[s]);return i.concat(l||Array.prototype.slice.call(e))}function Ur(i){return this instanceof Ur?(this.v=i,this):new Ur(i)}function Dp(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(i,e||[]),o,l=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",u),o[Symbol.asyncIterator]=function(){return this},o;function u(k){return function(T){return Promise.resolve(T).then(k,_)}}function d(k,T){s[k]&&(o[k]=function(N){return new Promise(function(C,I){l.push([k,N,C,I])>1||f(k,N)})},T&&(o[k]=T(o[k])))}function f(k,T){try{g(s[k](T))}catch(N){b(l[0][3],N)}}function g(k){k.value instanceof Ur?Promise.resolve(k.value.v).then(w,_):b(l[0][2],k)}function w(k){f("next",k)}function _(k){f("throw",k)}function b(k,T){k(T),l.shift(),l.length&&f(l[0][0],l[0][1])}}function Up(i){var e,t;return e={},s("next"),s("throw",function(o){throw o}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(o,l){e[o]=i[o]?function(u){return(t=!t)?{value:Ur(i[o](u)),done:!1}:l?l(u):u}:l}}function $p(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],t;return e?e.call(i):(i=typeof xo=="function"?xo(i):i[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(l){t[l]=i[l]&&function(u){return new Promise(function(d,f){u=i[l](u),o(d,f,u.done,u.value)})}}function o(l,u,d,f){Promise.resolve(f).then(function(g){l({value:g,done:d})},u)}}function Fp(i,e){return Object.defineProperty?Object.defineProperty(i,"raw",{value:e}):i.raw=e,i}var py=Object.create?(function(i,e){Object.defineProperty(i,"default",{enumerable:!0,value:e})}):function(i,e){i.default=e},Wl=function(i){return Wl=Object.getOwnPropertyNames||function(e){var t=[];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[t.length]=s);return t},Wl(i)};function Bp(i){if(i&&i.__esModule)return i;var e={};if(i!=null)for(var t=Wl(i),s=0;s<t.length;s++)t[s]!=="default"&&No(e,i,t[s]);return py(e,i),e}function Vp(i){return i&&i.__esModule?i:{default:i}}function zp(i,e,t,s){if(t==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?i!==e||!s:!e.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?s:t==="a"?s.call(i):s?s.value:e.get(i)}function qp(i,e,t,s,o){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?i!==e||!o:!e.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?o.call(i,t):o?o.value=t:e.set(i,t),t}function Hp(i,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof i=="function"?e===i:i.has(e)}function Wp(i,e,t){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var s,o;if(t){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");s=e[Symbol.asyncDispose]}if(s===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");s=e[Symbol.dispose],t&&(o=s)}if(typeof s!="function")throw new TypeError("Object not disposable.");o&&(s=function(){try{o.call(this)}catch(l){return Promise.reject(l)}}),i.stack.push({value:e,dispose:s,async:t})}else t&&i.stack.push({async:!0});return e}var my=typeof SuppressedError=="function"?SuppressedError:function(i,e,t){var s=new Error(t);return s.name="SuppressedError",s.error=i,s.suppressed=e,s};function Gp(i){function e(l){i.error=i.hasError?new my(l,i.error,"An error was suppressed during disposal."):l,i.hasError=!0}var t,s=0;function o(){for(;t=i.stack.pop();)try{if(!t.async&&s===1)return s=0,i.stack.push(t),Promise.resolve().then(o);if(t.dispose){var l=t.dispose.call(t.value);if(t.async)return s|=2,Promise.resolve(l).then(o,function(u){return e(u),o()})}else s|=1}catch(u){e(u)}if(s===1)return i.hasError?Promise.reject(i.error):Promise.resolve();if(i.hasError)throw i.error}return o()}function Kp(i,e){return typeof i=="string"&&/^\.\.?\//.test(i)?i.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(t,s,o,l,u){return s?e?".jsx":".js":o&&(!l||!u)?t:o+l+"."+u.toLowerCase()+"js"}):i}const gy={__extends:Ep,__assign:wo,__rest:Br,__decorate:Sp,__param:Cp,__esDecorate:Tp,__runInitializers:Np,__propKey:Rp,__setFunctionName:Pp,__metadata:Ap,__awaiter:te,__generator:Ip,__createBinding:No,__exportStar:jp,__values:xo,__read:hu,__spread:Op,__spreadArrays:Mp,__spreadArray:Lp,__await:Ur,__asyncGenerator:Dp,__asyncDelegator:Up,__asyncValues:$p,__makeTemplateObject:Fp,__importStar:Bp,__importDefault:Vp,__classPrivateFieldGet:zp,__classPrivateFieldSet:qp,__classPrivateFieldIn:Hp,__addDisposableResource:Wp,__disposeResources:Gp,__rewriteRelativeImportExtension:Kp},vy=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Wp,get __assign(){return wo},__asyncDelegator:Up,__asyncGenerator:Dp,__asyncValues:$p,__await:Ur,__awaiter:te,__classPrivateFieldGet:zp,__classPrivateFieldIn:Hp,__classPrivateFieldSet:qp,__createBinding:No,__decorate:Sp,__disposeResources:Gp,__esDecorate:Tp,__exportStar:jp,__extends:Ep,__generator:Ip,__importDefault:Vp,__importStar:Bp,__makeTemplateObject:Fp,__metadata:Ap,__param:Cp,__propKey:Rp,__read:hu,__rest:Br,__rewriteRelativeImportExtension:Kp,__runInitializers:Np,__setFunctionName:Pp,__spread:Op,__spreadArray:Lp,__spreadArrays:Mp,__values:xo,default:gy},Symbol.toStringTag,{value:"Module"})),yy=i=>i?(...e)=>i(...e):(...e)=>fetch(...e);class fu extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class wy extends fu{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Lh extends fu{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Dh extends fu{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Gl;(function(i){i.Any="any",i.ApNortheast1="ap-northeast-1",i.ApNortheast2="ap-northeast-2",i.ApSouth1="ap-south-1",i.ApSoutheast1="ap-southeast-1",i.ApSoutheast2="ap-southeast-2",i.CaCentral1="ca-central-1",i.EuCentral1="eu-central-1",i.EuWest1="eu-west-1",i.EuWest2="eu-west-2",i.EuWest3="eu-west-3",i.SaEast1="sa-east-1",i.UsEast1="us-east-1",i.UsWest1="us-west-1",i.UsWest2="us-west-2"})(Gl||(Gl={}));class xy{constructor(e,{headers:t={},customFetch:s,region:o=Gl.Any}={}){this.url=e,this.headers=t,this.region=o,this.fetch=yy(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return te(this,arguments,void 0,function*(t,s={}){var o;let l,u;try{const{headers:d,method:f,body:g,signal:w,timeout:_}=s;let b={},{region:k}=s;k||(k=this.region);const T=new URL(`${this.url}/${t}`);k&&k!=="any"&&(b["x-region"]=k,T.searchParams.set("forceFunctionRegion",k));let N;g&&(d&&!Object.prototype.hasOwnProperty.call(d,"Content-Type")||!d)?typeof Blob<"u"&&g instanceof Blob||g instanceof ArrayBuffer?(b["Content-Type"]="application/octet-stream",N=g):typeof g=="string"?(b["Content-Type"]="text/plain",N=g):typeof FormData<"u"&&g instanceof FormData?N=g:(b["Content-Type"]="application/json",N=JSON.stringify(g)):N=g;let C=w;_&&(u=new AbortController,l=setTimeout(()=>u.abort(),_),w?(C=u.signal,w.addEventListener("abort",()=>u.abort())):C=u.signal);const I=yield this.fetch(T.toString(),{method:f||"POST",headers:Object.assign(Object.assign(Object.assign({},b),this.headers),d),body:N,signal:C}).catch(W=>{throw new wy(W)}),S=I.headers.get("x-relay-error");if(S&&S==="true")throw new Lh(I);if(!I.ok)throw new Dh(I);let P=((o=I.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),L;return P==="application/json"?L=yield I.json():P==="application/octet-stream"||P==="application/pdf"?L=yield I.blob():P==="text/event-stream"?L=I:P==="multipart/form-data"?L=yield I.formData():L=yield I.text(),{data:L,error:null,response:I}}catch(d){return{data:null,error:d,response:d instanceof Dh||d instanceof Lh?d.context:void 0}}finally{l&&clearTimeout(l)}})}}var lt={};const Vr=P0(vy);var eo={},to={},no={},ro={},so={},io={},Uh;function Jp(){if(Uh)return io;Uh=1,Object.defineProperty(io,"__esModule",{value:!0});class i extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return io.default=i,io}var $h;function Yp(){if($h)return so;$h=1,Object.defineProperty(so,"__esModule",{value:!0});const e=Vr.__importDefault(Jp());class t{constructor(o){var l,u;this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=new Headers(o.headers),this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=(l=o.shouldThrowOnError)!==null&&l!==void 0?l:!1,this.signal=o.signal,this.isMaybeSingle=(u=o.isMaybeSingle)!==null&&u!==void 0?u:!1,o.fetch?this.fetch=o.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,l){return this.headers=new Headers(this.headers),this.headers.set(o,l),this}then(o,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const u=this.fetch;let d=u(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async f=>{var g,w,_,b;let k=null,T=null,N=null,C=f.status,I=f.statusText;if(f.ok){if(this.method!=="HEAD"){const W=await f.text();W===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((g=this.headers.get("Accept"))===null||g===void 0)&&g.includes("application/vnd.pgrst.plan+text"))?T=W:T=JSON.parse(W))}const P=(w=this.headers.get("Prefer"))===null||w===void 0?void 0:w.match(/count=(exact|planned|estimated)/),L=(_=f.headers.get("content-range"))===null||_===void 0?void 0:_.split("/");P&&L&&L.length>1&&(N=parseInt(L[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(T)&&(T.length>1?(k={code:"PGRST116",details:`Results contain ${T.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},T=null,N=null,C=406,I="Not Acceptable"):T.length===1?T=T[0]:T=null)}else{const P=await f.text();try{k=JSON.parse(P),Array.isArray(k)&&f.status===404&&(T=[],k=null,C=200,I="OK")}catch{f.status===404&&P===""?(C=204,I="No Content"):k={message:P}}if(k&&this.isMaybeSingle&&(!((b=k?.details)===null||b===void 0)&&b.includes("0 rows"))&&(k=null,C=200,I="OK"),k&&this.shouldThrowOnError)throw new e.default(k)}return{error:k,data:T,count:N,status:C,statusText:I}});return this.shouldThrowOnError||(d=d.catch(f=>{var g,w,_,b,k,T;let N="";const C=f?.cause;if(C){const I=(g=C?.message)!==null&&g!==void 0?g:"",S=(w=C?.code)!==null&&w!==void 0?w:"";N=`${(_=f?.name)!==null&&_!==void 0?_:"FetchError"}: ${f?.message}`,N+=`

Caused by: ${(b=C?.name)!==null&&b!==void 0?b:"Error"}: ${I}`,S&&(N+=` (${S})`),C?.stack&&(N+=`
${C.stack}`)}else N=(k=f?.stack)!==null&&k!==void 0?k:"";return{error:{message:`${(T=f?.name)!==null&&T!==void 0?T:"FetchError"}: ${f?.message}`,details:N,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),d.then(o,l)}returns(){return this}overrideTypes(){return this}}return so.default=t,so}var Fh;function Qp(){if(Fh)return ro;Fh=1,Object.defineProperty(ro,"__esModule",{value:!0});const e=Vr.__importDefault(Yp());class t extends e.default{select(o){let l=!1;const u=(o??"*").split("").map(d=>/\s/.test(d)&&!l?"":(d==='"'&&(l=!l),d)).join("");return this.url.searchParams.set("select",u),this.headers.append("Prefer","return=representation"),this}order(o,{ascending:l=!0,nullsFirst:u,foreignTable:d,referencedTable:f=d}={}){const g=f?`${f}.order`:"order",w=this.url.searchParams.get(g);return this.url.searchParams.set(g,`${w?`${w},`:""}${o}.${l?"asc":"desc"}${u===void 0?"":u?".nullsfirst":".nullslast"}`),this}limit(o,{foreignTable:l,referencedTable:u=l}={}){const d=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(d,`${o}`),this}range(o,l,{foreignTable:u,referencedTable:d=u}={}){const f=typeof d>"u"?"offset":`${d}.offset`,g=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(f,`${o}`),this.url.searchParams.set(g,`${l-o+1}`),this}abortSignal(o){return this.signal=o,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:o=!1,verbose:l=!1,settings:u=!1,buffers:d=!1,wal:f=!1,format:g="text"}={}){var w;const _=[o?"analyze":null,l?"verbose":null,u?"settings":null,d?"buffers":null,f?"wal":null].filter(Boolean).join("|"),b=(w=this.headers.get("Accept"))!==null&&w!==void 0?w:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${g}; for="${b}"; options=${_};`),g==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(o){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${o}`),this}}return ro.default=t,ro}var Bh;function pu(){if(Bh)return no;Bh=1,Object.defineProperty(no,"__esModule",{value:!0});const e=Vr.__importDefault(Qp()),t=new RegExp("[,()]");class s extends e.default{eq(l,u){return this.url.searchParams.append(l,`eq.${u}`),this}neq(l,u){return this.url.searchParams.append(l,`neq.${u}`),this}gt(l,u){return this.url.searchParams.append(l,`gt.${u}`),this}gte(l,u){return this.url.searchParams.append(l,`gte.${u}`),this}lt(l,u){return this.url.searchParams.append(l,`lt.${u}`),this}lte(l,u){return this.url.searchParams.append(l,`lte.${u}`),this}like(l,u){return this.url.searchParams.append(l,`like.${u}`),this}likeAllOf(l,u){return this.url.searchParams.append(l,`like(all).{${u.join(",")}}`),this}likeAnyOf(l,u){return this.url.searchParams.append(l,`like(any).{${u.join(",")}}`),this}ilike(l,u){return this.url.searchParams.append(l,`ilike.${u}`),this}ilikeAllOf(l,u){return this.url.searchParams.append(l,`ilike(all).{${u.join(",")}}`),this}ilikeAnyOf(l,u){return this.url.searchParams.append(l,`ilike(any).{${u.join(",")}}`),this}regexMatch(l,u){return this.url.searchParams.append(l,`match.${u}`),this}regexIMatch(l,u){return this.url.searchParams.append(l,`imatch.${u}`),this}is(l,u){return this.url.searchParams.append(l,`is.${u}`),this}isDistinct(l,u){return this.url.searchParams.append(l,`isdistinct.${u}`),this}in(l,u){const d=Array.from(new Set(u)).map(f=>typeof f=="string"&&t.test(f)?`"${f}"`:`${f}`).join(",");return this.url.searchParams.append(l,`in.(${d})`),this}contains(l,u){return typeof u=="string"?this.url.searchParams.append(l,`cs.${u}`):Array.isArray(u)?this.url.searchParams.append(l,`cs.{${u.join(",")}}`):this.url.searchParams.append(l,`cs.${JSON.stringify(u)}`),this}containedBy(l,u){return typeof u=="string"?this.url.searchParams.append(l,`cd.${u}`):Array.isArray(u)?this.url.searchParams.append(l,`cd.{${u.join(",")}}`):this.url.searchParams.append(l,`cd.${JSON.stringify(u)}`),this}rangeGt(l,u){return this.url.searchParams.append(l,`sr.${u}`),this}rangeGte(l,u){return this.url.searchParams.append(l,`nxl.${u}`),this}rangeLt(l,u){return this.url.searchParams.append(l,`sl.${u}`),this}rangeLte(l,u){return this.url.searchParams.append(l,`nxr.${u}`),this}rangeAdjacent(l,u){return this.url.searchParams.append(l,`adj.${u}`),this}overlaps(l,u){return typeof u=="string"?this.url.searchParams.append(l,`ov.${u}`):this.url.searchParams.append(l,`ov.{${u.join(",")}}`),this}textSearch(l,u,{config:d,type:f}={}){let g="";f==="plain"?g="pl":f==="phrase"?g="ph":f==="websearch"&&(g="w");const w=d===void 0?"":`(${d})`;return this.url.searchParams.append(l,`${g}fts${w}.${u}`),this}match(l){return Object.entries(l).forEach(([u,d])=>{this.url.searchParams.append(u,`eq.${d}`)}),this}not(l,u,d){return this.url.searchParams.append(l,`not.${u}.${d}`),this}or(l,{foreignTable:u,referencedTable:d=u}={}){const f=d?`${d}.or`:"or";return this.url.searchParams.append(f,`(${l})`),this}filter(l,u,d){return this.url.searchParams.append(l,`${u}.${d}`),this}}return no.default=s,no}var Vh;function Xp(){if(Vh)return to;Vh=1,Object.defineProperty(to,"__esModule",{value:!0});const e=Vr.__importDefault(pu());class t{constructor(o,{headers:l={},schema:u,fetch:d}){this.url=o,this.headers=new Headers(l),this.schema=u,this.fetch=d}select(o,l){const{head:u=!1,count:d}=l??{},f=u?"HEAD":"GET";let g=!1;const w=(o??"*").split("").map(_=>/\s/.test(_)&&!g?"":(_==='"'&&(g=!g),_)).join("");return this.url.searchParams.set("select",w),d&&this.headers.append("Prefer",`count=${d}`),new e.default({method:f,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(o,{count:l,defaultToNull:u=!0}={}){var d;const f="POST";if(l&&this.headers.append("Prefer",`count=${l}`),u||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const g=o.reduce((w,_)=>w.concat(Object.keys(_)),[]);if(g.length>0){const w=[...new Set(g)].map(_=>`"${_}"`);this.url.searchParams.set("columns",w.join(","))}}return new e.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}upsert(o,{onConflict:l,ignoreDuplicates:u=!1,count:d,defaultToNull:f=!0}={}){var g;const w="POST";if(this.headers.append("Prefer",`resolution=${u?"ignore":"merge"}-duplicates`),l!==void 0&&this.url.searchParams.set("on_conflict",l),d&&this.headers.append("Prefer",`count=${d}`),f||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const _=o.reduce((b,k)=>b.concat(Object.keys(k)),[]);if(_.length>0){const b=[...new Set(_)].map(k=>`"${k}"`);this.url.searchParams.set("columns",b.join(","))}}return new e.default({method:w,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}update(o,{count:l}={}){var u;const d="PATCH";return l&&this.headers.append("Prefer",`count=${l}`),new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}delete({count:o}={}){var l;const u="DELETE";return o&&this.headers.append("Prefer",`count=${o}`),new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}}return to.default=t,to}var zh;function _y(){if(zh)return eo;zh=1,Object.defineProperty(eo,"__esModule",{value:!0});const i=Vr,e=i.__importDefault(Xp()),t=i.__importDefault(pu());class s{constructor(l,{headers:u={},schema:d,fetch:f}={}){this.url=l,this.headers=new Headers(u),this.schemaName=d,this.fetch=f}from(l){if(!l||typeof l!="string"||l.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const u=new URL(`${this.url}/${l}`);return new e.default(u,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(l){return new s(this.url,{headers:this.headers,schema:l,fetch:this.fetch})}rpc(l,u={},{head:d=!1,get:f=!1,count:g}={}){var w;let _;const b=new URL(`${this.url}/rpc/${l}`);let k;d||f?(_=d?"HEAD":"GET",Object.entries(u).filter(([N,C])=>C!==void 0).map(([N,C])=>[N,Array.isArray(C)?`{${C.join(",")}}`:`${C}`]).forEach(([N,C])=>{b.searchParams.append(N,C)})):(_="POST",k=u);const T=new Headers(this.headers);return g&&T.set("Prefer",`count=${g}`),new t.default({method:_,url:b,headers:T,schema:this.schemaName,body:k,fetch:(w=this.fetch)!==null&&w!==void 0?w:fetch})}}return eo.default=s,eo}var qh;function by(){if(qh)return lt;qh=1,Object.defineProperty(lt,"__esModule",{value:!0}),lt.PostgrestError=lt.PostgrestBuilder=lt.PostgrestTransformBuilder=lt.PostgrestFilterBuilder=lt.PostgrestQueryBuilder=lt.PostgrestClient=void 0;const i=Vr,e=i.__importDefault(_y());lt.PostgrestClient=e.default;const t=i.__importDefault(Xp());lt.PostgrestQueryBuilder=t.default;const s=i.__importDefault(pu());lt.PostgrestFilterBuilder=s.default;const o=i.__importDefault(Qp());lt.PostgrestTransformBuilder=o.default;const l=i.__importDefault(Yp());lt.PostgrestBuilder=l.default;const u=i.__importDefault(Jp());return lt.PostgrestError=u.default,lt.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:s.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:l.default,PostgrestError:u.default},lt}var Zp=by();const em=ou(Zp),ky=rp({__proto__:null,default:em},[Zp]),{PostgrestClient:Ey,PostgrestQueryBuilder:Xk,PostgrestFilterBuilder:Zk,PostgrestTransformBuilder:e1,PostgrestBuilder:t1,PostgrestError:n1}=em||ky;class Sy{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const s=t.node,o=parseInt(s.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const s=this.getWebSocketConstructor();return new s(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Cy="2.85.0",Ty=`realtime-js/${Cy}`,tm="1.0.0",Ny="2.0.0",Hh=tm,Kl=1e4,Ry=1e3,Py=100;var Qn;(function(i){i[i.connecting=0]="connecting",i[i.open=1]="open",i[i.closing=2]="closing",i[i.closed=3]="closed"})(Qn||(Qn={}));var Ye;(function(i){i.closed="closed",i.errored="errored",i.joined="joined",i.joining="joining",i.leaving="leaving"})(Ye||(Ye={}));var qt;(function(i){i.close="phx_close",i.error="phx_error",i.join="phx_join",i.reply="phx_reply",i.leave="phx_leave",i.access_token="access_token"})(qt||(qt={}));var Jl;(function(i){i.websocket="websocket"})(Jl||(Jl={}));var Xn;(function(i){i.Connecting="connecting",i.Open="open",i.Closing="closing",i.Closed="closed"})(Xn||(Xn={}));class Ay{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,t){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return t(this._binaryEncodeUserBroadcastPush(e));let s=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(s))}_binaryEncodeUserBroadcastPush(e){var t;return this._isArrayBuffer((t=e.payload)===null||t===void 0?void 0:t.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var t,s;const o=(s=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&s!==void 0?s:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,o)}_encodeJsonUserBroadcastPush(e){var t,s;const o=(s=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&s!==void 0?s:{},u=new TextEncoder().encode(JSON.stringify(o)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,u)}_encodeUserBroadcastPush(e,t,s){var o,l;const u=e.topic,d=(o=e.ref)!==null&&o!==void 0?o:"",f=(l=e.join_ref)!==null&&l!==void 0?l:"",g=e.payload.event,w=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},_=Object.keys(w).length===0?"":JSON.stringify(w);if(f.length>255)throw new Error(`joinRef length ${f.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`ref length ${d.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`topic length ${u.length} exceeds maximum of 255`);if(g.length>255)throw new Error(`userEvent length ${g.length} exceeds maximum of 255`);if(_.length>255)throw new Error(`metadata length ${_.length} exceeds maximum of 255`);const b=this.USER_BROADCAST_PUSH_META_LENGTH+f.length+d.length+u.length+g.length+_.length,k=new ArrayBuffer(this.HEADER_LENGTH+b);let T=new DataView(k),N=0;T.setUint8(N++,this.KINDS.userBroadcastPush),T.setUint8(N++,f.length),T.setUint8(N++,d.length),T.setUint8(N++,u.length),T.setUint8(N++,g.length),T.setUint8(N++,_.length),T.setUint8(N++,t),Array.from(f,I=>T.setUint8(N++,I.charCodeAt(0))),Array.from(d,I=>T.setUint8(N++,I.charCodeAt(0))),Array.from(u,I=>T.setUint8(N++,I.charCodeAt(0))),Array.from(g,I=>T.setUint8(N++,I.charCodeAt(0))),Array.from(_,I=>T.setUint8(N++,I.charCodeAt(0)));var C=new Uint8Array(k.byteLength+s.byteLength);return C.set(new Uint8Array(k),0),C.set(new Uint8Array(s),k.byteLength),C.buffer}decode(e,t){if(this._isArrayBuffer(e)){let s=this._binaryDecode(e);return t(s)}if(typeof e=="string"){const s=JSON.parse(e),[o,l,u,d,f]=s;return t({join_ref:o,ref:l,topic:u,event:d,payload:f})}return t({})}_binaryDecode(e){const t=new DataView(e),s=t.getUint8(0),o=new TextDecoder;switch(s){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,t,o)}}_decodeUserBroadcast(e,t,s){const o=t.getUint8(1),l=t.getUint8(2),u=t.getUint8(3),d=t.getUint8(4);let f=this.HEADER_LENGTH+4;const g=s.decode(e.slice(f,f+o));f=f+o;const w=s.decode(e.slice(f,f+l));f=f+l;const _=s.decode(e.slice(f,f+u));f=f+u;const b=e.slice(f,e.byteLength),k=d===this.JSON_ENCODING?JSON.parse(s.decode(b)):b,T={type:this.BROADCAST_EVENT,event:w,payload:k};return u>0&&(T.meta=JSON.parse(_)),{join_ref:null,ref:null,topic:g,event:this.BROADCAST_EVENT,payload:T}}_isArrayBuffer(e){var t;return e instanceof ArrayBuffer||((t=e?.constructor)===null||t===void 0?void 0:t.name)==="ArrayBuffer"}_pick(e,t){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([s])=>t.includes(s)))}}class nm{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ae;(function(i){i.abstime="abstime",i.bool="bool",i.date="date",i.daterange="daterange",i.float4="float4",i.float8="float8",i.int2="int2",i.int4="int4",i.int4range="int4range",i.int8="int8",i.int8range="int8range",i.json="json",i.jsonb="jsonb",i.money="money",i.numeric="numeric",i.oid="oid",i.reltime="reltime",i.text="text",i.time="time",i.timestamp="timestamp",i.timestamptz="timestamptz",i.timetz="timetz",i.tsrange="tsrange",i.tstzrange="tstzrange"})(Ae||(Ae={}));const Wh=(i,e,t={})=>{var s;const o=(s=t.skipTypes)!==null&&s!==void 0?s:[];return e?Object.keys(e).reduce((l,u)=>(l[u]=Iy(u,i,e,o),l),{}):{}},Iy=(i,e,t,s)=>{const o=e.find(d=>d.name===i),l=o?.type,u=t[i];return l&&!s.includes(l)?rm(l,u):Yl(u)},rm=(i,e)=>{if(i.charAt(0)==="_"){const t=i.slice(1,i.length);return Ly(e,t)}switch(i){case Ae.bool:return jy(e);case Ae.float4:case Ae.float8:case Ae.int2:case Ae.int4:case Ae.int8:case Ae.numeric:case Ae.oid:return Oy(e);case Ae.json:case Ae.jsonb:return My(e);case Ae.timestamp:return Dy(e);case Ae.abstime:case Ae.date:case Ae.daterange:case Ae.int4range:case Ae.int8range:case Ae.money:case Ae.reltime:case Ae.text:case Ae.time:case Ae.timestamptz:case Ae.timetz:case Ae.tsrange:case Ae.tstzrange:return Yl(e);default:return Yl(e)}},Yl=i=>i,jy=i=>{switch(i){case"t":return!0;case"f":return!1;default:return i}},Oy=i=>{if(typeof i=="string"){const e=parseFloat(i);if(!Number.isNaN(e))return e}return i},My=i=>{if(typeof i=="string")try{return JSON.parse(i)}catch(e){return console.log(`JSON parse error: ${e}`),i}return i},Ly=(i,e)=>{if(typeof i!="string")return i;const t=i.length-1,s=i[t];if(i[0]==="{"&&s==="}"){let l;const u=i.slice(1,t);try{l=JSON.parse("["+u+"]")}catch{l=u?u.split(","):[]}return l.map(d=>rm(e,d))}return i},Dy=i=>typeof i=="string"?i.replace(" ","T"):i,sm=i=>{const e=new URL(i);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Rl{constructor(e,t,s={},o=Kl){this.channel=e,this.event=t,this.payload=s,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Gh;(function(i){i.SYNC="sync",i.JOIN="join",i.LEAVE="leave"})(Gh||(Gh={}));class Ps{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},o=>{const{onJoin:l,onLeave:u,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ps.syncState(this.state,o,l,u),this.pendingDiffs.forEach(f=>{this.state=Ps.syncDiff(this.state,f,l,u)}),this.pendingDiffs=[],d()}),this.channel._on(s.diff,{},o=>{const{onJoin:l,onLeave:u,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=Ps.syncDiff(this.state,o,l,u),d())}),this.onJoin((o,l,u)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:l,newPresences:u})}),this.onLeave((o,l,u)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:l,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,o){const l=this.cloneDeep(e),u=this.transformState(t),d={},f={};return this.map(l,(g,w)=>{u[g]||(f[g]=w)}),this.map(u,(g,w)=>{const _=l[g];if(_){const b=w.map(C=>C.presence_ref),k=_.map(C=>C.presence_ref),T=w.filter(C=>k.indexOf(C.presence_ref)<0),N=_.filter(C=>b.indexOf(C.presence_ref)<0);T.length>0&&(d[g]=T),N.length>0&&(f[g]=N)}else d[g]=w}),this.syncDiff(l,{joins:d,leaves:f},s,o)}static syncDiff(e,t,s,o){const{joins:l,leaves:u}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),o||(o=()=>{}),this.map(l,(d,f)=>{var g;const w=(g=e[d])!==null&&g!==void 0?g:[];if(e[d]=this.cloneDeep(f),w.length>0){const _=e[d].map(k=>k.presence_ref),b=w.filter(k=>_.indexOf(k.presence_ref)<0);e[d].unshift(...b)}s(d,w,f)}),this.map(u,(d,f)=>{let g=e[d];if(!g)return;const w=f.map(_=>_.presence_ref);g=g.filter(_=>w.indexOf(_.presence_ref)<0),e[d]=g,o(d,g,f),g.length===0&&delete e[d]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const o=e[s];return"metas"in o?t[s]=o.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):t[s]=o,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Kh;(function(i){i.ALL="*",i.INSERT="INSERT",i.UPDATE="UPDATE",i.DELETE="DELETE"})(Kh||(Kh={}));var As;(function(i){i.BROADCAST="broadcast",i.PRESENCE="presence",i.POSTGRES_CHANGES="postgres_changes",i.SYSTEM="system"})(As||(As={}));var sn;(function(i){i.SUBSCRIBED="SUBSCRIBED",i.TIMED_OUT="TIMED_OUT",i.CLOSED="CLOSED",i.CHANNEL_ERROR="CHANNEL_ERROR"})(sn||(sn={}));class mu{constructor(e,t={config:{}},s){var o,l;if(this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=Ye.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Rl(this,qt.join,this.params,this.timeout),this.rejoinTimer=new nm(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ye.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(u=>u.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ye.closed,this.socket._remove(this)}),this._onError(u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=Ye.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ye.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=Ye.errored,this.rejoinTimer.scheduleTimeout())}),this._on(qt.reply,{},(u,d)=>{this._trigger(this._replyEventName(d),u)}),this.presence=new Ps(this),this.broadcastEndpointURL=sm(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((l=(o=this.params.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var s,o,l;if(this.socket.isConnected()||this.socket.connect(),this.state==Ye.closed){const{config:{broadcast:u,presence:d,private:f}}=this.params,g=(o=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(k=>k.filter))!==null&&o!==void 0?o:[],w=!!this.bindings[As.PRESENCE]&&this.bindings[As.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,_={},b={broadcast:u,presence:Object.assign(Object.assign({},d),{enabled:w}),postgres_changes:g,private:f};this.socket.accessTokenValue&&(_.access_token=this.socket.accessTokenValue),this._onError(k=>e?.(sn.CHANNEL_ERROR,k)),this._onClose(()=>e?.(sn.CLOSED)),this.updateJoinPayload(Object.assign({config:b},_)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:k})=>{var T;if(this.socket.setAuth(),k===void 0){e?.(sn.SUBSCRIBED);return}else{const N=this.bindings.postgres_changes,C=(T=N?.length)!==null&&T!==void 0?T:0,I=[];for(let S=0;S<C;S++){const P=N[S],{filter:{event:L,schema:W,table:H,filter:Q}}=P,se=k&&k[S];if(se&&se.event===L&&se.schema===W&&se.table===H&&se.filter===Q)I.push(Object.assign(Object.assign({},P),{id:se.id}));else{this.unsubscribe(),this.state=Ye.errored,e?.(sn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=I,e&&e(sn.SUBSCRIBED);return}}).receive("error",k=>{this.state=Ye.errored,e?.(sn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(k).join(", ")||"error")))}).receive("timeout",()=>{e?.(sn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this.state===Ye.joined&&e===As.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,s)}async httpSend(e,t,s={}){var o;const l=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(t==null)return Promise.reject("Payload is required for httpSend()");const u={method:"POST",headers:{Authorization:l,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},d=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(o=s.timeout)!==null&&o!==void 0?o:this.timeout);if(d.status===202)return{success:!0};let f=d.statusText;try{const g=await d.json();f=g.error||g.message||f}catch{}return Promise.reject(new Error(f))}async send(e,t={}){var s,o;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:l,payload:u}=e,f={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:u,private:this.private}]})};try{const g=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(s=t.timeout)!==null&&s!==void 0?s:this.timeout);return await((o=g.body)===null||o===void 0?void 0:o.cancel()),g.ok?"ok":"error"}catch(g){return g.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var u,d,f;const g=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((f=(d=(u=this.params)===null||u===void 0?void 0:u.config)===null||d===void 0?void 0:d.broadcast)===null||f===void 0)&&f.ack)&&l("ok"),g.receive("ok",()=>l("ok")),g.receive("error",()=>l("error")),g.receive("timeout",()=>l("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ye.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(qt.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(o=>{s=new Rl(this,qt.leave,{},e),s.receive("ok",()=>{t(),o("ok")}).receive("timeout",()=>{t(),o("timed out")}).receive("error",()=>{o("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ye.closed,this.bindings={}}async _fetchWithTimeout(e,t,s){const o=new AbortController,l=setTimeout(()=>o.abort(),s),u=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:o.signal}));return clearTimeout(l),u}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new Rl(this,e,t,s);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Py){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var o,l;const u=e.toLocaleLowerCase(),{close:d,error:f,leave:g,join:w}=qt;if(s&&[d,f,g,w].indexOf(u)>=0&&s!==this._joinRef())return;let b=this._onMessage(u,t,s);if(t&&!b)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(k=>{var T,N,C;return((T=k.filter)===null||T===void 0?void 0:T.event)==="*"||((C=(N=k.filter)===null||N===void 0?void 0:N.event)===null||C===void 0?void 0:C.toLocaleLowerCase())===u}).map(k=>k.callback(b,s)):(l=this.bindings[u])===null||l===void 0||l.filter(k=>{var T,N,C,I,S,P;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in k){const L=k.id,W=(T=k.filter)===null||T===void 0?void 0:T.event;return L&&((N=t.ids)===null||N===void 0?void 0:N.includes(L))&&(W==="*"||W?.toLocaleLowerCase()===((C=t.data)===null||C===void 0?void 0:C.type.toLocaleLowerCase()))}else{const L=(S=(I=k?.filter)===null||I===void 0?void 0:I.event)===null||S===void 0?void 0:S.toLocaleLowerCase();return L==="*"||L===((P=t?.event)===null||P===void 0?void 0:P.toLocaleLowerCase())}else return k.type.toLocaleLowerCase()===u}).map(k=>{if(typeof b=="object"&&"ids"in b){const T=b.data,{schema:N,table:C,commit_timestamp:I,type:S,errors:P}=T;b=Object.assign(Object.assign({},{schema:N,table:C,commit_timestamp:I,eventType:S,new:{},old:{},errors:P}),this._getPayloadRecords(T))}k.callback(b,s)})}_isClosed(){return this.state===Ye.closed}_isJoined(){return this.state===Ye.joined}_isJoining(){return this.state===Ye.joining}_isLeaving(){return this.state===Ye.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const o=e.toLocaleLowerCase(),l={type:o,filter:t,callback:s};return this.bindings[o]?this.bindings[o].push(l):this.bindings[o]=[l],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(o=>{var l;return!(((l=o.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===s&&mu.isEqual(o.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(qt.close,{},e)}_onError(e){this._on(qt.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ye.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Wh(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Wh(e.columns,e.old_record)),t}}const Pl=()=>{},oo={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Uy=[1e3,2e3,5e3,1e4],$y=1e4,Fy=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class By{constructor(e,t){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Kl,this.transport=null,this.heartbeatIntervalMs=oo.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Pl,this.ref=0,this.reconnectTimer=null,this.vsn=Hh,this.logger=Pl,this.conn=null,this.sendBuffer=[],this.serializer=new Ay,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>o?(...l)=>o(...l):(...l)=>fetch(...l),!(!((s=t?.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${Jl.websocket}`,this.httpEndpoint=sm(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Sy.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,t??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Qn.connecting:return Xn.Connecting;case Qn.open:return Xn.Open;case Qn.closing:return Xn.Closing;default:return Xn.Closed}}isConnected(){return this.connectionState()===Xn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const s=`realtime:${e}`,o=this.getChannels().find(l=>l.topic===s);if(o)return o;{const l=new mu(`realtime:${e}`,t,this);return this.channels.push(l),l}}push(e){const{topic:t,event:s,payload:o,ref:l}=e,u=()=>{this.encode(e,d=>{var f;(f=this.conn)===null||f===void 0||f.send(d)})};this.log("push",`${t} ${s} (${l})`,o),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Ry,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},oo.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(g){this.log("error","error in heartbeat callback",g)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:o,payload:l,ref:u}=t,d=u?`(${u})`:"",f=l.status||"";this.log("receive",`${f} ${s} ${o} ${d}`.trim(),l),this.channels.filter(g=>g._isMember(s)).forEach(g=>g._trigger(o,l,u)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===Qn.open||this.conn.readyState===Qn.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(t=>{this.log("error","error waiting for auth on connect",t),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(qt.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const s=e.match(/\?/)?"&":"?",o=new URLSearchParams(t);return`${e}${s}${o}`}_workerObjectUrl(e){let t;if(e)t=e;else{const s=new Blob([Fy],{type:"application/javascript"});t=URL.createObjectURL(s)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(s=>{const o={access_token:t,version:Ty};t&&s.updateJoinPayload(o),s.joinedOnce&&s._isJoined()&&s._push(qt.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(t)}catch(o){this.log("error",`error in ${e} callback`,o)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new nm(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},oo.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,s,o,l,u,d,f,g,w,_,b,k;switch(this.transport=(t=e?.transport)!==null&&t!==void 0?t:null,this.timeout=(s=e?.timeout)!==null&&s!==void 0?s:Kl,this.heartbeatIntervalMs=(o=e?.heartbeatIntervalMs)!==null&&o!==void 0?o:oo.HEARTBEAT_INTERVAL,this.worker=(l=e?.worker)!==null&&l!==void 0?l:!1,this.accessToken=(u=e?.accessToken)!==null&&u!==void 0?u:null,this.heartbeatCallback=(d=e?.heartbeatCallback)!==null&&d!==void 0?d:Pl,this.vsn=(f=e?.vsn)!==null&&f!==void 0?f:Hh,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(g=e?.reconnectAfterMs)!==null&&g!==void 0?g:(T=>Uy[T-1]||$y),this.vsn){case tm:this.encode=(w=e?.encode)!==null&&w!==void 0?w:((T,N)=>N(JSON.stringify(T))),this.decode=(_=e?.decode)!==null&&_!==void 0?_:((T,N)=>N(JSON.parse(T)));break;case Ny:this.encode=(b=e?.encode)!==null&&b!==void 0?b:this.serializer.encode.bind(this.serializer),this.decode=(k=e?.decode)!==null&&k!==void 0?k:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}class gu extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ue(i){return typeof i=="object"&&i!==null&&"__isStorageError"in i}class Vy extends gu{constructor(e,t,s){super(e),this.name="StorageApiError",this.status=t,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Ql extends gu{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}const vu=i=>i?(...e)=>i(...e):(...e)=>fetch(...e),zy=()=>Response,Xl=i=>{if(Array.isArray(i))return i.map(t=>Xl(t));if(typeof i=="function"||i!==Object(i))return i;const e={};return Object.entries(i).forEach(([t,s])=>{const o=t.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));e[o]=Xl(s)}),e},qy=i=>{if(typeof i!="object"||i===null)return!1;const e=Object.getPrototypeOf(i);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},Al=i=>{var e;return i.msg||i.message||i.error_description||(typeof i.error=="string"?i.error:(e=i.error)===null||e===void 0?void 0:e.message)||JSON.stringify(i)},Hy=(i,e,t)=>te(void 0,void 0,void 0,function*(){const s=yield zy();i instanceof s&&!t?.noResolveJson?i.json().then(o=>{const l=i.status||500,u=o?.statusCode||l+"";e(new Vy(Al(o),l,u))}).catch(o=>{e(new Ql(Al(o),o))}):e(new Ql(Al(i),i))}),Wy=(i,e,t,s)=>{const o={method:i,headers:e?.headers||{}};return i==="GET"||!s?o:(qy(s)?(o.headers=Object.assign({"Content-Type":"application/json"},e?.headers),o.body=JSON.stringify(s)):o.body=s,e?.duplex&&(o.duplex=e.duplex),Object.assign(Object.assign({},o),t))};function Bs(i,e,t,s,o,l){return te(this,void 0,void 0,function*(){return new Promise((u,d)=>{i(t,Wy(e,s,o,l)).then(f=>{if(!f.ok)throw f;return s?.noResolveJson?f:f.json()}).then(f=>u(f)).catch(f=>Hy(f,d,s))})})}function Ds(i,e,t,s){return te(this,void 0,void 0,function*(){return Bs(i,"GET",e,t,s)})}function zt(i,e,t,s,o){return te(this,void 0,void 0,function*(){return Bs(i,"POST",e,s,o,t)})}function Zl(i,e,t,s,o){return te(this,void 0,void 0,function*(){return Bs(i,"PUT",e,s,o,t)})}function Gy(i,e,t,s){return te(this,void 0,void 0,function*(){return Bs(i,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),s)})}function yu(i,e,t,s,o){return te(this,void 0,void 0,function*(){return Bs(i,"DELETE",e,s,o,t)})}class Ky{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return te(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ue(e))return{data:null,error:e};throw e}})}}var im;class Jy{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[im]="BlobDownloadBuilder",this.promise=null}asStream(){return new Ky(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return te(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ue(e))return{data:null,error:e};throw e}})}}im=Symbol.toStringTag;const Yy={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Jh={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Qy{constructor(e,t={},s,o){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=s,this.fetch=vu(o)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,s,o){return te(this,void 0,void 0,function*(){try{let l;const u=Object.assign(Object.assign({},Jh),o);let d=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(u.upsert)});const f=u.metadata;typeof Blob<"u"&&s instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),f&&l.append("metadata",this.encodeMetadata(f)),l.append("",s)):typeof FormData<"u"&&s instanceof FormData?(l=s,l.has("cacheControl")||l.append("cacheControl",u.cacheControl),f&&!l.has("metadata")&&l.append("metadata",this.encodeMetadata(f))):(l=s,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType,f&&(d["x-metadata"]=this.toBase64(this.encodeMetadata(f))),(typeof ReadableStream<"u"&&l instanceof ReadableStream||l&&typeof l=="object"&&"pipe"in l&&typeof l.pipe=="function")&&!u.duplex&&(u.duplex="half")),o?.headers&&(d=Object.assign(Object.assign({},d),o.headers));const g=this._removeEmptyFolders(t),w=this._getFinalPath(g),_=yield(e=="PUT"?Zl:zt)(this.fetch,`${this.url}/object/${w}`,l,Object.assign({headers:d},u?.duplex?{duplex:u.duplex}:{}));return{data:{path:g,id:_.Id,fullPath:_.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ue(l))return{data:null,error:l};throw l}})}upload(e,t,s){return te(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,o){return te(this,void 0,void 0,function*(){const l=this._removeEmptyFolders(e),u=this._getFinalPath(l),d=new URL(this.url+`/object/upload/sign/${u}`);d.searchParams.set("token",t);try{let f;const g=Object.assign({upsert:Jh.upsert},o),w=Object.assign(Object.assign({},this.headers),{"x-upsert":String(g.upsert)});typeof Blob<"u"&&s instanceof Blob?(f=new FormData,f.append("cacheControl",g.cacheControl),f.append("",s)):typeof FormData<"u"&&s instanceof FormData?(f=s,f.append("cacheControl",g.cacheControl)):(f=s,w["cache-control"]=`max-age=${g.cacheControl}`,w["content-type"]=g.contentType);const _=yield Zl(this.fetch,d.toString(),f,{headers:w});return{data:{path:l,fullPath:_.Key},error:null}}catch(f){if(this.shouldThrowOnError)throw f;if(Ue(f))return{data:null,error:f};throw f}})}createSignedUploadUrl(e,t){return te(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const o=Object.assign({},this.headers);t?.upsert&&(o["x-upsert"]="true");const l=yield zt(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:o}),u=new URL(this.url+l.url),d=u.searchParams.get("token");if(!d)throw new gu("No token returned by API");return{data:{signedUrl:u.toString(),path:e,token:d},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ue(s))return{data:null,error:s};throw s}})}update(e,t,s){return te(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t,s){return te(this,void 0,void 0,function*(){try{return{data:yield zt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s?.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ue(o))return{data:null,error:o};throw o}})}copy(e,t,s){return te(this,void 0,void 0,function*(){try{return{data:{path:(yield zt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ue(o))return{data:null,error:o};throw o}})}createSignedUrl(e,t,s){return te(this,void 0,void 0,function*(){try{let o=this._getFinalPath(e),l=yield zt(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:t},s?.transform?{transform:s.transform}:{}),{headers:this.headers});const u=s?.download?`&download=${s.download===!0?"":s.download}`:"";return l={signedUrl:encodeURI(`${this.url}${l.signedURL}${u}`)},{data:l,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ue(o))return{data:null,error:o};throw o}})}createSignedUrls(e,t,s){return te(this,void 0,void 0,function*(){try{const o=yield zt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),l=s?.download?`&download=${s.download===!0?"":s.download}`:"";return{data:o.map(u=>Object.assign(Object.assign({},u),{signedUrl:u.signedURL?encodeURI(`${this.url}${u.signedURL}${l}`):null})),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ue(o))return{data:null,error:o};throw o}})}download(e,t){const o=typeof t?.transform<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString(t?.transform||{}),u=l?`?${l}`:"",d=this._getFinalPath(e),f=()=>Ds(this.fetch,`${this.url}/${o}/${d}${u}`,{headers:this.headers,noResolveJson:!0});return new Jy(f,this.shouldThrowOnError)}info(e){return te(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const s=yield Ds(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Xl(s),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ue(s))return{data:null,error:s};throw s}})}exists(e){return te(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield Gy(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ue(s)&&s instanceof Ql){const o=s.originalError;if([400,404].includes(o?.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,t){const s=this._getFinalPath(e),o=[],l=t?.download?`download=${t.download===!0?"":t.download}`:"";l!==""&&o.push(l);const d=typeof t?.transform<"u"?"render/image":"object",f=this.transformOptsToQueryString(t?.transform||{});f!==""&&o.push(f);let g=o.join("&");return g!==""&&(g=`?${g}`),{data:{publicUrl:encodeURI(`${this.url}/${d}/public/${s}${g}`)}}}remove(e){return te(this,void 0,void 0,function*(){try{return{data:yield yu(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ue(t))return{data:null,error:t};throw t}})}list(e,t,s){return te(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},Yy),t),{prefix:e||""});return{data:yield zt(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},s),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ue(o))return{data:null,error:o};throw o}})}listV2(e,t){return te(this,void 0,void 0,function*(){try{const s=Object.assign({},e);return{data:yield zt(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},t),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ue(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const om="2.85.0",am={"X-Client-Info":`storage-js/${om}`};class Xy{constructor(e,t={},s,o){this.shouldThrowOnError=!1;const l=new URL(e);o?.useNewHostname&&/supabase\.(co|in|red)$/.test(l.hostname)&&!l.hostname.includes("storage.supabase.")&&(l.hostname=l.hostname.replace("supabase.","storage.supabase.")),this.url=l.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},am),t),this.fetch=vu(s)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return te(this,void 0,void 0,function*(){try{const t=this.listBucketOptionsToQueryString(e);return{data:yield Ds(this.fetch,`${this.url}/bucket${t}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ue(t))return{data:null,error:t};throw t}})}getBucket(e){return te(this,void 0,void 0,function*(){try{return{data:yield Ds(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ue(t))return{data:null,error:t};throw t}})}createBucket(e){return te(this,arguments,void 0,function*(t,s={public:!1}){try{return{data:yield zt(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ue(o))return{data:null,error:o};throw o}})}updateBucket(e,t){return te(this,void 0,void 0,function*(){try{return{data:yield Zl(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ue(s))return{data:null,error:s};throw s}})}emptyBucket(e){return te(this,void 0,void 0,function*(){try{return{data:yield zt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ue(t))return{data:null,error:t};throw t}})}deleteBucket(e){return te(this,void 0,void 0,function*(){try{return{data:yield yu(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ue(t))return{data:null,error:t};throw t}})}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}}class Zy{constructor(e,t={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},am),t),this.fetch=vu(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return te(this,void 0,void 0,function*(){try{return{data:yield zt(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ue(t))return{data:null,error:t};throw t}})}listBuckets(e){return te(this,void 0,void 0,function*(){try{const t=new URLSearchParams;e?.limit!==void 0&&t.set("limit",e.limit.toString()),e?.offset!==void 0&&t.set("offset",e.offset.toString()),e?.sortColumn&&t.set("sortColumn",e.sortColumn),e?.sortOrder&&t.set("sortOrder",e.sortOrder),e?.search&&t.set("search",e.search);const s=t.toString(),o=s?`${this.url}/bucket?${s}`:`${this.url}/bucket`;return{data:yield Ds(this.fetch,o,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ue(t))return{data:null,error:t};throw t}})}deleteBucket(e){return te(this,void 0,void 0,function*(){try{return{data:yield yu(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ue(t))return{data:null,error:t};throw t}})}}const wu={"X-Client-Info":`storage-js/${om}`,"Content-Type":"application/json"};class lm extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Et(i){return typeof i=="object"&&i!==null&&"__isStorageVectorsError"in i}class Il extends lm{constructor(e,t,s){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class ew extends lm{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}}var Yh;(function(i){i.InternalError="InternalError",i.S3VectorConflictException="S3VectorConflictException",i.S3VectorNotFoundException="S3VectorNotFoundException",i.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",i.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",i.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Yh||(Yh={}));const xu=i=>i?(...e)=>i(...e):(...e)=>fetch(...e),tw=i=>{if(typeof i!="object"||i===null)return!1;const e=Object.getPrototypeOf(i);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},Qh=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),nw=(i,e,t)=>te(void 0,void 0,void 0,function*(){if(i&&typeof i=="object"&&"status"in i&&"ok"in i&&typeof i.status=="number"&&!t?.noResolveJson){const o=i.status||500,l=i;if(typeof l.json=="function")l.json().then(u=>{const d=u?.statusCode||u?.code||o+"";e(new Il(Qh(u),o,d))}).catch(()=>{const u=o+"",d=l.statusText||`HTTP ${o} error`;e(new Il(d,o,u))});else{const u=o+"",d=l.statusText||`HTTP ${o} error`;e(new Il(d,o,u))}}else e(new ew(Qh(i),i))}),rw=(i,e,t,s)=>{const o={method:i,headers:e?.headers||{}};return s?(tw(s)?(o.headers=Object.assign({"Content-Type":"application/json"},e?.headers),o.body=JSON.stringify(s)):o.body=s,Object.assign(Object.assign({},o),t)):o};function sw(i,e,t,s,o,l){return te(this,void 0,void 0,function*(){return new Promise((u,d)=>{i(t,rw(e,s,o,l)).then(f=>{if(!f.ok)throw f;if(s?.noResolveJson)return f;const g=f.headers.get("content-type");return!g||!g.includes("application/json")?{}:f.json()}).then(f=>u(f)).catch(f=>nw(f,d,s))})})}function St(i,e,t,s,o){return te(this,void 0,void 0,function*(){return sw(i,"POST",e,s,o,t)})}class iw{constructor(e,t={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},wu),t),this.fetch=xu(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return te(this,void 0,void 0,function*(){try{return{data:(yield St(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Et(t))return{data:null,error:t};throw t}})}getIndex(e,t){return te(this,void 0,void 0,function*(){try{return{data:yield St(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Et(s))return{data:null,error:s};throw s}})}listIndexes(e){return te(this,void 0,void 0,function*(){try{return{data:yield St(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Et(t))return{data:null,error:t};throw t}})}deleteIndex(e,t){return te(this,void 0,void 0,function*(){try{return{data:(yield St(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Et(s))return{data:null,error:s};throw s}})}}class ow{constructor(e,t={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},wu),t),this.fetch=xu(s)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return te(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield St(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Et(t))return{data:null,error:t};throw t}})}getVectors(e){return te(this,void 0,void 0,function*(){try{return{data:yield St(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Et(t))return{data:null,error:t};throw t}})}listVectors(e){return te(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield St(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Et(t))return{data:null,error:t};throw t}})}queryVectors(e){return te(this,void 0,void 0,function*(){try{return{data:yield St(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Et(t))return{data:null,error:t};throw t}})}deleteVectors(e){return te(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield St(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Et(t))return{data:null,error:t};throw t}})}}class aw{constructor(e,t={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},wu),t),this.fetch=xu(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return te(this,void 0,void 0,function*(){try{return{data:(yield St(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Et(t))return{data:null,error:t};throw t}})}getBucket(e){return te(this,void 0,void 0,function*(){try{return{data:yield St(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Et(t))return{data:null,error:t};throw t}})}listBuckets(){return te(this,arguments,void 0,function*(e={}){try{return{data:yield St(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Et(t))return{data:null,error:t};throw t}})}deleteBucket(e){return te(this,void 0,void 0,function*(){try{return{data:(yield St(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Et(t))return{data:null,error:t};throw t}})}}class lw extends aw{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new uw(this.url,this.headers,e,this.fetch)}createBucket(e){const t=Object.create(null,{createBucket:{get:()=>super.createBucket}});return te(this,void 0,void 0,function*(){return t.createBucket.call(this,e)})}getBucket(e){const t=Object.create(null,{getBucket:{get:()=>super.getBucket}});return te(this,void 0,void 0,function*(){return t.getBucket.call(this,e)})}listBuckets(){const e=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return te(this,arguments,void 0,function*(t={}){return e.listBuckets.call(this,t)})}deleteBucket(e){const t=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return te(this,void 0,void 0,function*(){return t.deleteBucket.call(this,e)})}}class uw extends iw{constructor(e,t,s,o){super(e,t,o),this.vectorBucketName=s}createIndex(e){const t=Object.create(null,{createIndex:{get:()=>super.createIndex}});return te(this,void 0,void 0,function*(){return t.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return te(this,arguments,void 0,function*(t={}){return e.listIndexes.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const t=Object.create(null,{getIndex:{get:()=>super.getIndex}});return te(this,void 0,void 0,function*(){return t.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const t=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return te(this,void 0,void 0,function*(){return t.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new cw(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class cw extends ow{constructor(e,t,s,o,l){super(e,t,l),this.vectorBucketName=s,this.indexName=o}putVectors(e){const t=Object.create(null,{putVectors:{get:()=>super.putVectors}});return te(this,void 0,void 0,function*(){return t.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const t=Object.create(null,{getVectors:{get:()=>super.getVectors}});return te(this,void 0,void 0,function*(){return t.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return te(this,arguments,void 0,function*(t={}){return e.listVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const t=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return te(this,void 0,void 0,function*(){return t.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const t=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return te(this,void 0,void 0,function*(){return t.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class dw extends Xy{constructor(e,t={},s,o){super(e,t,s,o)}from(e){return new Qy(this.url,this.headers,e,this.fetch)}get vectors(){return new lw(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Zy(this.url+"/iceberg",this.headers,this.fetch)}}const hw="2.85.0";let Rs="";typeof Deno<"u"?Rs="deno":typeof document<"u"?Rs="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Rs="react-native":Rs="node";const fw={"X-Client-Info":`supabase-js-${Rs}/${hw}`},pw={headers:fw},mw={schema:"public"},gw={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},vw={},yw=i=>i?(...e)=>i(...e):(...e)=>fetch(...e),ww=()=>Headers,xw=(i,e,t)=>{const s=yw(t),o=ww();return async(l,u)=>{var d;const f=(d=await e())!==null&&d!==void 0?d:i;let g=new o(u?.headers);return g.has("apikey")||g.set("apikey",i),g.has("Authorization")||g.set("Authorization",`Bearer ${f}`),s(l,Object.assign(Object.assign({},u),{headers:g}))}};function _w(i){return i.endsWith("/")?i:i+"/"}function bw(i,e){var t,s;const{db:o,auth:l,realtime:u,global:d}=i,{db:f,auth:g,realtime:w,global:_}=e,b={db:Object.assign(Object.assign({},f),o),auth:Object.assign(Object.assign({},g),l),realtime:Object.assign(Object.assign({},w),u),storage:{},global:Object.assign(Object.assign(Object.assign({},_),d),{headers:Object.assign(Object.assign({},(t=_?.headers)!==null&&t!==void 0?t:{}),(s=d?.headers)!==null&&s!==void 0?s:{})}),accessToken:async()=>""};return i.accessToken?b.accessToken=i.accessToken:delete b.accessToken,b}function kw(i){const e=i?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(_w(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const um="2.85.0",Or=30*1e3,eu=3,jl=eu*Or,Ew="http://localhost:9999",Sw="supabase.auth.token",Cw={"X-Client-Info":`gotrue-js/${um}`},tu="X-Supabase-Api-Version",cm={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Tw=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Nw=600*1e3;class Us extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function oe(i){return typeof i=="object"&&i!==null&&"__isAuthError"in i}class Rw extends Us{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}function Pw(i){return oe(i)&&i.name==="AuthApiError"}class Zn extends Us{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class jn extends Us{constructor(e,t,s,o){super(e,s,o),this.name=t,this.status=s}}class kt extends jn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Aw(i){return oe(i)&&i.name==="AuthSessionMissingError"}class Rr extends jn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ao extends jn{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class lo extends jn{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Iw(i){return oe(i)&&i.name==="AuthImplicitGrantRedirectError"}class Xh extends jn{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class nu extends jn{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Ol(i){return oe(i)&&i.name==="AuthRetryableFetchError"}class Zh extends jn{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}class ru extends jn{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const _o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),ef=` 	
\r=`.split(""),jw=(()=>{const i=new Array(128);for(let e=0;e<i.length;e+=1)i[e]=-1;for(let e=0;e<ef.length;e+=1)i[ef[e].charCodeAt(0)]=-2;for(let e=0;e<_o.length;e+=1)i[_o[e].charCodeAt(0)]=e;return i})();function tf(i,e,t){if(i!==null)for(e.queue=e.queue<<8|i,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(_o[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(_o[s]),e.queuedBits-=6}}function dm(i,e,t){const s=jw[i];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(i)}"`)}}function nf(i){const e=[],t=u=>{e.push(String.fromCodePoint(u))},s={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},l=u=>{Lw(u,s,t)};for(let u=0;u<i.length;u+=1)dm(i.charCodeAt(u),o,l);return e.join("")}function Ow(i,e){if(i<=127){e(i);return}else if(i<=2047){e(192|i>>6),e(128|i&63);return}else if(i<=65535){e(224|i>>12),e(128|i>>6&63),e(128|i&63);return}else if(i<=1114111){e(240|i>>18),e(128|i>>12&63),e(128|i>>6&63),e(128|i&63);return}throw new Error(`Unrecognized Unicode codepoint: ${i.toString(16)}`)}function Mw(i,e){for(let t=0;t<i.length;t+=1){let s=i.charCodeAt(t);if(s>55295&&s<=56319){const o=(s-55296)*1024&65535;s=(i.charCodeAt(t+1)-56320&65535|o)+65536,t+=1}Ow(s,e)}}function Lw(i,e,t){if(e.utf8seq===0){if(i<=127){t(i);return}for(let s=1;s<6;s+=1)if((i>>7-s&1)===0){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=i&31;else if(e.utf8seq===3)e.codepoint=i&15;else if(e.utf8seq===4)e.codepoint=i&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(i<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|i&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function Lr(i){const e=[],t={queue:0,queuedBits:0},s=o=>{e.push(o)};for(let o=0;o<i.length;o+=1)dm(i.charCodeAt(o),t,s);return new Uint8Array(e)}function Dw(i){const e=[];return Mw(i,t=>e.push(t)),new Uint8Array(e)}function er(i){const e=[],t={queue:0,queuedBits:0},s=o=>{e.push(o)};return i.forEach(o=>tf(o,t,s)),tf(null,t,s),e.join("")}function Uw(i){return Math.round(Date.now()/1e3)+i}function $w(){return Symbol("auth-callback")}const nt=()=>typeof window<"u"&&typeof document<"u",Kn={tested:!1,writable:!1},hm=()=>{if(!nt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Kn.tested)return Kn.writable;const i=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(i,i),globalThis.localStorage.removeItem(i),Kn.tested=!0,Kn.writable=!0}catch{Kn.tested=!0,Kn.writable=!1}return Kn.writable};function Fw(i){const e={},t=new URL(i);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((o,l)=>{e[l]=o})}catch{}return t.searchParams.forEach((s,o)=>{e[o]=s}),e}const fm=i=>i?(...e)=>i(...e):(...e)=>fetch(...e),Bw=i=>typeof i=="object"&&i!==null&&"status"in i&&"ok"in i&&"json"in i&&typeof i.json=="function",Mr=async(i,e,t)=>{await i.setItem(e,JSON.stringify(t))},Jn=async(i,e)=>{const t=await i.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Sn=async(i,e)=>{await i.removeItem(e)};class Ro{constructor(){this.promise=new Ro.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Ro.promiseConstructor=Promise;function Ml(i){const e=i.split(".");if(e.length!==3)throw new ru("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!Tw.test(e[s]))throw new ru("JWT not in base64url format");return{header:JSON.parse(nf(e[0])),payload:JSON.parse(nf(e[1])),signature:Lr(e[2]),raw:{header:e[0],payload:e[1]}}}async function Vw(i){return await new Promise(e=>{setTimeout(()=>e(null),i)})}function zw(i,e){return new Promise((s,o)=>{(async()=>{for(let l=0;l<1/0;l++)try{const u=await i(l);if(!e(l,null,u)){s(u);return}}catch(u){if(!e(l,u)){o(u);return}}})()})}function qw(i){return("0"+i.toString(16)).substr(-2)}function Hw(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=t.length;let o="";for(let l=0;l<56;l++)o+=t.charAt(Math.floor(Math.random()*s));return o}return crypto.getRandomValues(e),Array.from(e,qw).join("")}async function Ww(i){const t=new TextEncoder().encode(i),s=await crypto.subtle.digest("SHA-256",t),o=new Uint8Array(s);return Array.from(o).map(l=>String.fromCharCode(l)).join("")}async function Gw(i){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),i;const t=await Ww(i);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Pr(i,e,t=!1){const s=Hw();let o=s;t&&(o+="/PASSWORD_RECOVERY"),await Mr(i,`${e}-code-verifier`,o);const l=await Gw(s);return[l,s===l?"plain":"s256"]}const Kw=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Jw(i){const e=i.headers.get(tu);if(!e||!e.match(Kw))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Yw(i){if(!i)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(i<=e)throw new Error("JWT has expired")}function Qw(i){switch(i){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Xw=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ar(i){if(!Xw.test(i))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Ll(){const i={};return new Proxy(i,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const s=t.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Zw(i,e){return new Proxy(i,{get:(t,s,o)=>{if(s==="__isInsecureUserWarningProxy")return!0;if(typeof s=="symbol"){const l=s.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)"||l==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(t,s,o)}return!e.value&&typeof s=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(t,s,o)}})}function rf(i){return JSON.parse(JSON.stringify(i))}const Yn=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),ex=[502,503,504];async function sf(i){var e;if(!Bw(i))throw new nu(Yn(i),0);if(ex.includes(i.status))throw new nu(Yn(i),i.status);let t;try{t=await i.json()}catch(l){throw new Zn(Yn(l),l)}let s;const o=Jw(i);if(o&&o.getTime()>=cm["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?s=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(s=t.error_code),s){if(s==="weak_password")throw new Zh(Yn(t),i.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new kt}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((l,u)=>l&&typeof u=="string",!0))throw new Zh(Yn(t),i.status,t.weak_password.reasons);throw new Rw(Yn(t),i.status||500,s)}const tx=(i,e,t,s)=>{const o={method:i,headers:e?.headers||{}};return i==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),o.body=JSON.stringify(s),Object.assign(Object.assign({},o),t))};async function he(i,e,t,s){var o;const l=Object.assign({},s?.headers);l[tu]||(l[tu]=cm["2024-01-01"].name),s?.jwt&&(l.Authorization=`Bearer ${s.jwt}`);const u=(o=s?.query)!==null&&o!==void 0?o:{};s?.redirectTo&&(u.redirect_to=s.redirectTo);const d=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",f=await nx(i,e,t+d,{headers:l,noResolveJson:s?.noResolveJson},{},s?.body);return s?.xform?s?.xform(f):{data:Object.assign({},f),error:null}}async function nx(i,e,t,s,o,l){const u=tx(e,s,o,l);let d;try{d=await i(t,Object.assign({},u))}catch(f){throw console.error(f),new nu(Yn(f),0)}if(d.ok||await sf(d),s?.noResolveJson)return d;try{return await d.json()}catch(f){await sf(f)}}function Vt(i){var e;let t=null;ix(i)&&(t=Object.assign({},i),i.expires_at||(t.expires_at=Uw(i.expires_in)));const s=(e=i.user)!==null&&e!==void 0?e:i;return{data:{session:t,user:s},error:null}}function of(i){const e=Vt(i);return!e.error&&i.weak_password&&typeof i.weak_password=="object"&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.message&&typeof i.weak_password.message=="string"&&i.weak_password.reasons.reduce((t,s)=>t&&typeof s=="string",!0)&&(e.data.weak_password=i.weak_password),e}function Tn(i){var e;return{data:{user:(e=i.user)!==null&&e!==void 0?e:i},error:null}}function rx(i){return{data:i,error:null}}function sx(i){const{action_link:e,email_otp:t,hashed_token:s,redirect_to:o,verification_type:l}=i,u=Br(i,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),d={action_link:e,email_otp:t,hashed_token:s,redirect_to:o,verification_type:l},f=Object.assign({},u);return{data:{properties:d,user:f},error:null}}function af(i){return i}function ix(i){return i.access_token&&i.refresh_token&&i.expires_in}const Dl=["global","local","others"];class ox{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=fm(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=Dl[0]){if(Dl.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Dl.join(", ")}`);try{return await he(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(oe(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await he(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Tn})}catch(s){if(oe(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=Br(e,["options"]),o=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(o.new_email=s?.newEmail,delete o.newEmail),await he(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:sx,redirectTo:t?.redirectTo})}catch(t){if(oe(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await he(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Tn})}catch(t){if(oe(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,o,l,u,d,f;try{const g={nextPage:null,lastPage:0,total:0},w=await he(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(l=(o=e?.perPage)===null||o===void 0?void 0:o.toString())!==null&&l!==void 0?l:""},xform:af});if(w.error)throw w.error;const _=await w.json(),b=(u=w.headers.get("x-total-count"))!==null&&u!==void 0?u:0,k=(f=(d=w.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&f!==void 0?f:[];return k.length>0&&(k.forEach(T=>{const N=parseInt(T.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(T.split(";")[1].split("=")[1]);g[`${C}Page`]=N}),g.total=parseInt(b)),{data:Object.assign(Object.assign({},_),g),error:null}}catch(g){if(oe(g))return{data:{users:[]},error:g};throw g}}async getUserById(e){Ar(e);try{return await he(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Tn})}catch(t){if(oe(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Ar(e);try{return await he(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Tn})}catch(s){if(oe(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){Ar(e);try{return await he(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Tn})}catch(s){if(oe(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){Ar(e.userId);try{const{data:t,error:s}=await he(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:t,error:s}}catch(t){if(oe(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Ar(e.userId),Ar(e.id);try{return{data:await he(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(oe(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,s,o,l,u,d,f;try{const g={nextPage:null,lastPage:0,total:0},w=await he(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(l=(o=e?.perPage)===null||o===void 0?void 0:o.toString())!==null&&l!==void 0?l:""},xform:af});if(w.error)throw w.error;const _=await w.json(),b=(u=w.headers.get("x-total-count"))!==null&&u!==void 0?u:0,k=(f=(d=w.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&f!==void 0?f:[];return k.length>0&&(k.forEach(T=>{const N=parseInt(T.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(T.split(";")[1].split("=")[1]);g[`${C}Page`]=N}),g.total=parseInt(b)),{data:Object.assign(Object.assign({},_),g),error:null}}catch(g){if(oe(g))return{data:{clients:[]},error:g};throw g}}async _createOAuthClient(e){try{return await he(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(oe(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await he(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(oe(t))return{data:null,error:t};throw t}}async _updateOAuthClient(e,t){try{return await he(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:t,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(oe(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(e){try{return await he(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(oe(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await he(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(oe(t))return{data:null,error:t};throw t}}}function lf(i={}){return{getItem:e=>i[e]||null,setItem:(e,t)=>{i[e]=t},removeItem:e=>{delete i[e]}}}const Ir={debug:!!(globalThis&&hm()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class pm extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class ax extends pm{}async function lx(i,e,t){Ir.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",i,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),Ir.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",i)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(i,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async o=>{if(o){Ir.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",i,o.name);try{return await t()}finally{Ir.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",i,o.name)}}else{if(e===0)throw Ir.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",i),new ax(`Acquiring an exclusive Navigator LockManager lock "${i}" immediately failed`);if(Ir.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}function ux(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function mm(i){if(!/^0x[a-fA-F0-9]{40}$/.test(i))throw new Error(`@supabase/auth-js: Address "${i}" is invalid.`);return i.toLowerCase()}function cx(i){return parseInt(i,16)}function dx(i){const e=new TextEncoder().encode(i);return"0x"+Array.from(e,s=>s.toString(16).padStart(2,"0")).join("")}function hx(i){var e;const{chainId:t,domain:s,expirationTime:o,issuedAt:l=new Date,nonce:u,notBefore:d,requestId:f,resources:g,scheme:w,uri:_,version:b}=i;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(u&&u.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${u}`);if(!_)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(b!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${b}`);if(!((e=i.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${i.statement}`)}const k=mm(i.address),T=w?`${w}://${s}`:s,N=i.statement?`${i.statement}
`:"",C=`${T} wants you to sign in with your Ethereum account:
${k}

${N}`;let I=`URI: ${_}
Version: ${b}
Chain ID: ${t}${u?`
Nonce: ${u}`:""}
Issued At: ${l.toISOString()}`;if(o&&(I+=`
Expiration Time: ${o.toISOString()}`),d&&(I+=`
Not Before: ${d.toISOString()}`),f&&(I+=`
Request ID: ${f}`),g){let S=`
Resources:`;for(const P of g){if(!P||typeof P!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${P}`);S+=`
- ${P}`}I+=S}return`${C}
${I}`}class We extends Error{constructor({message:e,code:t,cause:s,name:o}){var l;super(e,{cause:s}),this.__isWebAuthnError=!0,this.name=(l=o??(s instanceof Error?s.name:void 0))!==null&&l!==void 0?l:"Unknown Error",this.code=t}}class bo extends We{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function fx({error:i,options:e}){var t,s,o;const{publicKey:l}=e;if(!l)throw Error("options was missing required publicKey property");if(i.name==="AbortError"){if(e.signal instanceof AbortSignal)return new We({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:i})}else if(i.name==="ConstraintError"){if(((t=l.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new We({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:i});if(e.mediation==="conditional"&&((s=l.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new We({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:i});if(((o=l.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new We({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:i})}else{if(i.name==="InvalidStateError")return new We({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:i});if(i.name==="NotAllowedError")return new We({message:i.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i});if(i.name==="NotSupportedError")return l.pubKeyCredParams.filter(d=>d.type==="public-key").length===0?new We({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:i}):new We({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:i});if(i.name==="SecurityError"){const u=window.location.hostname;if(gm(u)){if(l.rp.id!==u)return new We({message:`The RP ID "${l.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:i})}else return new We({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:i})}else if(i.name==="TypeError"){if(l.user.id.byteLength<1||l.user.id.byteLength>64)return new We({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:i})}else if(i.name==="UnknownError")return new We({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:i})}return new We({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i})}function px({error:i,options:e}){const{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if(i.name==="AbortError"){if(e.signal instanceof AbortSignal)return new We({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:i})}else{if(i.name==="NotAllowedError")return new We({message:i.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i});if(i.name==="SecurityError"){const s=window.location.hostname;if(gm(s)){if(t.rpId!==s)return new We({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:i})}else return new We({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:i})}else if(i.name==="UnknownError")return new We({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:i})}return new We({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i})}class mx{createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const gx=new mx;function vx(i){if(!i)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(i);const{challenge:e,user:t,excludeCredentials:s}=i,o=Br(i,["challenge","user","excludeCredentials"]),l=Lr(e).buffer,u=Object.assign(Object.assign({},t),{id:Lr(t.id).buffer}),d=Object.assign(Object.assign({},o),{challenge:l,user:u});if(s&&s.length>0){d.excludeCredentials=new Array(s.length);for(let f=0;f<s.length;f++){const g=s[f];d.excludeCredentials[f]=Object.assign(Object.assign({},g),{id:Lr(g.id).buffer,type:g.type||"public-key",transports:g.transports})}}return d}function yx(i){if(!i)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(i);const{challenge:e,allowCredentials:t}=i,s=Br(i,["challenge","allowCredentials"]),o=Lr(e).buffer,l=Object.assign(Object.assign({},s),{challenge:o});if(t&&t.length>0){l.allowCredentials=new Array(t.length);for(let u=0;u<t.length;u++){const d=t[u];l.allowCredentials[u]=Object.assign(Object.assign({},d),{id:Lr(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return l}function wx(i){var e;if("toJSON"in i&&typeof i.toJSON=="function")return i.toJSON();const t=i;return{id:i.id,rawId:i.id,response:{attestationObject:er(new Uint8Array(i.response.attestationObject)),clientDataJSON:er(new Uint8Array(i.response.clientDataJSON))},type:"public-key",clientExtensionResults:i.getClientExtensionResults(),authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function xx(i){var e;if("toJSON"in i&&typeof i.toJSON=="function")return i.toJSON();const t=i,s=i.getClientExtensionResults(),o=i.response;return{id:i.id,rawId:i.id,response:{authenticatorData:er(new Uint8Array(o.authenticatorData)),clientDataJSON:er(new Uint8Array(o.clientDataJSON)),signature:er(new Uint8Array(o.signature)),userHandle:o.userHandle?er(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function gm(i){return i==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(i)}function uf(){var i,e;return!!(nt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((i=navigator?.credentials)===null||i===void 0?void 0:i.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function _x(i){try{const e=await navigator.credentials.create(i);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new bo("Browser returned unexpected credential type",e)}:{data:null,error:new bo("Empty credential response",e)}}catch(e){return{data:null,error:fx({error:e,options:i})}}}async function bx(i){try{const e=await navigator.credentials.get(i);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new bo("Browser returned unexpected credential type",e)}:{data:null,error:new bo("Empty credential response",e)}}catch(e){return{data:null,error:px({error:e,options:i})}}}const kx={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Ex={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function ko(...i){const e=o=>o!==null&&typeof o=="object"&&!Array.isArray(o),t=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),s={};for(const o of i)if(o)for(const l in o){const u=o[l];if(u!==void 0)if(Array.isArray(u))s[l]=u;else if(t(u))s[l]=u;else if(e(u)){const d=s[l];e(d)?s[l]=ko(d,u):s[l]=ko(u)}else s[l]=u}return s}function Sx(i,e){return ko(kx,i,e||{})}function Cx(i,e){return ko(Ex,i,e||{})}class Tx{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:s,signal:o},l){try{const{data:u,error:d}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!u)return{data:null,error:d};const f=o??gx.createNewAbortSignal();if(u.webauthn.type==="create"){const{user:g}=u.webauthn.credential_options.publicKey;g.name||(g.name=`${g.id}:${s}`),g.displayName||(g.displayName=g.name)}switch(u.webauthn.type){case"create":{const g=Sx(u.webauthn.credential_options.publicKey,l?.create),{data:w,error:_}=await _x({publicKey:g,signal:f});return w?{data:{factorId:e,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:w}},error:null}:{data:null,error:_}}case"request":{const g=Cx(u.webauthn.credential_options.publicKey,l?.request),{data:w,error:_}=await bx(Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:g,signal:f}));return w?{data:{factorId:e,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:w}},error:null}:{data:null,error:_}}}}catch(u){return oe(u)?{data:null,error:u}:{data:null,error:new Zn("Unexpected error in challenge",u)}}}async _verify({challengeId:e,factorId:t,webauthn:s}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:s})}async _authenticate({factorId:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},l){if(!t)return{data:null,error:new Us("rpId is required for WebAuthn authentication")};try{if(!uf())return{data:null,error:new Zn("Browser does not support WebAuthn",null)};const{data:u,error:d}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:s},signal:o},{request:l});if(!u)return{data:null,error:d};const{webauthn:f}=u;return this._verify({factorId:e,challengeId:u.challengeId,webauthn:{type:f.type,rpId:t,rpOrigins:s,credential_response:f.credential_response}})}catch(u){return oe(u)?{data:null,error:u}:{data:null,error:new Zn("Unexpected error in authenticate",u)}}}async _register({friendlyName:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},l){if(!t)return{data:null,error:new Us("rpId is required for WebAuthn registration")};try{if(!uf())return{data:null,error:new Zn("Browser does not support WebAuthn",null)};const{data:u,error:d}=await this._enroll({friendlyName:e});if(!u)return await this.client.mfa.listFactors().then(w=>{var _;return(_=w.data)===null||_===void 0?void 0:_.all.find(b=>b.factor_type==="webauthn"&&b.friendly_name===e&&b.status!=="unverified")}).then(w=>w?this.client.mfa.unenroll({factorId:w?.id}):void 0),{data:null,error:d};const{data:f,error:g}=await this._challenge({factorId:u.id,friendlyName:u.friendly_name,webauthn:{rpId:t,rpOrigins:s},signal:o},{create:l});return f?this._verify({factorId:u.id,challengeId:f.challengeId,webauthn:{rpId:t,rpOrigins:s,type:f.webauthn.type,credential_response:f.webauthn.credential_response}}):{data:null,error:g}}catch(u){return oe(u)?{data:null,error:u}:{data:null,error:new Zn("Unexpected error in register",u)}}}}ux();const Nx={url:Ew,storageKey:Sw,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Cw,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function cf(i,e,t){return await t()}const jr={};class $s{get jwks(){var e,t;return(t=(e=jr[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){jr[this.storageKey]=Object.assign(Object.assign({},jr[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=jr[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){jr[this.storageKey]=Object.assign(Object.assign({},jr[this.storageKey]),{cachedAt:e})}constructor(e){var t,s,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const l=Object.assign(Object.assign({},Nx),e);if(this.storageKey=l.storageKey,this.instanceID=(t=$s.nextInstanceID[this.storageKey])!==null&&t!==void 0?t:0,$s.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.instanceID>0&&nt()){const u=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(u),this.logDebugMessages&&console.trace(u)}if(this.persistSession=l.persistSession,this.autoRefreshToken=l.autoRefreshToken,this.admin=new ox({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=fm(l.fetch),this.lock=l.lock||cf,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,this.throwOnError=l.throwOnError,l.lock?this.lock=l.lock:nt()&&(!((s=globalThis?.navigator)===null||s===void 0)&&s.locks)?this.lock=lx:this.lock=cf,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Tx(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:hm()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=lf(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=lf(this.memoryStorage)),nt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u),await this._notifyAllSubscribers(u.data.event,u.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${um}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let t={},s="none";if(nt()&&(t=Fw(window.location.href),this._isImplicitGrantCallback(t)?s="implicit":await this._isPKCECallback(t)&&(s="pkce")),nt()&&this.detectSessionInUrl&&s!=="none"){const{data:o,error:l}=await this._getSessionFromURL(t,s);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),Iw(l)){const f=(e=l.details)===null||e===void 0?void 0:e.code;if(f==="identity_already_exists"||f==="identity_not_found"||f==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:u,redirectType:d}=o;return this._debug("#_initialize()","detected session in URL",u,"redirect type",d),await this._saveSession(u),setTimeout(async()=>{d==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return oe(t)?this._returnResult({error:t}):this._returnResult({error:new Zn("Unexpected error during initialization",t)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,s,o;try{const l=await he(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(t=e?.options)===null||t===void 0?void 0:t.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(o=e?.options)===null||o===void 0?void 0:o.captchaToken}},xform:Vt}),{data:u,error:d}=l;if(d||!u)return this._returnResult({data:{user:null,session:null},error:d});const f=u.session,g=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",f)),this._returnResult({data:{user:g,session:f},error:null})}catch(l){if(oe(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signUp(e){var t,s,o;try{let l;if("email"in e){const{email:w,password:_,options:b}=e;let k=null,T=null;this.flowType==="pkce"&&([k,T]=await Pr(this.storage,this.storageKey)),l=await he(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:b?.emailRedirectTo,body:{email:w,password:_,data:(t=b?.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:b?.captchaToken},code_challenge:k,code_challenge_method:T},xform:Vt})}else if("phone"in e){const{phone:w,password:_,options:b}=e;l=await he(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:w,password:_,data:(s=b?.data)!==null&&s!==void 0?s:{},channel:(o=b?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:b?.captchaToken}},xform:Vt})}else throw new ao("You must provide either an email or phone number and a password");const{data:u,error:d}=l;if(d||!u)return this._returnResult({data:{user:null,session:null},error:d});const f=u.session,g=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",f)),this._returnResult({data:{user:g,session:f},error:null})}catch(l){if(oe(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithPassword(e){try{let t;if("email"in e){const{email:l,password:u,options:d}=e;t=await he(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:u,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:of})}else if("phone"in e){const{phone:l,password:u,options:d}=e;t=await he(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:u,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:of})}else throw new ao("You must provide either an email or phone number and a password");const{data:s,error:o}=t;if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!s||!s.session||!s.user){const l=new Rr;return this._returnResult({data:{user:null,session:null},error:l})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:o})}catch(t){if(oe(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOAuth(e){var t,s,o,l;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(o=e.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(l=e.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,s,o,l,u,d,f,g,w,_,b;let k,T;if("message"in e)k=e.message,T=e.signature;else{const{chain:N,wallet:C,statement:I,options:S}=e;let P;if(nt())if(typeof C=="object")P=C;else{const ve=window;if("ethereum"in ve&&typeof ve.ethereum=="object"&&"request"in ve.ethereum&&typeof ve.ethereum.request=="function")P=ve.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!S?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");P=C}const L=new URL((t=S?.url)!==null&&t!==void 0?t:window.location.href),W=await P.request({method:"eth_requestAccounts"}).then(ve=>ve).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!W||W.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const H=mm(W[0]);let Q=(s=S?.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!Q){const ve=await P.request({method:"eth_chainId"});Q=cx(ve)}const se={domain:L.host,address:H,statement:I,uri:L.href,version:"1",chainId:Q,nonce:(o=S?.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(u=(l=S?.signInWithEthereum)===null||l===void 0?void 0:l.issuedAt)!==null&&u!==void 0?u:new Date,expirationTime:(d=S?.signInWithEthereum)===null||d===void 0?void 0:d.expirationTime,notBefore:(f=S?.signInWithEthereum)===null||f===void 0?void 0:f.notBefore,requestId:(g=S?.signInWithEthereum)===null||g===void 0?void 0:g.requestId,resources:(w=S?.signInWithEthereum)===null||w===void 0?void 0:w.resources};k=hx(se),T=await P.request({method:"personal_sign",params:[dx(k),H]})}try{const{data:N,error:C}=await he(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:k,signature:T},!((_=e.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(b=e.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:Vt});if(C)throw C;if(!N||!N.session||!N.user){const I=new Rr;return this._returnResult({data:{user:null,session:null},error:I})}return N.session&&(await this._saveSession(N.session),await this._notifyAllSubscribers("SIGNED_IN",N.session)),this._returnResult({data:Object.assign({},N),error:C})}catch(N){if(oe(N))return this._returnResult({data:{user:null,session:null},error:N});throw N}}async signInWithSolana(e){var t,s,o,l,u,d,f,g,w,_,b,k;let T,N;if("message"in e)T=e.message,N=e.signature;else{const{chain:C,wallet:I,statement:S,options:P}=e;let L;if(nt())if(typeof I=="object")L=I;else{const H=window;if("solana"in H&&typeof H.solana=="object"&&("signIn"in H.solana&&typeof H.solana.signIn=="function"||"signMessage"in H.solana&&typeof H.solana.signMessage=="function"))L=H.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof I!="object"||!P?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");L=I}const W=new URL((t=P?.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in L&&L.signIn){const H=await L.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},P?.signInWithSolana),{version:"1",domain:W.host,uri:W.href}),S?{statement:S}:null));let Q;if(Array.isArray(H)&&H[0]&&typeof H[0]=="object")Q=H[0];else if(H&&typeof H=="object"&&"signedMessage"in H&&"signature"in H)Q=H;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in Q&&"signature"in Q&&(typeof Q.signedMessage=="string"||Q.signedMessage instanceof Uint8Array)&&Q.signature instanceof Uint8Array)T=typeof Q.signedMessage=="string"?Q.signedMessage:new TextDecoder().decode(Q.signedMessage),N=Q.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in L)||typeof L.signMessage!="function"||!("publicKey"in L)||typeof L!="object"||!L.publicKey||!("toBase58"in L.publicKey)||typeof L.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");T=[`${W.host} wants you to sign in with your Solana account:`,L.publicKey.toBase58(),...S?["",S,""]:[""],"Version: 1",`URI: ${W.href}`,`Issued At: ${(o=(s=P?.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((l=P?.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${P.signInWithSolana.notBefore}`]:[],...!((u=P?.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${P.signInWithSolana.expirationTime}`]:[],...!((d=P?.signInWithSolana)===null||d===void 0)&&d.chainId?[`Chain ID: ${P.signInWithSolana.chainId}`]:[],...!((f=P?.signInWithSolana)===null||f===void 0)&&f.nonce?[`Nonce: ${P.signInWithSolana.nonce}`]:[],...!((g=P?.signInWithSolana)===null||g===void 0)&&g.requestId?[`Request ID: ${P.signInWithSolana.requestId}`]:[],...!((_=(w=P?.signInWithSolana)===null||w===void 0?void 0:w.resources)===null||_===void 0)&&_.length?["Resources",...P.signInWithSolana.resources.map(Q=>`- ${Q}`)]:[]].join(`
`);const H=await L.signMessage(new TextEncoder().encode(T),"utf8");if(!H||!(H instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");N=H}}try{const{data:C,error:I}=await he(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:T,signature:er(N)},!((b=e.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(k=e.options)===null||k===void 0?void 0:k.captchaToken}}:null),xform:Vt});if(I)throw I;if(!C||!C.session||!C.user){const S=new Rr;return this._returnResult({data:{user:null,session:null},error:S})}return C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),this._returnResult({data:Object.assign({},C),error:I})}catch(C){if(oe(C))return this._returnResult({data:{user:null,session:null},error:C});throw C}}async _exchangeCodeForSession(e){const t=await Jn(this.storage,`${this.storageKey}-code-verifier`),[s,o]=(t??"").split("/");try{const{data:l,error:u}=await he(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:Vt});if(await Sn(this.storage,`${this.storageKey}-code-verifier`),u)throw u;if(!l||!l.session||!l.user){const d=new Rr;return this._returnResult({data:{user:null,session:null,redirectType:null},error:d})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign(Object.assign({},l),{redirectType:o??null}),error:u})}catch(l){if(oe(l))return this._returnResult({data:{user:null,session:null,redirectType:null},error:l});throw l}}async signInWithIdToken(e){try{const{options:t,provider:s,token:o,access_token:l,nonce:u}=e,d=await he(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:o,access_token:l,nonce:u,gotrue_meta_security:{captcha_token:t?.captchaToken}},xform:Vt}),{data:f,error:g}=d;if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!f||!f.session||!f.user){const w=new Rr;return this._returnResult({data:{user:null,session:null},error:w})}return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),this._returnResult({data:f,error:g})}catch(t){if(oe(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOtp(e){var t,s,o,l,u;try{if("email"in e){const{email:d,options:f}=e;let g=null,w=null;this.flowType==="pkce"&&([g,w]=await Pr(this.storage,this.storageKey));const{error:_}=await he(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:(t=f?.data)!==null&&t!==void 0?t:{},create_user:(s=f?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:g,code_challenge_method:w},redirectTo:f?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:_})}if("phone"in e){const{phone:d,options:f}=e,{data:g,error:w}=await he(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:d,data:(o=f?.data)!==null&&o!==void 0?o:{},create_user:(l=f?.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:f?.captchaToken},channel:(u=f?.channel)!==null&&u!==void 0?u:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:g?.message_id},error:w})}throw new ao("You must provide either an email or phone number.")}catch(d){if(oe(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async verifyOtp(e){var t,s;try{let o,l;"options"in e&&(o=(t=e.options)===null||t===void 0?void 0:t.redirectTo,l=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:u,error:d}=await he(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:l}}),redirectTo:o,xform:Vt});if(d)throw d;if(!u)throw new Error("An error occurred on token verification.");const f=u.session,g=u.user;return f?.access_token&&(await this._saveSession(f),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",f)),this._returnResult({data:{user:g,session:f},error:null})}catch(o){if(oe(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithSSO(e){var t,s,o,l,u;try{let d=null,f=null;this.flowType==="pkce"&&([d,f]=await Pr(this.storage,this.storageKey));const g=await he(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&s!==void 0?s:void 0}),!((o=e?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:d,code_challenge_method:f}),headers:this.headers,xform:rx});return!((l=g.data)===null||l===void 0)&&l.url&&nt()&&!(!((u=e.options)===null||u===void 0)&&u.skipBrowserRedirect)&&window.location.assign(g.data.url),this._returnResult(g)}catch(d){if(oe(d))return this._returnResult({data:null,error:d});throw d}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new kt;const{error:o}=await he(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:o})})}catch(e){if(oe(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:s,type:o,options:l}=e,{error:u}=await he(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:o,gotrue_meta_security:{captcha_token:l?.captchaToken}},redirectTo:l?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:u})}else if("phone"in e){const{phone:s,type:o,options:l}=e,{data:u,error:d}=await he(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:o,gotrue_meta_security:{captcha_token:l?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:u?.message_id},error:d})}throw new ao("You must provide either an email or phone number and a type")}catch(t){if(oe(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await s,await t()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=t();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Jn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<jl:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const u=await Jn(this.userStorage,this.storageKey+"-user");u?.user?e.user=u.user:e.user=Ll()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const u={value:this.suppressGetSessionWarning};e.user=Zw(e.user,u),u.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:o,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{session:null},error:l}):this._returnResult({data:{session:o},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await he(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Tn}):await this._useSession(async t=>{var s,o,l;const{data:u,error:d}=t;if(d)throw d;return!(!((s=u.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new kt}:await he(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(o=u.session)===null||o===void 0?void 0:o.access_token)!==null&&l!==void 0?l:void 0,xform:Tn})})}catch(t){if(oe(t))return Aw(t)&&(await this._removeSession(),await Sn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:t});throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:o,error:l}=s;if(l)throw l;if(!o.session)throw new kt;const u=o.session;let d=null,f=null;this.flowType==="pkce"&&e.email!=null&&([d,f]=await Pr(this.storage,this.storageKey));const{data:g,error:w}=await he(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:d,code_challenge_method:f}),jwt:u.access_token,xform:Tn});if(w)throw w;return u.user=g.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),this._returnResult({data:{user:u.user},error:null})})}catch(s){if(oe(s))return this._returnResult({data:{user:null},error:s});throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new kt;const t=Date.now()/1e3;let s=t,o=!0,l=null;const{payload:u}=Ml(e.access_token);if(u.exp&&(s=u.exp,o=s<=t),o){const{data:d,error:f}=await this._callRefreshToken(e.refresh_token);if(f)return this._returnResult({data:{user:null,session:null},error:f});if(!d)return{data:{user:null,session:null},error:null};l=d}else{const{data:d,error:f}=await this._getUser(e.access_token);if(f)throw f;l={access_token:e.access_token,refresh_token:e.refresh_token,user:d.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return this._returnResult({data:{user:l.user,session:l},error:null})}catch(t){if(oe(t))return this._returnResult({data:{session:null,user:null},error:t});throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:u,error:d}=t;if(d)throw d;e=(s=u.session)!==null&&s!==void 0?s:void 0}if(!e?.refresh_token)throw new kt;const{data:o,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{user:null,session:null},error:l}):o?this._returnResult({data:{user:o.user,session:o},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(t){if(oe(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async _getSessionFromURL(e,t){try{if(!nt())throw new lo("No browser detected.");if(e.error||e.error_description||e.error_code)throw new lo(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new Xh("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new lo("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Xh("No code detected.");const{data:S,error:P}=await this._exchangeCodeForSession(e.code);if(P)throw P;const L=new URL(window.location.href);return L.searchParams.delete("code"),window.history.replaceState(window.history.state,"",L.toString()),{data:{session:S.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:o,access_token:l,refresh_token:u,expires_in:d,expires_at:f,token_type:g}=e;if(!l||!d||!u||!g)throw new lo("No session defined in URL");const w=Math.round(Date.now()/1e3),_=parseInt(d);let b=w+_;f&&(b=parseInt(f));const k=b-w;k*1e3<=Or&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${k}s, should have been closer to ${_}s`);const T=b-_;w-T>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",T,b,w):w-T<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",T,b,w);const{data:N,error:C}=await this._getUser(l);if(C)throw C;const I={provider_token:s,provider_refresh_token:o,access_token:l,expires_in:_,expires_at:b,refresh_token:u,token_type:g,user:N.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:I,redirectType:e.type},error:null})}catch(s){if(oe(s))return this._returnResult({data:{session:null,redirectType:null},error:s});throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Jn(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:o,error:l}=t;if(l)return this._returnResult({error:l});const u=(s=o.session)===null||s===void 0?void 0:s.access_token;if(u){const{error:d}=await this.admin.signOut(u,e);if(d&&!(Pw(d)&&(d.status===404||d.status===401||d.status===403)))return this._returnResult({error:d})}return e!=="others"&&(await this._removeSession(),await Sn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const t=$w(),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,o;try{const{data:{session:l},error:u}=t;if(u)throw u;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}})}async resetPasswordForEmail(e,t={}){let s=null,o=null;this.flowType==="pkce"&&([s,o]=await Pr(this.storage,this.storageKey,!0));try{return await he(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:o,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(l){if(oe(l))return this._returnResult({data:null,error:l});throw l}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return this._returnResult({data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(t){if(oe(t))return this._returnResult({data:null,error:t});throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:s,error:o}=await this._useSession(async l=>{var u,d,f,g,w;const{data:_,error:b}=l;if(b)throw b;const k=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(u=e.options)===null||u===void 0?void 0:u.redirectTo,scopes:(d=e.options)===null||d===void 0?void 0:d.scopes,queryParams:(f=e.options)===null||f===void 0?void 0:f.queryParams,skipBrowserRedirect:!0});return await he(this.fetch,"GET",k,{headers:this.headers,jwt:(w=(g=_.session)===null||g===void 0?void 0:g.access_token)!==null&&w!==void 0?w:void 0})});if(o)throw o;return nt()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(s?.url),this._returnResult({data:{provider:e.provider,url:s?.url},error:null})}catch(s){if(oe(s))return this._returnResult({data:{provider:e.provider,url:null},error:s});throw s}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var s;try{const{error:o,data:{session:l}}=t;if(o)throw o;const{options:u,provider:d,token:f,access_token:g,nonce:w}=e,_=await he(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=l?.access_token)!==null&&s!==void 0?s:void 0,body:{provider:d,id_token:f,access_token:g,nonce:w,link_identity:!0,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:Vt}),{data:b,error:k}=_;return k?this._returnResult({data:{user:null,session:null},error:k}):!b||!b.session||!b.user?this._returnResult({data:{user:null,session:null},error:new Rr}):(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("USER_UPDATED",b.session)),this._returnResult({data:b,error:k}))}catch(o){if(oe(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var s,o;const{data:l,error:u}=t;if(u)throw u;return await he(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(o=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0})})}catch(t){if(oe(t))return this._returnResult({data:null,error:t});throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await zw(async o=>(o>0&&await Vw(200*Math.pow(2,o-1)),this._debug(t,"refreshing attempt",o),await he(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Vt})),(o,l)=>{const u=200*Math.pow(2,o);return l&&Ol(l)&&Date.now()+u-s<Or})}catch(s){if(this._debug(t,"error",s),oe(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),nt()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,t;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const o=await Jn(this.storage,this.storageKey);if(o&&this.userStorage){let u=await Jn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:o.user},await Mr(this.userStorage,this.storageKey+"-user",u)),o.user=(e=u?.user)!==null&&e!==void 0?e:Ll()}else if(o&&!o.user&&!o.user){const u=await Jn(this.storage,this.storageKey+"-user");u&&u?.user?(o.user=u.user,await Sn(this.storage,this.storageKey+"-user"),await Mr(this.storage,this.storageKey,o)):o.user=Ll()}if(this._debug(s,"session from storage",o),!this._isValidSession(o)){this._debug(s,"session is not valid"),o!==null&&await this._removeSession();return}const l=((t=o.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<jl;if(this._debug(s,`session has${l?"":" not"} expired with margin of ${jl}s`),l){if(this.autoRefreshToken&&o.refresh_token){const{error:u}=await this._callRefreshToken(o.refresh_token);u&&(console.error(u),Ol(u)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:d}=await this._getUser(o.access_token);!d&&u?.user?(o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(s,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(s,"error",o),console.error(o);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new kt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new Ro;const{data:l,error:u}=await this._refreshAccessToken(e);if(u)throw u;if(!l.session)throw new kt;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const d={data:l.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(l){if(this._debug(o,"error",l),oe(l)){const u={data:null,error:l};return Ol(l)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(u),u}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(l),l}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(e,t,s=!0){const o=`#_notifyAllSubscribers(${e})`;this._debug(o,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const l=[],u=Array.from(this.stateChangeEmitters.values()).map(async d=>{try{await d.callback(e,t)}catch(f){l.push(f)}});if(await Promise.all(u),l.length>0){for(let d=0;d<l.length;d+=1)console.error(l[d]);throw l[0]}}finally{this._debug(o,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),s=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&t.user&&await Mr(this.userStorage,this.storageKey+"-user",{user:t.user});const o=Object.assign({},t);delete o.user;const l=rf(o);await Mr(this.storage,this.storageKey,l)}else{const o=rf(t);await Mr(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),await Sn(this.storage,this.storageKey),await Sn(this.storage,this.storageKey+"-code-verifier"),await Sn(this.storage,this.storageKey+"-user"),this.userStorage&&await Sn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&nt()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Or);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((s.expires_at*1e3-e)/Or);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${Or}ms, refresh threshold is ${eu} ticks`),o<=eu&&await this._callRefreshToken(s.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof pm)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!nt()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const o=[`provider=${encodeURIComponent(t)}`];if(s?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s?.scopes&&o.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[l,u]=await Pr(this.storage,this.storageKey),d=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(u)}`});o.push(d.toString())}if(s?.queryParams){const l=new URLSearchParams(s.queryParams);o.push(l.toString())}return s?.skipBrowserRedirect&&o.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${o.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:o,error:l}=t;return l?this._returnResult({data:null,error:l}):await he(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=o?.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(oe(t))return this._returnResult({data:null,error:t});throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,o;const{data:l,error:u}=t;if(u)return this._returnResult({data:null,error:u});const d=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:f,error:g}=await he(this.fetch,"POST",`${this.url}/factors`,{body:d,headers:this.headers,jwt:(s=l?.session)===null||s===void 0?void 0:s.access_token});return g?this._returnResult({data:null,error:g}):(e.factorType==="totp"&&f.type==="totp"&&(!((o=f?.totp)===null||o===void 0)&&o.qr_code)&&(f.totp.qr_code=`data:image/svg+xml;utf-8,${f.totp.qr_code}`),this._returnResult({data:f,error:null}))})}catch(t){if(oe(t))return this._returnResult({data:null,error:t});throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:o,error:l}=t;if(l)return this._returnResult({data:null,error:l});const u=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?wx(e.webauthn.credential_response):xx(e.webauthn.credential_response)})}:{code:e.code}),{data:d,error:f}=await he(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:u,headers:this.headers,jwt:(s=o?.session)===null||s===void 0?void 0:s.access_token});return f?this._returnResult({data:null,error:f}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),this._returnResult({data:d,error:f}))})}catch(t){if(oe(t))return this._returnResult({data:null,error:t});throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:o,error:l}=t;if(l)return this._returnResult({data:null,error:l});const u=await he(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(s=o?.session)===null||s===void 0?void 0:s.access_token});if(u.error)return u;const{data:d}=u;if(d.type!=="webauthn")return{data:d,error:null};switch(d.webauthn.type){case"create":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:vx(d.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:yx(d.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(oe(t))return this._returnResult({data:null,error:t});throw t}})}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?this._returnResult({data:null,error:s}):await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:s}=await this.getUser();if(s)return{data:null,error:s};const o={all:[],phone:[],totp:[],webauthn:[]};for(const l of(e=t?.factors)!==null&&e!==void 0?e:[])o.all.push(l),l.status==="verified"&&o[l.factor_type].push(l);return{data:o,error:null}}async _getAuthenticatorAssuranceLevel(){var e,t;const{data:{session:s},error:o}=await this.getSession();if(o)return this._returnResult({data:null,error:o});if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=Ml(s.access_token);let u=null;l.aal&&(u=l.aal);let d=u;((t=(e=s.user.factors)===null||e===void 0?void 0:e.filter(w=>w.status==="verified"))!==null&&t!==void 0?t:[]).length>0&&(d="aal2");const g=l.amr||[];return{data:{currentLevel:u,nextLevel:d,currentAuthenticationMethods:g},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{const{data:{session:s},error:o}=t;return o?this._returnResult({data:null,error:o}):s?await he(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:s.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new kt})})}catch(t){if(oe(t))return this._returnResult({data:null,error:t});throw t}}async _approveAuthorization(e,t){try{return await this._useSession(async s=>{const{data:{session:o},error:l}=s;if(l)return this._returnResult({data:null,error:l});if(!o)return this._returnResult({data:null,error:new kt});const u=await he(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"approve"},xform:d=>({data:d,error:null})});return u.data&&u.data.redirect_url&&nt()&&!t?.skipBrowserRedirect&&window.location.assign(u.data.redirect_url),u})}catch(s){if(oe(s))return this._returnResult({data:null,error:s});throw s}}async _denyAuthorization(e,t){try{return await this._useSession(async s=>{const{data:{session:o},error:l}=s;if(l)return this._returnResult({data:null,error:l});if(!o)return this._returnResult({data:null,error:new kt});const u=await he(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"deny"},xform:d=>({data:d,error:null})});return u.data&&u.data.redirect_url&&nt()&&!t?.skipBrowserRedirect&&window.location.assign(u.data.redirect_url),u})}catch(s){if(oe(s))return this._returnResult({data:null,error:s});throw s}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;return s?this._returnResult({data:null,error:s}):t?await he(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:t.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new kt})})}catch(e){if(oe(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async t=>{const{data:{session:s},error:o}=t;return o?this._returnResult({data:null,error:o}):s?(await he(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new kt})})}catch(t){if(oe(t))return this._returnResult({data:null,error:t});throw t}}async fetchJwk(e,t={keys:[]}){let s=t.keys.find(d=>d.kid===e);if(s)return s;const o=Date.now();if(s=this.jwks.keys.find(d=>d.kid===e),s&&this.jwks_cached_at+Nw>o)return s;const{data:l,error:u}=await he(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=o,s=l.keys.find(d=>d.kid===e),!s)?null:s}async getClaims(e,t={}){try{let s=e;if(!s){const{data:k,error:T}=await this.getSession();if(T||!k.session)return this._returnResult({data:null,error:T});s=k.session.access_token}const{header:o,payload:l,signature:u,raw:{header:d,payload:f}}=Ml(s);t?.allowExpired||Yw(l.exp);const g=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,t?.keys?{keys:t.keys}:t?.jwks);if(!g){const{error:k}=await this.getUser(s);if(k)throw k;return{data:{claims:l,header:o,signature:u},error:null}}const w=Qw(o.alg),_=await crypto.subtle.importKey("jwk",g,w,!0,["verify"]);if(!await crypto.subtle.verify(w,_,u,Dw(`${d}.${f}`)))throw new ru("Invalid JWT signature");return{data:{claims:l,header:o,signature:u},error:null}}catch(s){if(oe(s))return this._returnResult({data:null,error:s});throw s}}}$s.nextInstanceID={};const Rx=$s;class Px extends Rx{constructor(e){super(e)}}class Ax{constructor(e,t,s){var o,l,u;this.supabaseUrl=e,this.supabaseKey=t;const d=kw(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const f=`sb-${d.hostname.split(".")[0]}-auth-token`,g={db:mw,realtime:vw,auth:Object.assign(Object.assign({},gw),{storageKey:f}),global:pw},w=bw(s??{},g);this.storageKey=(o=w.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(l=w.global.headers)!==null&&l!==void 0?l:{},w.accessToken?(this.accessToken=w.accessToken,this.auth=new Proxy({},{get:(_,b)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(b)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((u=w.auth)!==null&&u!==void 0?u:{},this.headers,w.global.fetch),this.fetch=xw(t,this._getAccessToken.bind(this),w.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},w.realtime)),this.accessToken&&this.accessToken().then(_=>this.realtime.setAuth(_)).catch(_=>console.warn("Failed to set initial Realtime auth token:",_)),this.rest=new Ey(new URL("rest/v1",d).href,{headers:this.headers,schema:w.db.schema,fetch:this.fetch}),this.storage=new dw(this.storageUrl.href,this.headers,this.fetch,s?.storage),w.accessToken||this._listenForAuthEvents()}get functions(){return new xy(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,t;if(this.accessToken)return await this.accessToken();const{data:s}=await this.auth.getSession();return(t=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:o,userStorage:l,storageKey:u,flowType:d,lock:f,debug:g,throwOnError:w},_,b){const k={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Px({url:this.authUrl.href,headers:Object.assign(Object.assign({},k),_),storageKey:u,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:o,userStorage:l,flowType:d,lock:f,debug:g,throwOnError:w,fetch:b,hasCustomAuthorizationHeader:Object.keys(this.headers).some(T=>T.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new By(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,s)=>{this._handleTokenChanged(t,"CLIENT",s?.access_token)})}_handleTokenChanged(e,t,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?(this.changedAccessToken=s,this.realtime.setAuth(s)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Ix=(i,e,t)=>new Ax(i,e,t);function jx(){if(typeof window<"u"||typeof process>"u")return!1;const i=process.version;if(i==null)return!1;const e=i.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}jx()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Ox="https://ggxoangrdpktjpzvgmqu.supabase.co",Mx="sb_publishable_Xdrul-bGMLs4HrVbappATg_hzUecJkS",Re=Ix(Ox,Mx),Is=i=>{if(!i)return"Unknown error occurred";if(typeof i=="string")return i;if(i.message)return i.message;if(i.error_description)return i.error_description;if(i.statusText)return i.statusText;try{return JSON.stringify(i)}catch{return"An unexpected error occurred"}},Lx=({user:i})=>{const e=i.username==="admin",[t,s]=U.useState({day:new Date().toLocaleDateString("en-US",{weekday:"long"}),breakfast:"Loading...",lunch:"Loading...",snacks:"Loading...",dinner:"Loading..."}),[o,l]=U.useState(!1),[u,d]=U.useState(!1),[f,g]=U.useState(t),[w,_]=U.useState(t.day),[b,k]=U.useState([]);U.useEffect(()=>{const P=new Date;N(P.toLocaleDateString("en-US",{weekday:"long"}),!0),T(P.getDate(),P.getMonth()+1)},[]);const T=async(P,L)=>{const{data:W,error:H}=await Re.from("health_events").select("*").or(`start_month.eq.${L},end_month.eq.${L}`);if(W&&W.length>0){const Q=W.filter(se=>{if(se.start_month===L&&se.end_month===L&&se.start_day===P&&se.end_day===P)return!0;const ve=L>se.start_month||L===se.start_month&&P>=se.start_day,G=L<se.end_month||L===se.end_month&&P<=se.end_day;return ve&&G});Q.sort((se,ve)=>{const G={Day:1,Week:2,Month:3};return(G[se.category]||4)-(G[ve.category]||4)}),k(Q.map(se=>se.event_name))}},N=async(P,L=!1)=>{const{data:W,error:H}=await Re.from("mess_menu").select("*").eq("day",P).single(),Q=W?{day:W.day,breakfast:W.breakfast||"",lunch:W.lunch||"",snacks:W.snacks||"",dinner:W.dinner||""}:{day:P,breakfast:"",lunch:"",snacks:"",dinner:""};return L&&s(Q),Q},C=async()=>{g(t),_(t.day),l(!0)},I=async P=>{_(P);const L=await N(P);g(L)},S=async()=>{d(!0);try{const{error:P}=await Re.from("mess_menu").upsert([f],{onConflict:"day"});if(P)throw P;const L=new Date().toLocaleDateString("en-US",{weekday:"long"});f.day===L&&s(f),l(!1)}catch(P){console.error("Failed to save menu",P),alert("Failed to save menu")}finally{d(!1)}};return y.jsxs("div",{className:"animate-fade-in space-y-8",children:[y.jsxs("div",{className:"glass rounded-[3rem] p-8 sm:p-10 text-white shadow-[0_20px_50px_rgba(0,0,0,0.15)] relative overflow-hidden group border border-white/20",children:[y.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-600/20 via-purple-600/20 to-pink-600/20 dark:from-blue-900/40 dark:via-purple-900/40 dark:to-slate-900/60 -z-10 animate-pulse-slow"}),y.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row justify-between items-start md:items-end gap-8",children:[y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"inline-flex items-center gap-2 bg-white/20 backdrop-blur-md px-4 py-1.5 rounded-full text-xs font-bold mb-1 border border-white/10 shadow-sm text-slate-800 dark:text-white",children:[y.jsx(wp,{className:"w-3.5 h-3.5"}),y.jsx("span",{children:new Date().toLocaleDateString(void 0,{weekday:"long",month:"long",day:"numeric"})})]}),y.jsxs("div",{children:[y.jsxs("h2",{className:"text-4xl sm:text-5xl font-extrabold mb-2 tracking-tight text-slate-900 dark:text-white drop-shadow-sm",children:["Hello, ",y.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600 dark:from-blue-400 dark:to-purple-400",children:i.fullname.split(" ")[0]})]}),y.jsx("p",{className:"text-slate-600 dark:text-slate-300 max-w-md text-base font-medium leading-relaxed",children:"Your personal academic dashboard."})]})]}),y.jsxs("div",{className:"flex flex-wrap gap-4 w-full md:w-auto",children:[y.jsx(Rn,{to:"/attendance",className:"flex-1 md:flex-none text-center bg-blue-600 hover:bg-blue-500 text-white px-8 py-4 rounded-2xl font-bold text-sm shadow-lg shadow-blue-500/30 transition transform hover:-translate-y-1 active:scale-95 border border-white/10",children:"My Attendance"}),y.jsxs(Rn,{to:"/ai-tutor",className:"flex-1 md:flex-none flex items-center justify-center gap-2 bg-white/20 hover:bg-white/30 text-slate-900 dark:text-white px-8 py-4 rounded-2xl font-bold text-sm border border-white/20 backdrop-blur-md shadow-lg transition transform hover:-translate-y-1 active:scale-95",children:[y.jsx(vo,{className:"w-4 h-4"})," Tutor"]})]})]}),y.jsx("div",{className:"absolute top-0 right-0 w-[400px] h-[400px] bg-gradient-to-br from-white/10 to-transparent rounded-full blur-[60px] pointer-events-none -translate-y-1/2 translate-x-1/2"})]}),b.length>0&&y.jsxs("div",{className:"glass rounded-[2.5rem] p-6 border border-emerald-500/30 shadow-[0_10px_40px_-10px_rgba(16,185,129,0.2)] relative overflow-hidden animate-slide-up",children:[y.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-emerald-500/10 to-teal-500/10 dark:from-emerald-900/20 dark:to-teal-900/20 -z-10"}),y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx("div",{className:"w-12 h-12 rounded-2xl bg-emerald-100 dark:bg-emerald-900/30 flex items-center justify-center text-emerald-600 dark:text-emerald-400 border border-emerald-500/20 shadow-inner flex-shrink-0",children:y.jsx(ry,{className:"w-6 h-6 animate-pulse"})}),y.jsxs("div",{children:[y.jsxs("p",{className:"text-xs font-bold text-emerald-600 dark:text-emerald-400 uppercase tracking-widest mb-1 flex items-center gap-1",children:[y.jsx(Wv,{className:"w-3 h-3"})," Important Today"]}),y.jsx("div",{className:"flex flex-col gap-1",children:b.map((P,L)=>y.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white leading-tight",children:P},L))})]})]})]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[y.jsxs("div",{className:"md:col-span-2 space-y-6",children:[y.jsxs("div",{className:"glass rounded-[2.5rem] p-8 border border-white/20 shadow-xl",children:[y.jsx("h3",{className:"font-bold text-xl text-slate-900 dark:text-white mb-6 ml-1",children:"Quick Access"}),y.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[y.jsxs(Rn,{to:"/library",className:"group bg-slate-50/50 dark:bg-white/5 p-6 rounded-[2rem] border border-white/20 flex flex-col items-center justify-center gap-4 hover:bg-white/40 dark:hover:bg-white/10 transition duration-300 shadow-sm hover:shadow-lg",children:[y.jsx("div",{className:"p-4 bg-blue-500/10 dark:bg-blue-500/20 rounded-2xl text-blue-600 dark:text-blue-300 group-hover:scale-110 transition duration-500 shadow-inner",children:y.jsx(Oh,{className:"w-7 h-7"})}),y.jsx("span",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 group-hover:text-blue-600 dark:group-hover:text-white transition",children:"Library"})]}),y.jsxs(Rn,{to:"/ai-tutor",className:"group bg-slate-50/50 dark:bg-white/5 p-6 rounded-[2rem] border border-white/20 flex flex-col items-center justify-center gap-4 hover:bg-white/40 dark:hover:bg-white/10 transition duration-300 shadow-sm hover:shadow-lg",children:[y.jsx("div",{className:"p-4 bg-purple-500/10 dark:bg-purple-500/20 rounded-2xl text-purple-600 dark:text-purple-300 group-hover:scale-110 transition duration-500 shadow-inner",children:y.jsx(vo,{className:"w-7 h-7"})}),y.jsx("span",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 group-hover:text-purple-600 dark:group-hover:text-white transition",children:"AI Tutor"})]})]})]}),y.jsxs("div",{className:"glass rounded-[2.5rem] p-8 border border-white/20 relative overflow-hidden min-h-[180px] flex flex-col justify-center shadow-xl group",children:[y.jsx("div",{className:"absolute -right-6 top-1/2 -translate-y-1/2 opacity-[0.03] dark:opacity-[0.05] rotate-12 transition-transform duration-700 group-hover:rotate-6 group-hover:scale-110",children:y.jsx(Oh,{className:"w-48 h-48 text-slate-900 dark:text-white"})}),y.jsxs("h4",{className:"text-blue-600 dark:text-blue-300 text-xs uppercase font-extrabold mb-3 tracking-widest relative z-10 flex items-center gap-2",children:[y.jsx("span",{className:"w-8 h-[2px] bg-blue-500 rounded-full"})," Daily Wisdom"]}),y.jsx("p",{className:"text-slate-900 dark:text-white font-serif text-2xl italic relative z-10 leading-relaxed drop-shadow-sm",children:'"Wherever the art of Medicine is loved, there is also a love of Humanity."'}),y.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm mt-4 relative z-10 font-bold",children:" Hippocrates"})]})]}),y.jsxs("div",{className:"glass rounded-[2.5rem] p-6 border border-white/20 flex flex-col h-full shadow-xl",children:[y.jsxs("div",{className:"flex justify-between items-center mb-6 pl-2",children:[y.jsxs("div",{children:[y.jsxs("h3",{className:"font-bold text-xl text-slate-900 dark:text-white flex items-center gap-2",children:[y.jsx(hy,{className:"w-5 h-5 text-orange-500"}),"Today's Menu"]}),y.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 font-medium mt-1 ml-7",children:t.day})]}),e&&y.jsx("button",{onClick:C,className:"text-slate-500 hover:text-white transition bg-slate-100 dark:bg-white/5 p-2.5 rounded-xl border border-white/10 hover:bg-blue-500 shadow-sm",children:y.jsx(bp,{className:"w-4 h-4"})})]}),y.jsx("div",{className:"space-y-3 flex-1",children:[{label:"Breakfast",icon:ql,color:"text-yellow-600 dark:text-yellow-400",bg:"bg-yellow-500/10 dark:bg-yellow-500/5",val:t.breakfast},{label:"Lunch",icon:ql,color:"text-orange-600 dark:text-orange-400",bg:"bg-orange-500/10 dark:bg-orange-500/5",val:t.lunch},{label:"Snacks",icon:xp,color:"text-pink-600 dark:text-pink-400",bg:"bg-pink-500/10 dark:bg-pink-500/5",val:t.snacks},{label:"Dinner",icon:_p,color:"text-indigo-600 dark:text-indigo-400",bg:"bg-indigo-500/10 dark:bg-indigo-500/5",val:t.dinner}].map((P,L)=>y.jsxs("div",{className:`flex gap-4 items-start p-4 rounded-2xl transition duration-300 border border-transparent hover:border-white/10 hover:bg-white/40 dark:hover:bg-white/5 ${P.val?"":"opacity-50"}`,children:[y.jsx("div",{className:`mt-0.5 ${P.color} ${P.bg} p-2.5 rounded-xl shadow-inner`,children:y.jsx(P.icon,{className:"w-5 h-5"})}),y.jsxs("div",{children:[y.jsx("p",{className:"text-[10px] text-slate-500 dark:text-slate-400 uppercase font-bold tracking-wider mb-1",children:P.label}),y.jsx("p",{className:"text-slate-900 dark:text-slate-200 text-sm font-semibold leading-snug",children:P.val||"--"})]})]},L))})]})]}),o&&y.jsx("div",{className:"fixed inset-0 bg-slate-900/60 dark:bg-black/80 backdrop-blur-xl flex items-center justify-center z-50 p-4 animate-fade-in",children:y.jsxs("div",{className:"glass-heavy border border-white/20 p-8 rounded-[2.5rem] max-w-md w-full shadow-[0_20px_60px_rgba(0,0,0,0.5)] transform scale-100",children:[y.jsxs("div",{className:"flex justify-between items-center mb-8",children:[y.jsx("h3",{className:"font-bold text-2xl text-slate-900 dark:text-white",children:"Update Menu"}),y.jsx("button",{onClick:()=>l(!1),className:"p-2 rounded-full bg-slate-100 dark:bg-white/5 hover:bg-slate-200 dark:hover:bg-white/10 transition",children:y.jsx(Ls,{className:"w-6 h-6 text-slate-500 dark:text-slate-300"})})]}),y.jsxs("div",{className:"space-y-5",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs text-slate-500 dark:text-slate-400 mb-2 font-bold ml-2 uppercase tracking-wide",children:"Select Day"}),y.jsx("select",{value:w,onChange:P=>I(P.target.value),className:"w-full bg-slate-50 dark:bg-black/20 border border-slate-200 dark:border-white/10 text-slate-900 dark:text-white rounded-2xl p-4 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/30 transition shadow-inner",children:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map(P=>y.jsx("option",{value:P,children:P},P))})]}),["breakfast","lunch","snacks","dinner"].map(P=>y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs text-slate-500 dark:text-slate-400 mb-2 ml-2 capitalize font-bold",children:P}),y.jsx("input",{type:"text",value:f[P],onChange:L=>g({...f,[P]:L.target.value}),className:"w-full bg-slate-50 dark:bg-black/20 border border-slate-200 dark:border-white/10 text-slate-900 dark:text-white rounded-2xl p-4 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/30 transition shadow-inner"})]},P)),y.jsxs("button",{onClick:S,disabled:u,className:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-500 hover:to-indigo-500 text-white py-4 rounded-2xl font-bold transition mt-4 flex justify-center items-center gap-2 shadow-lg shadow-blue-500/20 active:scale-95 border border-white/10",children:[u?y.jsx(Ms,{className:"w-4 h-4 animate-spin"}):y.jsx(Vl,{className:"w-4 h-4"}),"Update Menu"]})]})]})})]})},Dx=({subjects:i,setSubjects:e,username:t})=>{const[s,o]=U.useState(!1),[l,u]=U.useState(""),[d,f]=U.useState("saved");U.useEffect(()=>{(async()=>{if(!t)return;const{data:S,error:P}=await Re.from("profiles").select("attendance_data").eq("username",t).single();if(S&&S.attendance_data){const L=Array.isArray(S.attendance_data)?S.attendance_data:[];e(L)}})()},[t,e]),U.useEffect(()=>{if(i.length===0)return;const I=setTimeout(async()=>{f("saving");try{const{error:S}=await Re.from("profiles").update({attendance_data:i}).eq("username",t);if(S)throw S;f("saved")}catch(S){console.error("Save failed",S),f("error")}},2e3);return()=>clearTimeout(I)},[i,t]);const g={"1st Year":["Anatomy","Physiology","Biochemistry"],"2nd Year":["Pathology","Microbiology","Pharmacology","Forensic Medicine"],"3rd Year":["Ophthalmology","ENT","Community Medicine (PSM)"],"4th Year":["General Medicine","General Surgery","OBG","Pediatrics"]},[w,_]=U.useState(""),b=(I,S,P)=>{if(S===0)return{msg:"No classes",safe:!0,percent:"0.0"};const L=I/S*100;if(L>=P){const H=Math.floor((100*I-P*S)/P);return{msg:H>0?`Bunk ${H} classes`:"On edge!",safe:!0,percent:L.toFixed(1)}}else{const H=Math.ceil((P*S-100*I)/(100-P));return{msg:H>0?`Attend ${H} next`:"Catch up!",safe:!1,percent:L.toFixed(1)}}},k=()=>{l&&(e([...i,{name:l,theory:{attended:0,total:0,target:75},practical:{attended:0,total:0,target:80}}]),u(""),o(!1))},T=(I,S,P,L)=>{const W=[...i],H=W[I][S][P];H+L<0||(W[I][S][P]=H+L,e(W))},N=(I,S,P)=>{const L=[...i];L[I][S].total+=1,P&&(L[I][S].attended+=1),e(L)},C=I=>{const S=i.filter((P,L)=>L!==I);e(S)};return y.jsxs("div",{className:"pb-20",children:[y.jsxs("div",{className:"flex justify-between items-center mb-8",children:[y.jsx("h2",{className:"text-3xl font-bold text-slate-900 dark:text-white tracking-tight",children:"Attendance"}),y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsxs("div",{className:"hidden md:flex items-center gap-2 px-4 py-2 bg-white/5 rounded-full border border-slate-200 dark:border-white/5 backdrop-blur-md",children:[y.jsx("div",{className:`w-2 h-2 rounded-full shadow-[0_0_8px] ${d==="saved"?"bg-green-500 shadow-green-500":d==="saving"?"bg-yellow-500 shadow-yellow-500 animate-pulse":"bg-red-500 shadow-red-500"}`}),y.jsx("span",{className:"text-[10px] text-slate-600 dark:text-slate-300 uppercase font-bold tracking-wider",children:d==="saved"?"Synced":d==="saving"?"Saving...":"Error"})]}),y.jsxs("button",{onClick:()=>o(!0),className:"bg-blue-600 hover:bg-blue-500 text-white px-5 py-2.5 rounded-2xl text-sm font-bold flex items-center gap-2 transition shadow-lg shadow-blue-900/20 active:scale-95",children:[y.jsx(ly,{className:"w-5 h-5"})," Add Subject"]})]})]}),y.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[i.length===0&&y.jsxs("div",{className:"col-span-full text-center py-20 border-2 border-dashed border-slate-200 dark:border-white/10 rounded-[2.5rem] bg-white/5 backdrop-blur-sm",children:[y.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-4 text-lg",children:"No subjects added yet."}),y.jsx("button",{onClick:()=>o(!0),className:"text-blue-500 dark:text-blue-400 font-bold hover:text-blue-400 transition",children:"Add one now"})]}),i.map((I,S)=>{const P=b(I.theory.attended,I.theory.total,I.theory.target),L=b(I.practical.attended,I.practical.total,I.practical.target);return y.jsxs("div",{className:"glass rounded-[2rem] border border-white/5 p-6 relative group shadow-xl hover:border-white/10 transition duration-300",children:[y.jsx("button",{onClick:()=>C(S),className:"absolute top-5 right-5 text-slate-500 hover:text-red-400 transition opacity-0 group-hover:opacity-100 p-2 hover:bg-slate-100 dark:hover:bg-white/5 rounded-xl",children:y.jsx(ho,{className:"w-5 h-5"})}),y.jsx("h3",{className:"font-bold text-xl text-slate-900 dark:text-white mb-6 pr-10",children:I.name}),y.jsxs("div",{className:"space-y-6",children:[y.jsxs("div",{children:[y.jsxs("div",{className:"flex justify-between items-center mb-3",children:[y.jsx("span",{className:"text-xs font-bold text-blue-600 dark:text-blue-300 uppercase tracking-widest",children:"Theory (75%)"}),y.jsxs("div",{className:`flex items-center gap-2 px-3 py-1 rounded-full border backdrop-blur-md ${P.safe?"bg-green-500/10 border-green-500/20 text-green-600 dark:text-green-300":"bg-red-500/10 border-red-500/20 text-red-600 dark:text-red-300"}`,children:[y.jsx("span",{className:"text-[10px] font-bold whitespace-nowrap uppercase tracking-wide",children:P.msg}),y.jsxs("span",{className:"text-sm font-bold font-mono",children:[P.percent,"%"]})]})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[y.jsxs("button",{onClick:()=>N(S,"theory",!0),className:"bg-green-500/10 hover:bg-green-500/20 text-green-600 dark:text-green-400 border border-green-500/20 py-3 rounded-xl text-xs font-bold flex items-center justify-center gap-1.5 transition",children:[y.jsx(Bl,{className:"w-4 h-4"})," Present"]}),y.jsxs("button",{onClick:()=>N(S,"theory",!1),className:"bg-red-500/10 hover:bg-red-500/20 text-red-600 dark:text-red-400 border border-red-500/20 py-3 rounded-xl text-xs font-bold flex items-center justify-center gap-1.5 transition",children:[y.jsx(Ls,{className:"w-4 h-4"})," Absent"]})]}),y.jsxs("div",{className:"flex justify-between items-center bg-slate-100/50 dark:bg-slate-900/50 p-3 rounded-xl border border-slate-200 dark:border-white/5 text-xs text-slate-500 dark:text-slate-400",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("span",{className:"uppercase tracking-wide",children:"Attended"}),y.jsxs("div",{className:"flex items-center gap-1",children:[y.jsx("button",{onClick:()=>T(S,"theory","attended",-1),children:y.jsx(Xi,{className:"w-5 h-5 hover:text-slate-900 dark:hover:text-white transition"})}),y.jsx("span",{className:"font-mono text-slate-900 dark:text-white w-6 text-center text-sm",children:I.theory.attended}),y.jsx("button",{onClick:()=>T(S,"theory","attended",1),children:y.jsx(Zi,{className:"w-5 h-5 hover:text-slate-900 dark:hover:text-white transition"})})]})]}),y.jsx("div",{className:"w-px h-6 bg-slate-200 dark:bg-white/10"}),y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("span",{className:"uppercase tracking-wide",children:"Total"}),y.jsxs("div",{className:"flex items-center gap-1",children:[y.jsx("button",{onClick:()=>T(S,"theory","total",-1),children:y.jsx(Xi,{className:"w-5 h-5 hover:text-slate-900 dark:hover:text-white transition"})}),y.jsx("span",{className:"font-mono text-slate-900 dark:text-white w-6 text-center text-sm",children:I.theory.total}),y.jsx("button",{onClick:()=>T(S,"theory","total",1),children:y.jsx(Zi,{className:"w-5 h-5 hover:text-slate-900 dark:hover:text-white transition"})})]})]})]})]}),y.jsxs("div",{className:"pt-4 border-t border-slate-200 dark:border-white/5",children:[y.jsxs("div",{className:"flex justify-between items-center mb-3",children:[y.jsx("span",{className:"text-xs font-bold text-purple-600 dark:text-purple-300 uppercase tracking-widest",children:"Practical (80%)"}),y.jsxs("div",{className:`flex items-center gap-2 px-3 py-1 rounded-full border backdrop-blur-md ${L.safe?"bg-green-500/10 border-green-500/20 text-green-600 dark:text-green-300":"bg-red-500/10 border-red-500/20 text-red-600 dark:text-red-300"}`,children:[y.jsx("span",{className:"text-[10px] font-bold whitespace-nowrap uppercase tracking-wide",children:L.msg}),y.jsxs("span",{className:"text-sm font-bold font-mono",children:[L.percent,"%"]})]})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[y.jsxs("button",{onClick:()=>N(S,"practical",!0),className:"bg-green-500/10 hover:bg-green-500/20 text-green-600 dark:text-green-400 border border-green-500/20 py-3 rounded-xl text-xs font-bold flex items-center justify-center gap-1.5 transition",children:[y.jsx(Bl,{className:"w-4 h-4"})," Present"]}),y.jsxs("button",{onClick:()=>N(S,"practical",!1),className:"bg-red-500/10 hover:bg-red-500/20 text-red-600 dark:text-red-400 border border-red-500/20 py-3 rounded-xl text-xs font-bold flex items-center justify-center gap-1.5 transition",children:[y.jsx(Ls,{className:"w-4 h-4"})," Absent"]})]}),y.jsxs("div",{className:"flex justify-between items-center bg-slate-100/50 dark:bg-slate-900/50 p-3 rounded-xl border border-slate-200 dark:border-white/5 text-xs text-slate-500 dark:text-slate-400",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("span",{className:"uppercase tracking-wide",children:"Attended"}),y.jsxs("div",{className:"flex items-center gap-1",children:[y.jsx("button",{onClick:()=>T(S,"practical","attended",-1),children:y.jsx(Xi,{className:"w-5 h-5 hover:text-slate-900 dark:hover:text-white transition"})}),y.jsx("span",{className:"font-mono text-slate-900 dark:text-white w-6 text-center text-sm",children:I.practical.attended}),y.jsx("button",{onClick:()=>T(S,"practical","attended",1),children:y.jsx(Zi,{className:"w-5 h-5 hover:text-slate-900 dark:hover:text-white transition"})})]})]}),y.jsx("div",{className:"w-px h-6 bg-slate-200 dark:bg-white/10"}),y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("span",{className:"uppercase tracking-wide",children:"Total"}),y.jsxs("div",{className:"flex items-center gap-1",children:[y.jsx("button",{onClick:()=>T(S,"practical","total",-1),children:y.jsx(Xi,{className:"w-5 h-5 hover:text-slate-900 dark:hover:text-white transition"})}),y.jsx("span",{className:"font-mono text-slate-900 dark:text-white w-6 text-center text-sm",children:I.practical.total}),y.jsx("button",{onClick:()=>T(S,"practical","total",1),children:y.jsx(Zi,{className:"w-5 h-5 hover:text-slate-900 dark:hover:text-white transition"})})]})]})]})]})]})]},S)})]}),s&&y.jsx("div",{className:"fixed inset-0 bg-slate-900/60 dark:bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4",children:y.jsxs("div",{className:"glass-heavy border border-white/10 p-8 rounded-[2rem] max-w-sm w-full animate-fade-in shadow-2xl",children:[y.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white mb-6",children:"Add Subject"}),y.jsx("label",{className:"block text-xs text-slate-500 dark:text-slate-400 mb-2 font-medium ml-1 uppercase tracking-wide",children:"Select Year"}),y.jsxs("select",{className:"w-full bg-slate-100 dark:bg-slate-900/50 border border-slate-200 dark:border-white/10 text-slate-900 dark:text-white rounded-2xl p-4 mb-4 text-sm focus:outline-none focus:border-blue-500/50",value:w,onChange:I=>{_(I.target.value),I.target.value!=="Custom"?u(g[I.target.value][0]):u("")},children:[y.jsx("option",{value:"",disabled:!0,children:"Choose Year"}),Object.keys(g).map(I=>y.jsx("option",{value:I,children:I},I)),y.jsx("option",{value:"Custom",children:"Custom / Elective"})]}),w&&w!=="Custom"&&y.jsxs("div",{className:"mb-6",children:[y.jsx("label",{className:"block text-xs text-slate-500 dark:text-slate-400 mb-2 font-medium ml-1 uppercase tracking-wide",children:"Subject"}),y.jsx("select",{className:"w-full bg-slate-100 dark:bg-slate-900/50 border border-slate-200 dark:border-white/10 text-slate-900 dark:text-white rounded-2xl p-4 text-sm focus:outline-none focus:border-blue-500/50",value:l,onChange:I=>u(I.target.value),children:g[w].map(I=>y.jsx("option",{value:I,children:I},I))})]}),w==="Custom"&&y.jsxs("div",{className:"mb-6",children:[y.jsx("label",{className:"block text-xs text-slate-500 dark:text-slate-400 mb-2 font-medium ml-1 uppercase tracking-wide",children:"Custom Subject Name"}),y.jsx("input",{type:"text",className:"w-full bg-slate-100 dark:bg-slate-900/50 border border-slate-200 dark:border-white/10 text-slate-900 dark:text-white rounded-2xl p-4 text-sm focus:outline-none focus:border-blue-500/50 placeholder-slate-400 dark:placeholder-slate-600",value:l,onChange:I=>u(I.target.value),placeholder:"e.g. Research Methodology"})]}),y.jsxs("div",{className:"flex gap-4",children:[y.jsx("button",{onClick:()=>o(!1),className:"flex-1 py-3 bg-slate-200 dark:bg-white/5 hover:bg-slate-300 dark:hover:bg-white/10 text-slate-600 dark:text-slate-300 rounded-xl font-bold text-sm transition",children:"Cancel"}),y.jsx("button",{onClick:k,className:"flex-1 py-3 bg-blue-600 text-white rounded-xl font-bold text-sm shadow-lg shadow-blue-900/30 hover:bg-blue-500 transition",children:"Add"})]})]})})]})},Ux=()=>{const[i,e]=U.useState(""),[t,s]=U.useState("All"),[o,l]=U.useState([]),[u,d]=U.useState(!0);U.useEffect(()=>{(async()=>{d(!0);const{data:_,error:b}=await Re.from("books").select("*");_?l(_):console.error("Error fetching books",b),d(!1)})()},[]);const f=["All",...Array.from(new Set(o.map(w=>w.subject).filter(Boolean))).sort()],g=o.filter(w=>{const _=w.title.toLowerCase().includes(i.toLowerCase())||w.subject.toLowerCase().includes(i.toLowerCase())||w.author.toLowerCase().includes(i.toLowerCase()),b=t==="All"||w.subject===t;return _&&b});return y.jsxs("div",{className:"animate-fade-in pb-20",children:[y.jsxs("div",{className:"mb-8 flex flex-col md:flex-row md:items-center justify-between gap-4",children:[y.jsx("h2",{className:"text-3xl font-bold text-slate-900 dark:text-white tracking-tight",children:"Digital Library"}),y.jsxs("div",{className:"text-xs text-blue-600 dark:text-blue-200 font-medium bg-blue-100 dark:bg-blue-500/10 px-4 py-2 rounded-full self-start md:self-auto border border-blue-500/20 backdrop-blur-md",children:[g.length," ",g.length===1?"book":"books"," found"]})]}),y.jsx("div",{className:"glass rounded-[2rem] p-6 mb-8 border border-white/5 shadow-xl",children:y.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[y.jsxs("div",{className:"relative flex-1 group",children:[y.jsx(cy,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-500 group-focus-within:text-blue-500 transition"}),y.jsx("input",{type:"text",placeholder:"Search books, authors...",value:i,onChange:w=>e(w.target.value),className:"w-full bg-slate-100 dark:bg-slate-900/50 border border-slate-200 dark:border-white/10 rounded-2xl py-4 pl-12 pr-4 text-slate-900 dark:text-slate-200 focus:outline-none focus:border-blue-500/50 focus:bg-slate-200 dark:focus:bg-slate-900/80 transition shadow-inner placeholder-slate-400 dark:placeholder-slate-600"})]}),y.jsxs("div",{className:"relative w-full sm:w-72",children:[y.jsx(ty,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-500 pointer-events-none z-10"}),y.jsx("select",{value:t,onChange:w=>s(w.target.value),className:"w-full bg-slate-100 dark:bg-slate-900/50 border border-slate-200 dark:border-white/10 rounded-2xl py-4 pl-12 pr-10 text-slate-900 dark:text-slate-200 appearance-none focus:outline-none focus:border-blue-500/50 focus:bg-slate-200 dark:focus:bg-slate-900/80 cursor-pointer transition text-sm shadow-inner",children:f.map(w=>y.jsx("option",{value:w,children:w==="All"?"All Subjects":w},w))}),y.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none text-slate-500",children:y.jsx($x,{className:"w-4 h-4"})})]})]})}),y.jsxs("div",{className:"grid gap-5 md:grid-cols-2 lg:grid-cols-2",children:[u&&y.jsxs("div",{className:"col-span-full text-center text-slate-500 py-20 flex flex-col items-center gap-3 glass rounded-3xl",children:[y.jsx(kp,{className:"w-8 h-8 animate-spin text-blue-500"}),y.jsx("p",{className:"animate-pulse",children:"Accessing library database..."})]}),!u&&g.map((w,_)=>y.jsxs("div",{className:"glass rounded-3xl p-4 border border-white/5 flex gap-4 items-start group hover:border-white/10 transition cursor-pointer hover:shadow-2xl hover:-translate-y-1 duration-300",children:[y.jsx("div",{className:"w-16 h-20 bg-slate-200 dark:bg-slate-800 rounded-2xl flex items-center justify-center flex-shrink-0 border border-white/5 group-hover:bg-blue-100 dark:group-hover:bg-blue-600/20 group-hover:border-blue-500/30 transition shadow-inner",children:y.jsx(yp,{className:"w-8 h-8 text-slate-500 group-hover:text-blue-600 dark:group-hover:text-blue-300 transition"})}),y.jsxs("div",{className:"flex-1 min-w-0 flex flex-col h-full justify-between py-1",children:[y.jsxs("div",{children:[y.jsx("h4",{className:"text-slate-900 dark:text-white font-bold text-sm mb-1 leading-tight group-hover:text-blue-600 dark:group-hover:text-blue-300 transition line-clamp-2",children:w.title}),y.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-xs mb-3 truncate font-medium",children:w.author})]}),y.jsxs("div",{className:"flex flex-wrap gap-2 mt-auto",children:[w.year&&y.jsx("span",{className:"text-[10px] bg-white dark:bg-white/5 border border-slate-200 dark:border-white/10 text-slate-600 dark:text-slate-300 px-2.5 py-1 rounded-lg",children:w.year}),y.jsx("span",{className:"text-[10px] bg-white dark:bg-white/5 border border-slate-200 dark:border-white/10 text-slate-600 dark:text-slate-300 px-2.5 py-1 rounded-lg truncate max-w-[120px]",children:w.subject})]})]}),y.jsx("a",{href:w.link,target:"_blank",rel:"noopener noreferrer",className:`flex-shrink-0 self-center bg-blue-600 hover:bg-blue-500 text-white p-3 rounded-2xl transition shadow-lg shadow-blue-900/20 ${w.link?"":"opacity-50 cursor-not-allowed pointer-events-none bg-slate-700"}`,children:y.jsx(ey,{className:"w-4 h-4"})})]},_)),!u&&g.length===0&&y.jsxs("div",{className:"col-span-full text-center py-20 glass rounded-[2.5rem] border border-white/5",children:[y.jsx("p",{className:"text-slate-800 dark:text-slate-300 font-bold text-lg mb-2",children:"No books found"}),y.jsx("p",{className:"text-slate-500 text-sm mb-6",children:"Try adjusting your search or filter."}),y.jsx("button",{onClick:()=>{e(""),s("All")},className:"text-white bg-slate-800 px-6 py-3 rounded-2xl hover:bg-slate-700 transition border border-white/10",children:"Clear Filters"})]})]})]})},$x=({className:i})=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:i,children:y.jsx("path",{d:"m6 9 6 6 6-6"})}),Fx=({user:i,userAvatar:e})=>{const[t,s]=U.useState(""),[o,l]=U.useState(!0),[u,d]=U.useState([]),[f,g]=U.useState(!0),[w,_]=U.useState(!1),[b,k]=U.useState(null),[T,N]=U.useState(""),[C,I]=U.useState(!1),[S,P]=U.useState(!0),[L,W]=U.useState(new Set),[H,Q]=U.useState(new Set),[se,ve]=U.useState({isOpen:!1,type:"confession",id:""}),[G,Ce]=U.useState(!1),[ge,Ee]=U.useState({isOpen:!1,confessionId:""}),[qe,rt]=U.useState(""),[Ge,Ie]=U.useState(!1),K=async()=>{const{data:$,error:J}=await Re.from("confessions").select("*, replies(*)").order("created_at",{ascending:!1}).limit(50);if($){const fe=new Set;$.forEach(ne=>{ne.username&&ne.username!=="Anonymous"&&fe.add(ne.username),ne.replies&&ne.replies.forEach(ae=>{ae.username&&ae.username!=="Anonymous"&&fe.add(ae.username)})});let de={};if(fe.size>0){const{data:ne}=await Re.from("profiles").select("username, avatar_data").in("username",Array.from(fe));ne&&ne.forEach(ae=>{de[ae.username]=ae.avatar_data})}const xe=$.map(ne=>({...ne,id:String(ne.id),likes:ne.likes||0,replies:ne.replies?ne.replies.sort((ae,be)=>new Date(ae.created_at).getTime()-new Date(be.created_at).getTime()).map(ae=>({...ae,id:String(ae.id),likes:ae.likes||0,avatar:ae.username==="Anonymous"?null:de[ae.username]})):[],avatar:ne.username==="Anonymous"?null:de[ne.username]}));if(d(xe),i){try{const{data:ne,error:ae}=await Re.from("confession_likes").select("confession_id").eq("user_username",i);!ae&&ne&&W(new Set(ne.map(be=>String(be.confession_id))))}catch(ne){console.warn("Confession likes table missing or unavailable",ne)}try{const{data:ne,error:ae}=await Re.from("reply_likes").select("reply_id").eq("user_username",i);!ae&&ne&&Q(new Set(ne.map(be=>String(be.reply_id))))}catch(ne){console.warn("Reply likes table missing or unavailable",ne)}}}g(!1)};U.useEffect(()=>{K();const $=setInterval(K,15e3);return()=>clearInterval($)},[i]);const ce=async()=>{if(!t.trim()||w)return;_(!0);const{error:$}=await Re.from("confessions").insert([{text:t,username:o?"Anonymous":i,likes:0}]);$?alert("Failed to post"):(s(""),K()),_(!1)},X=async($,J)=>{const fe=L.has($),de=fe?J-1:J+1,xe=parseInt($,10);d(ne=>ne.map(ae=>ae.id===$?{...ae,likes:de}:ae)),W(ne=>{const ae=new Set(ne);return fe?ae.delete($):ae.add($),ae});try{if(fe){const{error:ne}=await Re.from("confession_likes").delete().eq("user_username",i).eq("confession_id",xe);if(ne)throw ne}else{const{error:ne}=await Re.from("confession_likes").insert([{user_username:i,confession_id:xe}]);if(ne)throw ne.code==="42P01"&&alert("Like feature is currently being upgraded. Please try again later."),ne}}catch(ne){console.error("Like toggle error",ne),d(ae=>ae.map(be=>be.id===$?{...be,likes:J}:be)),W(ae=>{const be=new Set(ae);return fe?be.add($):be.delete($),be})}},j=async($,J,fe)=>{const de=H.has($),xe=de?fe-1:fe+1,ne=parseInt($,10);d(ae=>ae.map(be=>be.id===J?{...be,replies:be.replies.map(dt=>dt.id===$?{...dt,likes:xe}:dt)}:be)),Q(ae=>{const be=new Set(ae);return de?be.delete($):be.add($),be});try{if(de){const{error:ae}=await Re.from("reply_likes").delete().eq("user_username",i).eq("reply_id",ne);if(ae)throw ae}else{const{error:ae}=await Re.from("reply_likes").insert([{user_username:i,reply_id:ne}]);if(ae)throw ae}}catch(ae){const be=Is(ae);console.error("Reply like error",be),be.includes('column "likes" does not exist')&&alert("System Update Required: The 'likes' column is missing from the database. Please contact admin."),d(dt=>dt.map(Tt=>Tt.id===J?{...Tt,replies:Tt.replies.map(rr=>rr.id===$?{...rr,likes:fe}:rr)}:Tt)),Q(dt=>{const Tt=new Set(dt);return de?Tt.add($):Tt.delete($),Tt})}},F=async $=>{if(!T.trim()||C)return;I(!0);const J=parseInt($,10),{data:fe,error:de}=await Re.from("replies").insert([{confession_id:J,text:T,username:S?"Anonymous":i,likes:0}]).select();if(!de&&fe){N("");const xe={id:String(fe[0].id),text:fe[0].text,username:fe[0].username,created_at:fe[0].created_at,likes:0,avatar:S?null:e};d(ne=>ne.map(ae=>ae.id===$?{...ae,replies:[...ae.replies,xe]}:ae)),K()}else console.error("Reply failed",de),alert("Failed to reply");I(!1)},ye=async()=>{Ce(!0);const{type:$,id:J,parentId:fe}=se;try{if($==="confession"){const de=parseInt(J,10),{error:xe,count:ne}=await Re.from("confessions").delete().eq("id",de).select("id");if(xe)throw xe;if(ne===0)throw new Error("Permission denied or item not found");d(ae=>ae.filter(be=>be.id!==J))}else{const de=parseInt(J,10),{error:xe,count:ne}=await Re.from("replies").delete().eq("id",de).select("id");if(xe)throw xe;if(ne===0)throw new Error("Permission denied");fe&&d(ae=>ae.map(be=>be.id===fe?{...be,replies:be.replies.filter(dt=>dt.id!==J)}:be))}ve({isOpen:!1,type:"confession",id:""})}catch(de){console.error(de),alert("Failed to delete: "+Is(de))}finally{Ce(!1)}},we=async()=>{if(!(!qe||!ge.confessionId)){Ie(!0);try{const $=parseInt(ge.confessionId,10),{error:J}=await Re.from("reports").insert([{confession_id:$,reason:qe,reporter_username:i}]).select();if(J)throw J;alert("Report submitted. An admin will review it shortly."),Ee({isOpen:!1,confessionId:""}),rt("")}catch($){console.error("Report failed",$),alert("Report failed: "+Is($))}finally{Ie(!1)}}};return y.jsxs("div",{className:"pb-20 animate-fade-in max-w-2xl mx-auto",children:[y.jsxs("div",{className:"mb-6",children:[y.jsxs("h2",{className:"text-3xl font-bold text-slate-900 dark:text-white tracking-tight flex items-center gap-3",children:[y.jsx("span",{className:"p-2 bg-blue-500/20 rounded-2xl border border-blue-500/30 text-blue-600 dark:text-blue-400 backdrop-blur-md",children:y.jsx(Nl,{className:"w-6 h-6"})}),"The Chill Zone"]}),y.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1 ml-1 font-medium",children:"Anonymous confessions & chats"})]}),y.jsxs("div",{className:"glass rounded-[2.5rem] p-6 mb-8 border border-white/20 shadow-xl relative overflow-hidden group",children:[y.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-blue-500/10 rounded-full blur-3xl -mr-10 -mt-10 pointer-events-none group-hover:bg-blue-500/20 transition duration-700"}),y.jsx("textarea",{value:t,onChange:$=>s($.target.value),className:"w-full bg-slate-50 dark:bg-black/20 border border-slate-200 dark:border-white/10 rounded-3xl p-5 text-slate-900 dark:text-white placeholder-slate-400 dark:placeholder-slate-500 focus:outline-none focus:border-blue-500/50 focus:bg-white/50 dark:focus:bg-black/40 transition resize-none text-base shadow-inner leading-relaxed",rows:3,placeholder:"What's on your mind? (Be nice!)"}),y.jsxs("div",{className:"flex justify-between items-center mt-4",children:[y.jsxs("div",{className:"flex items-center gap-3 bg-slate-100/50 dark:bg-white/5 px-4 py-2 rounded-2xl border border-slate-200 dark:border-white/10 backdrop-blur-md",children:[y.jsx("span",{className:`text-xs font-bold ${o?"text-slate-500 dark:text-slate-400":"text-blue-600 dark:text-blue-400"}`,children:o?"Anonymous":`@${i}`}),y.jsx("div",{onClick:()=>l(!o),className:`w-10 h-6 rounded-full p-1 cursor-pointer transition-colors duration-300 ${o?"bg-slate-300 dark:bg-slate-700":"bg-blue-600"}`,children:y.jsx("div",{className:`w-4 h-4 bg-white rounded-full shadow-md transform duration-300 ${o?"":"translate-x-4"}`})})]}),y.jsxs("button",{onClick:ce,disabled:!t.trim()||w,className:"bg-blue-600 hover:bg-blue-500 text-white px-6 py-2.5 rounded-2xl font-bold text-sm flex items-center gap-2 transition shadow-lg shadow-blue-500/20 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed border border-white/10",children:[w?y.jsx(Ms,{className:"w-4 h-4 animate-spin"}):y.jsx(zl,{className:"w-4 h-4"}),"Post"]})]})]}),y.jsx("div",{className:"space-y-6",children:f?y.jsxs("div",{className:"text-center py-20 flex flex-col items-center gap-4",children:[y.jsxs("div",{className:"relative",children:[y.jsx("div",{className:"w-12 h-12 rounded-full border-4 border-slate-200 dark:border-white/10 border-t-blue-500 animate-spin"}),y.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:y.jsx(Nl,{className:"w-5 h-5 text-blue-500"})})]}),y.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-medium animate-pulse",children:"Loading confessions..."})]}):u.map($=>y.jsxs("div",{className:"glass rounded-[2.5rem] p-6 border border-white/20 shadow-lg hover:border-white/30 transition duration-300 animate-slide-up",children:[y.jsxs("div",{className:"flex justify-between items-start mb-4",children:[y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center shadow-inner border border-white/10 flex-shrink-0 ${$.username==="Anonymous"?"bg-slate-200 dark:bg-slate-800":"bg-gradient-to-br from-blue-500 to-purple-600"}`,children:$.avatar?y.jsx("img",{src:$.avatar,alt:"Avatar",className:"w-full h-full rounded-2xl object-cover"}):y.jsx(yo,{className:`w-6 h-6 ${$.username==="Anonymous"?"text-slate-500":"text-white"}`})}),y.jsxs("div",{children:[y.jsx("p",{className:`font-bold text-sm ${$.username==="Anonymous"?"text-slate-500 dark:text-slate-400":"text-blue-600 dark:text-blue-300"}`,children:$.username==="Anonymous"?"Anonymous":`@${$.username}`}),y.jsx("p",{className:"text-[10px] text-slate-400 dark:text-slate-500 font-medium",children:new Date($.created_at).toLocaleString([],{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[$.username===i&&y.jsx("button",{onClick:()=>ve({isOpen:!0,type:"confession",id:$.id}),className:"p-2 rounded-xl text-slate-400 hover:text-red-500 hover:bg-red-500/10 transition",title:"Delete Post",children:y.jsx(ho,{className:"w-4 h-4"})}),$.username!==i&&y.jsx("button",{onClick:()=>Ee({isOpen:!0,confessionId:$.id}),className:"p-2 rounded-xl text-slate-400 hover:text-orange-500 hover:bg-orange-500/10 transition",title:"Report Post",children:y.jsx(vp,{className:"w-4 h-4"})})]})]}),y.jsx("p",{className:"text-slate-900 dark:text-slate-100 leading-relaxed text-base mb-6 font-medium whitespace-pre-wrap pl-1",children:$.text}),y.jsxs("div",{className:"flex items-center gap-4 border-t border-slate-200 dark:border-white/10 pt-4",children:[y.jsxs("button",{onClick:()=>X($.id,$.likes),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-bold transition border ${L.has($.id)?"bg-red-500/10 border-red-500/20 text-red-500":"bg-slate-100 dark:bg-white/5 border-transparent text-slate-500 dark:text-slate-400 hover:bg-white/10 hover:text-red-400"}`,children:[y.jsx(Mh,{className:`w-4 h-4 ${L.has($.id)?"fill-current":""}`}),$.likes]}),y.jsxs("button",{onClick:()=>k(b===$.id?null:$.id),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-bold transition border ${b===$.id?"bg-blue-500/10 border-blue-500/20 text-blue-500":"bg-slate-100 dark:bg-white/5 border-transparent text-slate-500 dark:text-slate-400 hover:bg-white/10 hover:text-blue-400"}`,children:[y.jsx(Nl,{className:"w-4 h-4"}),$.replies.length," ",$.replies.length===1?"Reply":"Replies",b===$.id?y.jsx(Yv,{className:"w-3 h-3 ml-1"}):y.jsx(Jv,{className:"w-3 h-3 ml-1"})]})]}),b===$.id&&y.jsxs("div",{className:"mt-6 pl-4 border-l-2 border-slate-200 dark:border-white/10 space-y-4 animate-fade-in",children:[$.replies.map(J=>y.jsxs("div",{className:"bg-slate-50/50 dark:bg-black/20 rounded-2xl p-4 border border-slate-200 dark:border-white/5 backdrop-blur-sm",children:[y.jsxs("div",{className:"flex justify-between items-start mb-2",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center shadow-inner border border-white/10 flex-shrink-0 ${J.username==="Anonymous"?"bg-slate-200 dark:bg-slate-800":"bg-gradient-to-br from-blue-500 to-purple-600"}`,children:J.avatar?y.jsx("img",{src:J.avatar,alt:"Avatar",className:"w-full h-full rounded-full object-cover"}):y.jsx(yo,{className:`w-4 h-4 ${J.username==="Anonymous"?"text-slate-500":"text-white"}`})}),y.jsxs("div",{children:[y.jsx("span",{className:`text-xs font-bold block ${J.username==="Anonymous"?"text-slate-500 dark:text-slate-400":"text-blue-600 dark:text-blue-400"}`,children:J.username==="Anonymous"?"Anonymous":`@${J.username}`}),y.jsx("span",{className:"text-[10px] text-slate-400 dark:text-slate-500",children:new Date(J.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]}),J.username===i&&y.jsx("button",{onClick:()=>ve({isOpen:!0,type:"reply",id:J.id,parentId:$.id}),className:"text-slate-400 hover:text-red-500 transition",children:y.jsx(ho,{className:"w-3.5 h-3.5"})})]}),y.jsx("p",{className:"text-slate-800 dark:text-slate-300 text-sm mb-3 pl-10",children:J.text}),y.jsx("div",{className:"flex items-center gap-3 pl-10",children:y.jsxs("button",{onClick:()=>j(J.id,$.id,J.likes),className:`flex items-center gap-1.5 text-xs font-bold transition ${H.has(J.id)?"text-red-500":"text-slate-400 hover:text-red-400"}`,children:[y.jsx(Mh,{className:`w-3 h-3 ${H.has(J.id)?"fill-current":""}`}),J.likes]})})]},J.id)),y.jsxs("div",{className:"bg-white/40 dark:bg-white/5 rounded-3xl p-1.5 border border-white/20 dark:border-white/10 flex items-center gap-2 shadow-inner backdrop-blur-md",children:[y.jsx("input",{type:"text",value:T,onChange:J=>N(J.target.value),placeholder:"Write a reply...",className:"flex-1 bg-transparent border-none outline-none text-sm text-slate-900 dark:text-white placeholder-slate-500 dark:placeholder-slate-400 pl-3 py-2"}),y.jsxs("div",{onClick:()=>P(!S),className:`h-6 px-2 rounded-full flex items-center gap-1 cursor-pointer transition-colors duration-300 border border-white/10 ${S?"bg-slate-200 dark:bg-slate-700":"bg-blue-600/20"}`,title:S?"Replying Anonymously":`Replying as @${i}`,children:[y.jsx("div",{className:`w-2 h-2 rounded-full transition-colors ${S?"bg-slate-500":"bg-blue-500"}`}),y.jsx("span",{className:`text-[10px] font-bold ${S?"text-slate-600 dark:text-slate-400":"text-blue-600 dark:text-blue-300"}`,children:S?"Anon":"Me"})]}),y.jsx("button",{onClick:()=>F($.id),disabled:!T.trim()||C,className:"p-2 bg-blue-600 text-white rounded-full hover:bg-blue-500 transition shadow-md disabled:opacity-50",children:y.jsx(zl,{className:"w-4 h-4"})})]})]})]},$.id))}),se.isOpen&&y.jsx("div",{className:"fixed inset-0 bg-slate-900/60 dark:bg-black/70 backdrop-blur-md flex items-center justify-center z-50 p-4 animate-fade-in",children:y.jsxs("div",{className:"glass-heavy border border-white/20 p-8 rounded-[2.5rem] max-w-sm w-full shadow-2xl text-center",children:[y.jsx("div",{className:"w-16 h-16 bg-red-500/10 rounded-full flex items-center justify-center mx-auto mb-4 border border-red-500/20",children:y.jsx(ho,{className:"w-8 h-8 text-red-500"})}),y.jsxs("h3",{className:"text-xl font-bold text-slate-900 dark:text-white mb-2",children:["Delete ",se.type,"?"]}),y.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-sm mb-6",children:"This action cannot be undone."}),y.jsxs("div",{className:"flex gap-3",children:[y.jsx("button",{onClick:()=>ve({isOpen:!1,type:"confession",id:""}),className:"flex-1 py-3 bg-slate-100 dark:bg-white/5 hover:bg-slate-200 dark:hover:bg-white/10 text-slate-700 dark:text-slate-300 rounded-xl font-bold transition",children:"Cancel"}),y.jsx("button",{onClick:ye,disabled:G,className:"flex-1 py-3 bg-red-600 hover:bg-red-500 text-white rounded-xl font-bold transition shadow-lg shadow-red-500/20",children:G?"Deleting...":"Delete"})]})]})}),ge.isOpen&&y.jsx("div",{className:"fixed inset-0 bg-slate-900/60 dark:bg-black/70 backdrop-blur-md flex items-center justify-center z-50 p-4 animate-fade-in",children:y.jsxs("div",{className:"glass-heavy border border-white/20 p-8 rounded-[2.5rem] max-w-sm w-full shadow-2xl",children:[y.jsxs("div",{className:"flex justify-between items-center mb-6",children:[y.jsxs("h3",{className:"text-xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[y.jsx(ny,{className:"w-5 h-5 text-orange-500"})," Report Post"]}),y.jsx("button",{onClick:()=>Ee({isOpen:!1,confessionId:""}),className:"text-slate-500 hover:text-slate-900 dark:hover:text-white",children:y.jsx(Ls,{className:"w-5 h-5"})})]}),y.jsx("div",{className:"space-y-3 mb-6",children:["Harassment or Bullying","Spam or Misleading","Inappropriate Content","Hate Speech","Other"].map($=>y.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl bg-slate-50 dark:bg-white/5 border border-slate-200 dark:border-white/10 cursor-pointer hover:bg-blue-50 dark:hover:bg-blue-500/10 hover:border-blue-500/30 transition",children:[y.jsx("input",{type:"radio",name:"reportReason",value:$,checked:qe===$,onChange:J=>rt(J.target.value),className:"text-blue-600 focus:ring-blue-500 bg-slate-200 dark:bg-slate-700 border-slate-400"}),y.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:$})]},$))}),y.jsx("button",{onClick:we,disabled:!qe||Ge,className:"w-full py-3 bg-orange-600 hover:bg-orange-500 text-white rounded-xl font-bold transition shadow-lg shadow-orange-500/20 flex justify-center items-center gap-2",children:Ge?y.jsx(Ms,{className:"w-4 h-4 animate-spin"}):"Submit Report"})]})})]})},Bx=({onLogin:i,logoUrl:e})=>{const[t,s]=U.useState(""),[o,l]=U.useState(""),[u,d]=U.useState(""),[f,g]=U.useState(!1),[w,_]=U.useState(!1),[b,k]=U.useState(""),[T,N]=U.useState(""),[C,I]=U.useState(""),[S,P]=U.useState(""),[L,W]=U.useState(""),[H,Q]=U.useState(""),se=async()=>{if(!t||!o){d("Please enter username and PIN");return}d(""),g(!0);try{let G="";if(t.includes("@"))G=t;else{const{data:rt,error:Ge}=await Re.from("profiles").select("email").eq("username",t).single();if(Ge||!rt){d("User not found"),g(!1);return}G=rt.email}const{error:Ce}=await Re.auth.signInWithPassword({email:G,password:o});if(Ce){d("Incorrect credentials"),g(!1);return}const{data:ge,error:Ee}=await Re.from("profiles").select("*").eq("email",G).single();if(Ee||!ge){d("Profile could not be loaded"),g(!1);return}const qe={username:ge.username,fullname:ge.fullname,email:ge.email,phone:ge.phone,dob:ge.dob,pin:ge.pin,avatar:ge.avatar_data||ge.avatar_url,username_last_changed:ge.username_last_changed};i(qe)}catch(G){d("An unexpected error occurred"),console.error(G)}finally{g(!1)}},ve=async()=>{if(d(""),!b||!T||!H||!C||!S){d("All fields are required");return}if(H.length<4){d("PIN must be at least 4 digits");return}if(!/^[a-zA-Z0-9_]+$/.test(T)){d("Username can only contain letters, numbers, and underscores");return}g(!0);try{const{data:G,error:Ce}=await Re.auth.signUp({email:C,password:H});if(Ce){Ce.message.includes("registered")?d("Email already registered"):d(Ce.message),g(!1);return}if(G.user){const{error:ge}=await Re.from("profiles").insert([{id:G.user.id,username:T,email:C,pin:H,fullname:b,dob:L,phone:S,attendance_data:[]}]);if(ge){ge.code==="23505"?d("Username already taken"):d(Is(ge)),g(!1);return}i({username:T,fullname:b,email:C,phone:S,dob:L,pin:H})}}catch(G){d(G.message||"Registration failed")}finally{g(!1)}};return y.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:y.jsxs("div",{className:"w-full max-w-sm relative z-10 animate-fade-in",children:[y.jsxs("div",{className:"text-center mb-10",children:[y.jsxs("div",{className:"relative inline-block group cursor-pointer",children:[y.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-blue-500 to-purple-500 blur-2xl opacity-40 group-hover:opacity-60 transition duration-700 rounded-full animate-pulse-slow"}),y.jsx("img",{src:e||"/logo.png",alt:"Logo",className:"w-32 h-32 rounded-[2.5rem] mx-auto mb-6 object-cover border-4 border-white/10 shadow-2xl relative z-10 transform group-hover:scale-105 transition duration-500",onError:G=>{G.currentTarget.src="/logo.png"}})]}),y.jsx("h2",{className:"text-4xl font-bold text-slate-900 dark:text-white tracking-tight drop-shadow-sm",children:"Welcome Back"}),y.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2 font-medium",children:"Sign in to Student Hub"})]}),y.jsxs("div",{className:"glass rounded-[3rem] p-8 shadow-[0_20px_60px_-15px_rgba(0,0,0,0.3)] space-y-6 relative overflow-hidden border border-white/20",children:[y.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-white/50 to-transparent opacity-50"}),w?y.jsxs("div",{className:"space-y-4 animate-fade-in",children:[y.jsx("h3",{className:"text-center text-xl font-bold text-slate-900 dark:text-white mb-4",children:"New Account"}),u&&y.jsx("div",{className:"bg-red-500/10 border border-red-500/20 text-red-600 dark:text-red-300 text-xs p-3 rounded-2xl text-center backdrop-blur-md font-medium",children:u}),y.jsxs("div",{className:"space-y-3",children:[y.jsx("input",{type:"text",placeholder:"Full Name",className:"w-full bg-white/50 dark:bg-black/20 border border-white/20 dark:border-white/10 text-slate-900 dark:text-white p-4 rounded-2xl outline-none focus:ring-2 focus:ring-blue-500/30 transition placeholder-slate-400 dark:placeholder-slate-500 text-sm backdrop-blur-sm",value:b,onChange:G=>k(G.target.value)}),y.jsx("input",{type:"text",placeholder:"Username",className:"w-full bg-white/50 dark:bg-black/20 border border-white/20 dark:border-white/10 text-slate-900 dark:text-white p-4 rounded-2xl outline-none focus:ring-2 focus:ring-blue-500/30 transition placeholder-slate-400 dark:placeholder-slate-500 text-sm backdrop-blur-sm",value:T,onChange:G=>N(G.target.value)}),y.jsx("input",{type:"email",placeholder:"Email",className:"w-full bg-white/50 dark:bg-black/20 border border-white/20 dark:border-white/10 text-slate-900 dark:text-white p-4 rounded-2xl outline-none focus:ring-2 focus:ring-blue-500/30 transition placeholder-slate-400 dark:placeholder-slate-500 text-sm backdrop-blur-sm",value:C,onChange:G=>I(G.target.value)}),y.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[y.jsx("input",{type:"date",className:"w-full bg-white/50 dark:bg-black/20 border border-white/20 dark:border-white/10 text-slate-900 dark:text-white p-4 rounded-2xl outline-none focus:ring-2 focus:ring-blue-500/30 transition text-sm backdrop-blur-sm",value:L,onChange:G=>W(G.target.value)}),y.jsx("input",{type:"tel",placeholder:"Phone",className:"w-full bg-white/50 dark:bg-black/20 border border-white/20 dark:border-white/10 text-slate-900 dark:text-white p-4 rounded-2xl outline-none focus:ring-2 focus:ring-blue-500/30 transition placeholder-slate-400 dark:placeholder-slate-500 text-sm backdrop-blur-sm",value:S,onChange:G=>P(G.target.value)})]}),y.jsx("input",{type:"password",placeholder:"PIN (4+ digits)",className:"w-full bg-white/50 dark:bg-black/20 border border-white/20 dark:border-white/10 text-slate-900 dark:text-white p-4 rounded-2xl outline-none focus:ring-2 focus:ring-blue-500/30 transition placeholder-slate-400 dark:placeholder-slate-500 text-sm backdrop-blur-sm",value:H,onChange:G=>Q(G.target.value)})]}),y.jsx("button",{onClick:ve,disabled:f,className:"w-full bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500 text-white py-4 rounded-2xl font-bold transition flex justify-center items-center gap-2 shadow-lg shadow-green-500/20 active:scale-95 border border-white/10",children:f?y.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}):"Sign Up"}),y.jsx("button",{onClick:()=>_(!1),className:"w-full text-sm text-slate-500 hover:text-slate-800 dark:hover:text-white transition py-2",children:"Cancel"})]}):y.jsxs("div",{className:"space-y-6 animate-fade-in",children:[u&&y.jsx("div",{className:"bg-red-500/10 border border-red-500/20 text-red-600 dark:text-red-300 text-xs p-3 rounded-2xl text-center backdrop-blur-md font-medium",children:u}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-xs text-slate-500 dark:text-slate-400 ml-2 font-bold uppercase tracking-widest opacity-80",children:"Username"}),y.jsx("input",{type:"text",value:t,onChange:G=>s(G.target.value),className:"w-full bg-white/50 dark:bg-black/20 border border-white/20 dark:border-white/10 text-slate-900 dark:text-white p-4 rounded-2xl outline-none focus:ring-2 focus:ring-blue-500/30 transition backdrop-blur-sm placeholder-slate-400 dark:placeholder-slate-600 font-medium",placeholder:"Enter username"})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-xs text-slate-500 dark:text-slate-400 ml-2 font-bold uppercase tracking-widest opacity-80",children:"PIN"}),y.jsx("input",{type:"password",value:o,onChange:G=>l(G.target.value),onKeyDown:G=>G.key==="Enter"&&se(),className:"w-full bg-white/50 dark:bg-black/20 border border-white/20 dark:border-white/10 text-slate-900 dark:text-white p-4 rounded-2xl outline-none focus:ring-2 focus:ring-blue-500/30 transition tracking-[0.5em] text-center font-bold text-xl placeholder-slate-400 dark:placeholder-slate-600 backdrop-blur-sm",placeholder:""})]}),y.jsx("button",{onClick:se,disabled:f,className:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-500 hover:to-indigo-500 text-white py-4 rounded-2xl font-bold transition shadow-lg shadow-blue-500/30 flex justify-center items-center gap-2 active:scale-95 transform duration-200 border border-white/10",children:f?y.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):"Login"}),y.jsx("div",{className:"pt-2 text-center",children:y.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 font-medium",children:["New student? ",y.jsx("button",{onClick:()=>{_(!0),d("")},className:"text-blue-600 dark:text-blue-300 hover:text-blue-500 dark:hover:text-blue-200 transition font-bold ml-1",children:"Create Account"})]})})]})]})]})})};class _u{}function Ne(i,e){const t=/\{([^}]+)\}/g;return i.replace(t,(s,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const l=e[o];return l!=null?String(l):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function v(i,e,t){for(let l=0;l<e.length-1;l++){const u=e[l];if(u.endsWith("[]")){const d=u.slice(0,-2);if(!(d in i))if(Array.isArray(t))i[d]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(i[d])){const f=i[d];if(Array.isArray(t))for(let g=0;g<f.length;g++){const w=f[g];v(w,e.slice(l+1),t[g])}else for(const g of f)v(g,e.slice(l+1),t)}return}else if(u.endsWith("[0]")){const d=u.slice(0,-3);d in i||(i[d]=[{}]);const f=i[d];v(f[0],e.slice(l+1),t);return}(!i[u]||typeof i[u]!="object")&&(i[u]={}),i=i[u]}const s=e[e.length-1],o=i[s];if(o!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===o)return;if(typeof o=="object"&&typeof t=="object"&&o!==null&&t!==null)Object.assign(o,t);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else i[s]=t}function m(i,e){try{if(e.length===1&&e[0]==="_self")return i;for(let t=0;t<e.length;t++){if(typeof i!="object"||i===null)return;const s=e[t];if(s.endsWith("[]")){const o=s.slice(0,-2);if(o in i){const l=i[o];return Array.isArray(l)?l.map(u=>m(u,e.slice(t+1))):void 0}else return}else i=i[s]}return i}catch(t){if(t instanceof TypeError)return;throw t}}function Ct(i,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(i.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function vm(i,e){const t=Ct(i,e);return t?t.startsWith("publishers/")&&i.isVertexAI()?`projects/${i.getProject()}/locations/${i.getLocation()}/${t}`:t.startsWith("models/")&&i.isVertexAI()?`projects/${i.getProject()}/locations/${i.getLocation()}/publishers/google/${t}`:t:""}function df(i,e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function Fs(i,e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(t=>df(i,t)):[df(i,e)]}function ym(i){return i!=null&&typeof i=="object"&&"parts"in i&&Array.isArray(i.parts)}function Vx(i){return i!=null&&typeof i=="object"&&"functionCall"in i}function bu(i){return!(i==null||Vx(i))}function wm(i){return i==null||Array.isArray(i)&&i.length===0?!1:i.every(bu)}function Ot(i,e){if(e==null)throw new Error("ContentUnion is required");return ym(e)?e:bu(e)?{role:"user",parts:Fs(i,e)}:{role:"model",parts:Fs(i,e)}}function xm(i,e){if(!e)return[];if(i.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const s=Ot(i,t);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(i.isVertexAI()){const t=Ot(i,e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>Ot(i,t)):[Ot(i,e)]}function fo(i,e,t){t.length!==0&&(wm(t)?e.push({role:"user",parts:Fs(i,t)}):e.push({role:"model",parts:Fs(i,t)}),t.length=0)}function zx(i,e,t,s){bu(s)===wm(t)||(fo(i,e,t),t.length=0),t.push(s)}function Fe(i,e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e))return[Ot(i,e)];const t=[],s=[];for(const o of e)if(ym(o))fo(i,t,s),t.push(o);else if(typeof o=="string"||typeof o=="object"&&!Array.isArray(o))zx(i,t,s,o);else if(Array.isArray(o))fo(i,t,s),t.push({role:"user",parts:Fs(i,o)});else throw new Error(`Unsupported content type: ${typeof o}`);return fo(i,t,s),t}function _m(i,e){if(!i.isVertexAI()&&("title"in e&&delete e.title,"default"in e))throw new Error("Default value is not supported in the response schema for the Gemini API.");if("anyOf"in e){if(!i.isVertexAI())throw new Error("AnyOf is not supported in the response schema for the Gemini API.");if(e.anyOf!==void 0)for(const t of e.anyOf)_m(i,t)}}function bm(i,e){return _m(i,e),e}function km(i,e){if(typeof e=="object"&&"voiceConfig"in e)return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function Em(i,e){return e}function Dr(i,e){if(!Array.isArray(e))throw new Error("tool is required and must be an array of Tools");return e}function qx(i,e,t,s=1){const o=!e.startsWith(`${t}/`)&&e.split("/").length===s;return i.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${i.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${i.getProject()}/locations/${i.getLocation()}/${e}`:o?`projects/${i.getProject()}/locations/${i.getLocation()}/${t}/${e}`:e:o?`${t}/${e}`:e}function On(i,e){if(typeof e!="string")throw new Error("name must be a string");return qx(i,e,"cachedContents")}function Sm(i,e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}function Hx(i,e){if(typeof e!="string")throw new Error("fromName must be a string");return e.startsWith("files/")?e.split("files/")[1]:e}var Eo;(function(i){i.PAGED_ITEM_BATCH_JOBS="batchJobs",i.PAGED_ITEM_MODELS="models",i.PAGED_ITEM_TUNING_JOBS="tuningJobs",i.PAGED_ITEM_FILES="files",i.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Eo||(Eo={}));class Cm{constructor(e,t,s,o){this.pageInternal=[],this.requestInternal=t,this.init(e,s,o)}init(e,t,s){var o,l;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.idxInternal=0;let u={config:{}};s?typeof s=="object"?u=Object.assign({},s):u=s:u={config:{}},u.config&&(u.config.pageToken=t.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(l=(o=u.config)===null||o===void 0?void 0:o.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}var hf;(function(i){i.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",i.OUTCOME_OK="OUTCOME_OK",i.OUTCOME_FAILED="OUTCOME_FAILED",i.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(hf||(hf={}));var ff;(function(i){i.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",i.PYTHON="PYTHON"})(ff||(ff={}));var pf;(function(i){i.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",i.STRING="STRING",i.NUMBER="NUMBER",i.INTEGER="INTEGER",i.BOOLEAN="BOOLEAN",i.ARRAY="ARRAY",i.OBJECT="OBJECT"})(pf||(pf={}));var mf;(function(i){i.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",i.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",i.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",i.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",i.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(mf||(mf={}));var gf;(function(i){i.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",i.SEVERITY="SEVERITY",i.PROBABILITY="PROBABILITY"})(gf||(gf={}));var vf;(function(i){i.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE",i.OFF="OFF"})(vf||(vf={}));var yf;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(yf||(yf={}));var wf;(function(i){i.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",i.STOP="STOP",i.MAX_TOKENS="MAX_TOKENS",i.SAFETY="SAFETY",i.RECITATION="RECITATION",i.OTHER="OTHER",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.SPII="SPII",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL"})(wf||(wf={}));var xf;(function(i){i.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",i.NEGLIGIBLE="NEGLIGIBLE",i.LOW="LOW",i.MEDIUM="MEDIUM",i.HIGH="HIGH"})(xf||(xf={}));var _f;(function(i){i.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",i.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",i.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",i.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",i.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(_f||(_f={}));var bf;(function(i){i.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",i.SAFETY="SAFETY",i.OTHER="OTHER",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT"})(bf||(bf={}));var kf;(function(i){i.STATE_UNSPECIFIED="STATE_UNSPECIFIED",i.ACTIVE="ACTIVE",i.ERROR="ERROR"})(kf||(kf={}));var Ef;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(Ef||(Ef={}));var Sf;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.AUTO="AUTO",i.ANY="ANY",i.NONE="NONE"})(Sf||(Sf={}));var Cf;(function(i){i.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",i.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",i.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",i.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Cf||(Cf={}));var Tf;(function(i){i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE"})(Tf||(Tf={}));var Nf;(function(i){i.DONT_ALLOW="DONT_ALLOW",i.ALLOW_ADULT="ALLOW_ADULT",i.ALLOW_ALL="ALLOW_ALL"})(Nf||(Nf={}));var Rf;(function(i){i.auto="auto",i.en="en",i.ja="ja",i.ko="ko",i.hi="hi"})(Rf||(Rf={}));var Pf;(function(i){i.STATE_UNSPECIFIED="STATE_UNSPECIFIED",i.PROCESSING="PROCESSING",i.ACTIVE="ACTIVE",i.FAILED="FAILED"})(Pf||(Pf={}));var Af;(function(i){i.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",i.UPLOADED="UPLOADED",i.GENERATED="GENERATED"})(Af||(Af={}));var If;(function(i){i.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",i.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",i.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",i.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",i.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(If||(If={}));var jf;(function(i){i.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",i.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",i.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",i.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(jf||(jf={}));var Of;(function(i){i.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",i.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",i.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",i.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Of||(Of={}));var Mf;(function(i){i.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",i.TEXT="TEXT",i.IMAGE="IMAGE",i.AUDIO="AUDIO"})(Mf||(Mf={}));class uo{get text(){var e,t,s,o,l,u,d,f;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let g="",w=!1;const _=[];for(const b of(f=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&f!==void 0?f:[]){for(const[k,T]of Object.entries(b))k!=="text"&&k!=="thought"&&(T!==null||T!==void 0)&&_.push(k);if(typeof b.text=="string"){if(typeof b.thought=="boolean"&&b.thought)continue;w=!0,g+=b.text}}return _.length>0&&console.warn(`there are non-text parts ${_} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),w?g:void 0}get functionCalls(){var e,t,s,o,l,u,d,f;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const g=(f=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||f===void 0?void 0:f.filter(w=>w.functionCall).map(w=>w.functionCall).filter(w=>w!==void 0);if(g?.length!==0)return g}get executableCode(){var e,t,s,o,l,u,d,f,g;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const w=(f=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||f===void 0?void 0:f.filter(_=>_.executableCode).map(_=>_.executableCode).filter(_=>_!==void 0);if(w?.length!==0)return(g=w?.[0])===null||g===void 0?void 0:g.code}get codeExecutionResult(){var e,t,s,o,l,u,d,f,g;if(((o=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const w=(f=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||f===void 0?void 0:f.filter(_=>_.codeExecutionResult).map(_=>_.codeExecutionResult).filter(_=>_!==void 0);if(w?.length!==0)return(g=w?.[0])===null||g===void 0?void 0:g.output}}class Lf{}class Df{}class Uf{}class $f{}class Ff{}class Bf{}class Vf{}class Tm{constructor(e){const t={};for(const s of e.headers.entries())t[s[0]]=s[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class zf{}class Wx extends _u{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Cm(Eo.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(t),t)}async create(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=f_(this.apiClient,e);return l=Ne("cachedContents",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions}).then(f=>f.json()),o.then(f=>mo(this.apiClient,f))}else{const d=h_(this.apiClient,e);return l=Ne("cachedContents",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions}).then(f=>f.json()),o.then(f=>po(this.apiClient,f))}}async get(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=m_(this.apiClient,e);return l=Ne("{name}",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions}).then(f=>f.json()),o.then(f=>mo(this.apiClient,f))}else{const d=p_(this.apiClient,e);return l=Ne("{name}",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions}).then(f=>f.json()),o.then(f=>po(this.apiClient,f))}}async delete(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=v_(this.apiClient,e);return l=Ne("{name}",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions}).then(f=>f.json()),o.then(f=>{const g=T_(this.apiClient),w=new Ff;return Object.assign(w,g),w})}else{const d=g_(this.apiClient,e);return l=Ne("{name}",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions}).then(f=>f.json()),o.then(f=>{const g=C_(this.apiClient),w=new Ff;return Object.assign(w,g),w})}}async update(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=__(this.apiClient,e);return l=Ne("{name}",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions}).then(f=>f.json()),o.then(f=>mo(this.apiClient,f))}else{const d=x_(this.apiClient,e);return l=Ne("{name}",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions}).then(f=>f.json()),o.then(f=>po(this.apiClient,f))}}async listInternal(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=S_(this.apiClient,e);return l=Ne("cachedContents",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions}).then(f=>f.json()),o.then(f=>{const g=R_(this.apiClient,f),w=new Bf;return Object.assign(w,g),w})}else{const d=E_(this.apiClient,e);return l=Ne("cachedContents",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions}).then(f=>f.json()),o.then(f=>{const g=N_(this.apiClient,f),w=new Bf;return Object.assign(w,g),w})}}}function Gx(i,e){const t={};if(m(e,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const s=m(e,["thought"]);s!=null&&v(t,["thought"],s);const o=m(e,["codeExecutionResult"]);o!=null&&v(t,["codeExecutionResult"],o);const l=m(e,["executableCode"]);l!=null&&v(t,["executableCode"],l);const u=m(e,["fileData"]);u!=null&&v(t,["fileData"],u);const d=m(e,["functionCall"]);d!=null&&v(t,["functionCall"],d);const f=m(e,["functionResponse"]);f!=null&&v(t,["functionResponse"],f);const g=m(e,["inlineData"]);g!=null&&v(t,["inlineData"],g);const w=m(e,["text"]);return w!=null&&v(t,["text"],w),t}function Kx(i,e){const t={},s=m(e,["videoMetadata"]);s!=null&&v(t,["videoMetadata"],s);const o=m(e,["thought"]);o!=null&&v(t,["thought"],o);const l=m(e,["codeExecutionResult"]);l!=null&&v(t,["codeExecutionResult"],l);const u=m(e,["executableCode"]);u!=null&&v(t,["executableCode"],u);const d=m(e,["fileData"]);d!=null&&v(t,["fileData"],d);const f=m(e,["functionCall"]);f!=null&&v(t,["functionCall"],f);const g=m(e,["functionResponse"]);g!=null&&v(t,["functionResponse"],g);const w=m(e,["inlineData"]);w!=null&&v(t,["inlineData"],w);const _=m(e,["text"]);return _!=null&&v(t,["text"],_),t}function qf(i,e){const t={},s=m(e,["parts"]);s!=null&&(Array.isArray(s)?v(t,["parts"],s.map(l=>Gx(i,l))):v(t,["parts"],s));const o=m(e,["role"]);return o!=null&&v(t,["role"],o),t}function Hf(i,e){const t={},s=m(e,["parts"]);s!=null&&(Array.isArray(s)?v(t,["parts"],s.map(l=>Kx(i,l))):v(t,["parts"],s));const o=m(e,["role"]);return o!=null&&v(t,["role"],o),t}function Jx(i,e){const t={},s=m(e,["example"]);s!=null&&v(t,["example"],s);const o=m(e,["pattern"]);o!=null&&v(t,["pattern"],o);const l=m(e,["minimum"]);l!=null&&v(t,["minimum"],l);const u=m(e,["default"]);u!=null&&v(t,["default"],u);const d=m(e,["anyOf"]);d!=null&&v(t,["anyOf"],d);const f=m(e,["maxLength"]);f!=null&&v(t,["maxLength"],f);const g=m(e,["title"]);g!=null&&v(t,["title"],g);const w=m(e,["minLength"]);w!=null&&v(t,["minLength"],w);const _=m(e,["minProperties"]);_!=null&&v(t,["minProperties"],_);const b=m(e,["maximum"]);b!=null&&v(t,["maximum"],b);const k=m(e,["maxProperties"]);k!=null&&v(t,["maxProperties"],k);const T=m(e,["description"]);T!=null&&v(t,["description"],T);const N=m(e,["enum"]);N!=null&&v(t,["enum"],N);const C=m(e,["format"]);C!=null&&v(t,["format"],C);const I=m(e,["items"]);I!=null&&v(t,["items"],I);const S=m(e,["maxItems"]);S!=null&&v(t,["maxItems"],S);const P=m(e,["minItems"]);P!=null&&v(t,["minItems"],P);const L=m(e,["nullable"]);L!=null&&v(t,["nullable"],L);const W=m(e,["properties"]);W!=null&&v(t,["properties"],W);const H=m(e,["propertyOrdering"]);H!=null&&v(t,["propertyOrdering"],H);const Q=m(e,["required"]);Q!=null&&v(t,["required"],Q);const se=m(e,["type"]);return se!=null&&v(t,["type"],se),t}function Yx(i,e){const t={};if(m(e,["response"])!==void 0)throw new Error("response parameter is not supported in Gemini API.");const s=m(e,["description"]);s!=null&&v(t,["description"],s);const o=m(e,["name"]);o!=null&&v(t,["name"],o);const l=m(e,["parameters"]);return l!=null&&v(t,["parameters"],l),t}function Qx(i,e){const t={},s=m(e,["response"]);s!=null&&v(t,["response"],Jx(i,s));const o=m(e,["description"]);o!=null&&v(t,["description"],o);const l=m(e,["name"]);l!=null&&v(t,["name"],l);const u=m(e,["parameters"]);return u!=null&&v(t,["parameters"],u),t}function Xx(i,e){return{}}function Zx(i,e){return{}}function e_(i,e){const t={},s=m(e,["mode"]);s!=null&&v(t,["mode"],s);const o=m(e,["dynamicThreshold"]);return o!=null&&v(t,["dynamicThreshold"],o),t}function t_(i,e){const t={},s=m(e,["mode"]);s!=null&&v(t,["mode"],s);const o=m(e,["dynamicThreshold"]);return o!=null&&v(t,["dynamicThreshold"],o),t}function n_(i,e){const t={},s=m(e,["dynamicRetrievalConfig"]);return s!=null&&v(t,["dynamicRetrievalConfig"],e_(i,s)),t}function r_(i,e){const t={},s=m(e,["dynamicRetrievalConfig"]);return s!=null&&v(t,["dynamicRetrievalConfig"],t_(i,s)),t}function s_(i,e){const t={},s=m(e,["functionDeclarations"]);if(s!=null&&(Array.isArray(s)?v(t,["functionDeclarations"],s.map(d=>Yx(i,d))):v(t,["functionDeclarations"],s)),m(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");m(e,["googleSearch"])!=null&&v(t,["googleSearch"],Xx());const l=m(e,["googleSearchRetrieval"]);l!=null&&v(t,["googleSearchRetrieval"],n_(i,l));const u=m(e,["codeExecution"]);return u!=null&&v(t,["codeExecution"],u),t}function i_(i,e){const t={},s=m(e,["functionDeclarations"]);s!=null&&(Array.isArray(s)?v(t,["functionDeclarations"],s.map(f=>Qx(i,f))):v(t,["functionDeclarations"],s));const o=m(e,["retrieval"]);o!=null&&v(t,["retrieval"],o),m(e,["googleSearch"])!=null&&v(t,["googleSearch"],Zx());const u=m(e,["googleSearchRetrieval"]);u!=null&&v(t,["googleSearchRetrieval"],r_(i,u));const d=m(e,["codeExecution"]);return d!=null&&v(t,["codeExecution"],d),t}function o_(i,e){const t={},s=m(e,["mode"]);s!=null&&v(t,["mode"],s);const o=m(e,["allowedFunctionNames"]);return o!=null&&v(t,["allowedFunctionNames"],o),t}function a_(i,e){const t={},s=m(e,["mode"]);s!=null&&v(t,["mode"],s);const o=m(e,["allowedFunctionNames"]);return o!=null&&v(t,["allowedFunctionNames"],o),t}function l_(i,e){const t={},s=m(e,["functionCallingConfig"]);return s!=null&&v(t,["functionCallingConfig"],o_(i,s)),t}function u_(i,e){const t={},s=m(e,["functionCallingConfig"]);return s!=null&&v(t,["functionCallingConfig"],a_(i,s)),t}function c_(i,e,t){const s={},o=m(e,["ttl"]);t!==void 0&&o!=null&&v(t,["ttl"],o);const l=m(e,["expireTime"]);t!==void 0&&l!=null&&v(t,["expireTime"],l);const u=m(e,["displayName"]);t!==void 0&&u!=null&&v(t,["displayName"],u);const d=m(e,["contents"]);t!==void 0&&d!=null&&(Array.isArray(d)?v(t,["contents"],Fe(i,Fe(i,d).map(_=>qf(i,_)))):v(t,["contents"],Fe(i,d)));const f=m(e,["systemInstruction"]);t!==void 0&&f!=null&&v(t,["systemInstruction"],qf(i,Ot(i,f)));const g=m(e,["tools"]);t!==void 0&&g!=null&&(Array.isArray(g)?v(t,["tools"],g.map(_=>s_(i,_))):v(t,["tools"],g));const w=m(e,["toolConfig"]);return t!==void 0&&w!=null&&v(t,["toolConfig"],l_(i,w)),s}function d_(i,e,t){const s={},o=m(e,["ttl"]);t!==void 0&&o!=null&&v(t,["ttl"],o);const l=m(e,["expireTime"]);t!==void 0&&l!=null&&v(t,["expireTime"],l);const u=m(e,["displayName"]);t!==void 0&&u!=null&&v(t,["displayName"],u);const d=m(e,["contents"]);t!==void 0&&d!=null&&(Array.isArray(d)?v(t,["contents"],Fe(i,Fe(i,d).map(_=>Hf(i,_)))):v(t,["contents"],Fe(i,d)));const f=m(e,["systemInstruction"]);t!==void 0&&f!=null&&v(t,["systemInstruction"],Hf(i,Ot(i,f)));const g=m(e,["tools"]);t!==void 0&&g!=null&&(Array.isArray(g)?v(t,["tools"],g.map(_=>i_(i,_))):v(t,["tools"],g));const w=m(e,["toolConfig"]);return t!==void 0&&w!=null&&v(t,["toolConfig"],u_(i,w)),s}function h_(i,e){const t={},s=m(e,["model"]);s!=null&&v(t,["model"],vm(i,s));const o=m(e,["config"]);return o!=null&&v(t,["config"],c_(i,o,t)),t}function f_(i,e){const t={},s=m(e,["model"]);s!=null&&v(t,["model"],vm(i,s));const o=m(e,["config"]);return o!=null&&v(t,["config"],d_(i,o,t)),t}function p_(i,e){const t={},s=m(e,["name"]);s!=null&&v(t,["_url","name"],On(i,s));const o=m(e,["config"]);return o!=null&&v(t,["config"],o),t}function m_(i,e){const t={},s=m(e,["name"]);s!=null&&v(t,["_url","name"],On(i,s));const o=m(e,["config"]);return o!=null&&v(t,["config"],o),t}function g_(i,e){const t={},s=m(e,["name"]);s!=null&&v(t,["_url","name"],On(i,s));const o=m(e,["config"]);return o!=null&&v(t,["config"],o),t}function v_(i,e){const t={},s=m(e,["name"]);s!=null&&v(t,["_url","name"],On(i,s));const o=m(e,["config"]);return o!=null&&v(t,["config"],o),t}function y_(i,e,t){const s={},o=m(e,["ttl"]);t!==void 0&&o!=null&&v(t,["ttl"],o);const l=m(e,["expireTime"]);return t!==void 0&&l!=null&&v(t,["expireTime"],l),s}function w_(i,e,t){const s={},o=m(e,["ttl"]);t!==void 0&&o!=null&&v(t,["ttl"],o);const l=m(e,["expireTime"]);return t!==void 0&&l!=null&&v(t,["expireTime"],l),s}function x_(i,e){const t={},s=m(e,["name"]);s!=null&&v(t,["_url","name"],On(i,s));const o=m(e,["config"]);return o!=null&&v(t,["config"],y_(i,o,t)),t}function __(i,e){const t={},s=m(e,["name"]);s!=null&&v(t,["_url","name"],On(i,s));const o=m(e,["config"]);return o!=null&&v(t,["config"],w_(i,o,t)),t}function b_(i,e,t){const s={},o=m(e,["pageSize"]);t!==void 0&&o!=null&&v(t,["_query","pageSize"],o);const l=m(e,["pageToken"]);return t!==void 0&&l!=null&&v(t,["_query","pageToken"],l),s}function k_(i,e,t){const s={},o=m(e,["pageSize"]);t!==void 0&&o!=null&&v(t,["_query","pageSize"],o);const l=m(e,["pageToken"]);return t!==void 0&&l!=null&&v(t,["_query","pageToken"],l),s}function E_(i,e){const t={},s=m(e,["config"]);return s!=null&&v(t,["config"],b_(i,s,t)),t}function S_(i,e){const t={},s=m(e,["config"]);return s!=null&&v(t,["config"],k_(i,s,t)),t}function po(i,e){const t={},s=m(e,["name"]);s!=null&&v(t,["name"],s);const o=m(e,["displayName"]);o!=null&&v(t,["displayName"],o);const l=m(e,["model"]);l!=null&&v(t,["model"],l);const u=m(e,["createTime"]);u!=null&&v(t,["createTime"],u);const d=m(e,["updateTime"]);d!=null&&v(t,["updateTime"],d);const f=m(e,["expireTime"]);f!=null&&v(t,["expireTime"],f);const g=m(e,["usageMetadata"]);return g!=null&&v(t,["usageMetadata"],g),t}function mo(i,e){const t={},s=m(e,["name"]);s!=null&&v(t,["name"],s);const o=m(e,["displayName"]);o!=null&&v(t,["displayName"],o);const l=m(e,["model"]);l!=null&&v(t,["model"],l);const u=m(e,["createTime"]);u!=null&&v(t,["createTime"],u);const d=m(e,["updateTime"]);d!=null&&v(t,["updateTime"],d);const f=m(e,["expireTime"]);f!=null&&v(t,["expireTime"],f);const g=m(e,["usageMetadata"]);return g!=null&&v(t,["usageMetadata"],g),t}function C_(i,e){return{}}function T_(i,e){return{}}function N_(i,e){const t={},s=m(e,["nextPageToken"]);s!=null&&v(t,["nextPageToken"],s);const o=m(e,["cachedContents"]);return o!=null&&(Array.isArray(o)?v(t,["cachedContents"],o.map(l=>po(i,l))):v(t,["cachedContents"],o)),t}function R_(i,e){const t={},s=m(e,["nextPageToken"]);s!=null&&v(t,["nextPageToken"],s);const o=m(e,["cachedContents"]);return o!=null&&(Array.isArray(o)?v(t,["cachedContents"],o.map(l=>mo(i,l))):v(t,["cachedContents"],o)),t}function Wf(i){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&i[e],s=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function yt(i){return this instanceof yt?(this.v=i,this):new yt(i)}function So(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(i,e||[]),o,l=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",u),o[Symbol.asyncIterator]=function(){return this},o;function u(k){return function(T){return Promise.resolve(T).then(k,_)}}function d(k,T){s[k]&&(o[k]=function(N){return new Promise(function(C,I){l.push([k,N,C,I])>1||f(k,N)})},T&&(o[k]=T(o[k])))}function f(k,T){try{g(s[k](T))}catch(N){b(l[0][3],N)}}function g(k){k.value instanceof yt?Promise.resolve(k.value.v).then(w,_):b(l[0][2],k)}function w(k){f("next",k)}function _(k){f("throw",k)}function b(k,T){k(T),l.shift(),l.length&&f(l[0][0],l[0][1])}}function su(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],t;return e?e.call(i):(i=typeof Wf=="function"?Wf(i):i[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(l){t[l]=i[l]&&function(u){return new Promise(function(d,f){u=i[l](u),o(d,f,u.done,u.value)})}}function o(l,u,d,f){Promise.resolve(f).then(function(g){l({value:g,done:d})},u)}}function P_(i){var e;if(i.candidates==null||i.candidates.length===0)return!1;const t=(e=i.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:Nm(t)}function Nm(i){if(i.parts===void 0||i.parts.length===0)return!1;for(const e of i.parts)if(e===void 0||Object.keys(e).length===0||e.text!==void 0&&e.text==="")return!1;return!0}function A_(i){if(i.length!==0){if(i[0].role!=="user")throw new Error("History must start with a user turn.");for(const e of i)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function I_(i){if(i===void 0||i.length===0)return[];const e=[],t=i.length;let s=0,o=i[0];for(;s<t;)if(i[s].role==="user")o=i[s],s++;else{const l=[];let u=!0;for(;s<t&&i[s].role==="model";)l.push(i[s]),u&&!Nm(i[s])&&(u=!1),s++;u&&(e.push(o),e.push(...l))}return e}class j_{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new O_(this.apiClient,this.modelsModule,e.model,e.config,e.history)}}class O_{constructor(e,t,s,o={},l=[]){this.apiClient=e,this.modelsModule=t,this.model=s,this.config=o,this.history=l,this.sendPromise=Promise.resolve(),A_(l)}async sendMessage(e){var t;await this.sendPromise;const s=Ot(this.apiClient,e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var l,u;const f=(u=(l=(await o).candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content,g=f?[f]:[];this.recordHistory(s,g)})(),await this.sendPromise,o}async sendMessageStream(e){var t;await this.sendPromise;const s=Ot(this.apiClient,e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=o.then(()=>{});const l=await o;return this.processStreamResponse(l,s)}getHistory(e=!1){return e?I_(this.history):this.history}processStreamResponse(e,t){var s,o;return So(this,arguments,function*(){var u,d,f,g;const w=[];try{for(var _=!0,b=su(e),k;k=yield yt(b.next()),u=k.done,!u;_=!0){g=k.value,_=!1;const T=g;if(P_(T)){const N=(o=(s=T.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content;N!==void 0&&w.push(N)}yield yield yt(T)}}catch(T){d={error:T}}finally{try{!_&&!u&&(f=b.return)&&(yield yt(f.call(b)))}finally{if(d)throw d.error}}this.recordHistory(t,w)})}recordHistory(e,t){let s=[];t.length>0&&t.every(o=>o.role==="model")?s=t:s.push({role:"model",parts:[]}),this.history.push(e),this.history.push(...s)}}class M_ extends _u{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>await this.generateContentInternal(t),this.generateContentStream=async t=>await this.generateContentStreamInternal(t)}async generateContentInternal(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=Kf(this.apiClient,e);return l=Ne("{model}:generateContent",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions}).then(f=>f.json()),o.then(f=>{const g=Yf(this.apiClient,f),w=new uo;return Object.assign(w,g),w})}else{const d=Gf(this.apiClient,e);return l=Ne("{model}:generateContent",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions}).then(f=>f.json()),o.then(f=>{const g=Jf(this.apiClient,f),w=new uo;return Object.assign(w,g),w})}}async generateContentStreamInternal(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=Kf(this.apiClient,e);l=Ne("{model}:streamGenerateContent?alt=sse",d._url),u=d._query,delete d.config,delete d._url,delete d._query;const f=this.apiClient;return o=f.requestStream({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions}),o.then(function(g){return So(this,arguments,function*(){var w,_,b,k;try{for(var T=!0,N=su(g),C;C=yield yt(N.next()),w=C.done,!w;T=!0){k=C.value,T=!1;const S=Yf(f,k),P=new uo;Object.assign(P,S),yield yield yt(P)}}catch(I){_={error:I}}finally{try{!T&&!w&&(b=N.return)&&(yield yt(b.call(N)))}finally{if(_)throw _.error}}})})}else{const d=Gf(this.apiClient,e);l=Ne("{model}:streamGenerateContent?alt=sse",d._url),u=d._query,delete d.config,delete d._url,delete d._query;const f=this.apiClient;return o=f.requestStream({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions}),o.then(function(g){return So(this,arguments,function*(){var w,_,b,k;try{for(var T=!0,N=su(g),C;C=yield yt(N.next()),w=C.done,!w;T=!0){k=C.value,T=!1;const S=Jf(f,k),P=new uo;Object.assign(P,S),yield yield yt(P)}}catch(I){_={error:I}}finally{try{!T&&!w&&(b=N.return)&&(yield yt(b.call(N)))}finally{if(_)throw _.error}}})})}}async embedContent(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=hb(this.apiClient,e);return l=Ne("{model}:predict",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions}).then(f=>f.json()),o.then(f=>{const g=Mb(this.apiClient,f),w=new Lf;return Object.assign(w,g),w})}else{const d=db(this.apiClient,e);return l=Ne("{model}:batchEmbedContents",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions}).then(f=>f.json()),o.then(f=>{const g=Ob(this.apiClient,f),w=new Lf;return Object.assign(w,g),w})}}async generateImages(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=gb(this.apiClient,e);return l=Ne("{model}:predict",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions}).then(f=>f.json()),o.then(f=>{const g=Bb(this.apiClient,f),w=new Df;return Object.assign(w,g),w})}else{const d=mb(this.apiClient,e);return l=Ne("{model}:predict",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions}).then(f=>f.json()),o.then(f=>{const g=Fb(this.apiClient,f),w=new Df;return Object.assign(w,g),w})}}async countTokens(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=xb(this.apiClient,e);return l=Ne("{model}:countTokens",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions}).then(f=>f.json()),o.then(f=>{const g=zb(this.apiClient,f),w=new Uf;return Object.assign(w,g),w})}else{const d=wb(this.apiClient,e);return l=Ne("{model}:countTokens",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions}).then(f=>f.json()),o.then(f=>{const g=Vb(this.apiClient,f),w=new Uf;return Object.assign(w,g),w})}}async computeTokens(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=bb(this.apiClient,e);return l=Ne("{model}:computeTokens",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions}).then(f=>f.json()),o.then(f=>{const g=Hb(this.apiClient,f),w=new $f;return Object.assign(w,g),w})}else{const d=_b(this.apiClient,e);return l=Ne("None",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions}).then(f=>f.json()),o.then(f=>{const g=qb(this.apiClient,f),w=new $f;return Object.assign(w,g),w})}}}function L_(i,e){const t={};if(m(e,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const s=m(e,["thought"]);s!=null&&v(t,["thought"],s);const o=m(e,["codeExecutionResult"]);o!=null&&v(t,["codeExecutionResult"],o);const l=m(e,["executableCode"]);l!=null&&v(t,["executableCode"],l);const u=m(e,["fileData"]);u!=null&&v(t,["fileData"],u);const d=m(e,["functionCall"]);d!=null&&v(t,["functionCall"],d);const f=m(e,["functionResponse"]);f!=null&&v(t,["functionResponse"],f);const g=m(e,["inlineData"]);g!=null&&v(t,["inlineData"],g);const w=m(e,["text"]);return w!=null&&v(t,["text"],w),t}function D_(i,e){const t={},s=m(e,["videoMetadata"]);s!=null&&v(t,["videoMetadata"],s);const o=m(e,["thought"]);o!=null&&v(t,["thought"],o);const l=m(e,["codeExecutionResult"]);l!=null&&v(t,["codeExecutionResult"],l);const u=m(e,["executableCode"]);u!=null&&v(t,["executableCode"],u);const d=m(e,["fileData"]);d!=null&&v(t,["fileData"],d);const f=m(e,["functionCall"]);f!=null&&v(t,["functionCall"],f);const g=m(e,["functionResponse"]);g!=null&&v(t,["functionResponse"],g);const w=m(e,["inlineData"]);w!=null&&v(t,["inlineData"],w);const _=m(e,["text"]);return _!=null&&v(t,["text"],_),t}function Vs(i,e){const t={},s=m(e,["parts"]);s!=null&&(Array.isArray(s)?v(t,["parts"],s.map(l=>L_(i,l))):v(t,["parts"],s));const o=m(e,["role"]);return o!=null&&v(t,["role"],o),t}function nr(i,e){const t={},s=m(e,["parts"]);s!=null&&(Array.isArray(s)?v(t,["parts"],s.map(l=>D_(i,l))):v(t,["parts"],s));const o=m(e,["role"]);return o!=null&&v(t,["role"],o),t}function U_(i,e){const t={};if(m(e,["example"])!==void 0)throw new Error("example parameter is not supported in Gemini API.");if(m(e,["pattern"])!==void 0)throw new Error("pattern parameter is not supported in Gemini API.");if(m(e,["minimum"])!==void 0)throw new Error("minimum parameter is not supported in Gemini API.");if(m(e,["default"])!==void 0)throw new Error("default parameter is not supported in Gemini API.");if(m(e,["anyOf"])!==void 0)throw new Error("anyOf parameter is not supported in Gemini API.");if(m(e,["maxLength"])!==void 0)throw new Error("maxLength parameter is not supported in Gemini API.");if(m(e,["title"])!==void 0)throw new Error("title parameter is not supported in Gemini API.");if(m(e,["minLength"])!==void 0)throw new Error("minLength parameter is not supported in Gemini API.");if(m(e,["minProperties"])!==void 0)throw new Error("minProperties parameter is not supported in Gemini API.");if(m(e,["maximum"])!==void 0)throw new Error("maximum parameter is not supported in Gemini API.");if(m(e,["maxProperties"])!==void 0)throw new Error("maxProperties parameter is not supported in Gemini API.");const s=m(e,["description"]);s!=null&&v(t,["description"],s);const o=m(e,["enum"]);o!=null&&v(t,["enum"],o);const l=m(e,["format"]);l!=null&&v(t,["format"],l);const u=m(e,["items"]);u!=null&&v(t,["items"],u);const d=m(e,["maxItems"]);d!=null&&v(t,["maxItems"],d);const f=m(e,["minItems"]);f!=null&&v(t,["minItems"],f);const g=m(e,["nullable"]);g!=null&&v(t,["nullable"],g);const w=m(e,["properties"]);w!=null&&v(t,["properties"],w);const _=m(e,["propertyOrdering"]);_!=null&&v(t,["propertyOrdering"],_);const b=m(e,["required"]);b!=null&&v(t,["required"],b);const k=m(e,["type"]);return k!=null&&v(t,["type"],k),t}function Rm(i,e){const t={},s=m(e,["example"]);s!=null&&v(t,["example"],s);const o=m(e,["pattern"]);o!=null&&v(t,["pattern"],o);const l=m(e,["minimum"]);l!=null&&v(t,["minimum"],l);const u=m(e,["default"]);u!=null&&v(t,["default"],u);const d=m(e,["anyOf"]);d!=null&&v(t,["anyOf"],d);const f=m(e,["maxLength"]);f!=null&&v(t,["maxLength"],f);const g=m(e,["title"]);g!=null&&v(t,["title"],g);const w=m(e,["minLength"]);w!=null&&v(t,["minLength"],w);const _=m(e,["minProperties"]);_!=null&&v(t,["minProperties"],_);const b=m(e,["maximum"]);b!=null&&v(t,["maximum"],b);const k=m(e,["maxProperties"]);k!=null&&v(t,["maxProperties"],k);const T=m(e,["description"]);T!=null&&v(t,["description"],T);const N=m(e,["enum"]);N!=null&&v(t,["enum"],N);const C=m(e,["format"]);C!=null&&v(t,["format"],C);const I=m(e,["items"]);I!=null&&v(t,["items"],I);const S=m(e,["maxItems"]);S!=null&&v(t,["maxItems"],S);const P=m(e,["minItems"]);P!=null&&v(t,["minItems"],P);const L=m(e,["nullable"]);L!=null&&v(t,["nullable"],L);const W=m(e,["properties"]);W!=null&&v(t,["properties"],W);const H=m(e,["propertyOrdering"]);H!=null&&v(t,["propertyOrdering"],H);const Q=m(e,["required"]);Q!=null&&v(t,["required"],Q);const se=m(e,["type"]);return se!=null&&v(t,["type"],se),t}function $_(i,e){const t={};if(m(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=m(e,["category"]);s!=null&&v(t,["category"],s);const o=m(e,["threshold"]);return o!=null&&v(t,["threshold"],o),t}function F_(i,e){const t={},s=m(e,["method"]);s!=null&&v(t,["method"],s);const o=m(e,["category"]);o!=null&&v(t,["category"],o);const l=m(e,["threshold"]);return l!=null&&v(t,["threshold"],l),t}function B_(i,e){const t={};if(m(e,["response"])!==void 0)throw new Error("response parameter is not supported in Gemini API.");const s=m(e,["description"]);s!=null&&v(t,["description"],s);const o=m(e,["name"]);o!=null&&v(t,["name"],o);const l=m(e,["parameters"]);return l!=null&&v(t,["parameters"],l),t}function V_(i,e){const t={},s=m(e,["response"]);s!=null&&v(t,["response"],Rm(i,s));const o=m(e,["description"]);o!=null&&v(t,["description"],o);const l=m(e,["name"]);l!=null&&v(t,["name"],l);const u=m(e,["parameters"]);return u!=null&&v(t,["parameters"],u),t}function z_(i,e){return{}}function q_(i,e){return{}}function H_(i,e){const t={},s=m(e,["mode"]);s!=null&&v(t,["mode"],s);const o=m(e,["dynamicThreshold"]);return o!=null&&v(t,["dynamicThreshold"],o),t}function W_(i,e){const t={},s=m(e,["mode"]);s!=null&&v(t,["mode"],s);const o=m(e,["dynamicThreshold"]);return o!=null&&v(t,["dynamicThreshold"],o),t}function G_(i,e){const t={},s=m(e,["dynamicRetrievalConfig"]);return s!=null&&v(t,["dynamicRetrievalConfig"],H_(i,s)),t}function K_(i,e){const t={},s=m(e,["dynamicRetrievalConfig"]);return s!=null&&v(t,["dynamicRetrievalConfig"],W_(i,s)),t}function Pm(i,e){const t={},s=m(e,["functionDeclarations"]);if(s!=null&&(Array.isArray(s)?v(t,["functionDeclarations"],s.map(d=>B_(i,d))):v(t,["functionDeclarations"],s)),m(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");m(e,["googleSearch"])!=null&&v(t,["googleSearch"],z_());const l=m(e,["googleSearchRetrieval"]);l!=null&&v(t,["googleSearchRetrieval"],G_(i,l));const u=m(e,["codeExecution"]);return u!=null&&v(t,["codeExecution"],u),t}function ku(i,e){const t={},s=m(e,["functionDeclarations"]);s!=null&&(Array.isArray(s)?v(t,["functionDeclarations"],s.map(f=>V_(i,f))):v(t,["functionDeclarations"],s));const o=m(e,["retrieval"]);o!=null&&v(t,["retrieval"],o),m(e,["googleSearch"])!=null&&v(t,["googleSearch"],q_());const u=m(e,["googleSearchRetrieval"]);u!=null&&v(t,["googleSearchRetrieval"],K_(i,u));const d=m(e,["codeExecution"]);return d!=null&&v(t,["codeExecution"],d),t}function J_(i,e){const t={},s=m(e,["mode"]);s!=null&&v(t,["mode"],s);const o=m(e,["allowedFunctionNames"]);return o!=null&&v(t,["allowedFunctionNames"],o),t}function Y_(i,e){const t={},s=m(e,["mode"]);s!=null&&v(t,["mode"],s);const o=m(e,["allowedFunctionNames"]);return o!=null&&v(t,["allowedFunctionNames"],o),t}function Q_(i,e){const t={},s=m(e,["functionCallingConfig"]);return s!=null&&v(t,["functionCallingConfig"],J_(i,s)),t}function X_(i,e){const t={},s=m(e,["functionCallingConfig"]);return s!=null&&v(t,["functionCallingConfig"],Y_(i,s)),t}function Z_(i,e){const t={},s=m(e,["voiceName"]);return s!=null&&v(t,["voiceName"],s),t}function eb(i,e){const t={},s=m(e,["voiceName"]);return s!=null&&v(t,["voiceName"],s),t}function tb(i,e){const t={},s=m(e,["prebuiltVoiceConfig"]);return s!=null&&v(t,["prebuiltVoiceConfig"],Z_(i,s)),t}function nb(i,e){const t={},s=m(e,["prebuiltVoiceConfig"]);return s!=null&&v(t,["prebuiltVoiceConfig"],eb(i,s)),t}function rb(i,e){const t={},s=m(e,["voiceConfig"]);return s!=null&&v(t,["voiceConfig"],tb(i,s)),t}function sb(i,e){const t={},s=m(e,["voiceConfig"]);return s!=null&&v(t,["voiceConfig"],nb(i,s)),t}function ib(i,e){const t={},s=m(e,["includeThoughts"]);return s!=null&&v(t,["includeThoughts"],s),t}function ob(i,e){const t={},s=m(e,["includeThoughts"]);return s!=null&&v(t,["includeThoughts"],s),t}function ab(i,e,t){const s={},o=m(e,["systemInstruction"]);t!==void 0&&o!=null&&v(t,["systemInstruction"],Vs(i,Ot(i,o)));const l=m(e,["temperature"]);l!=null&&v(s,["temperature"],l);const u=m(e,["topP"]);u!=null&&v(s,["topP"],u);const d=m(e,["topK"]);d!=null&&v(s,["topK"],d);const f=m(e,["candidateCount"]);f!=null&&v(s,["candidateCount"],f);const g=m(e,["maxOutputTokens"]);g!=null&&v(s,["maxOutputTokens"],g);const w=m(e,["stopSequences"]);w!=null&&v(s,["stopSequences"],w);const _=m(e,["responseLogprobs"]);_!=null&&v(s,["responseLogprobs"],_);const b=m(e,["logprobs"]);b!=null&&v(s,["logprobs"],b);const k=m(e,["presencePenalty"]);k!=null&&v(s,["presencePenalty"],k);const T=m(e,["frequencyPenalty"]);T!=null&&v(s,["frequencyPenalty"],T);const N=m(e,["seed"]);N!=null&&v(s,["seed"],N);const C=m(e,["responseMimeType"]);C!=null&&v(s,["responseMimeType"],C);const I=m(e,["responseSchema"]);if(I!=null&&v(s,["responseSchema"],U_(i,bm(i,I))),m(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");const S=m(e,["safetySettings"]);t!==void 0&&S!=null&&(Array.isArray(S)?v(t,["safetySettings"],S.map(G=>$_(i,G))):v(t,["safetySettings"],S));const P=m(e,["tools"]);t!==void 0&&P!=null&&(Array.isArray(P)?v(t,["tools"],Dr(i,Dr(i,P).map(G=>Pm(i,Em(i,G))))):v(t,["tools"],Dr(i,P)));const L=m(e,["toolConfig"]);if(t!==void 0&&L!=null&&v(t,["toolConfig"],Q_(i,L)),m(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const W=m(e,["cachedContent"]);t!==void 0&&W!=null&&v(t,["cachedContent"],On(i,W));const H=m(e,["responseModalities"]);H!=null&&v(s,["responseModalities"],H);const Q=m(e,["mediaResolution"]);Q!=null&&v(s,["mediaResolution"],Q);const se=m(e,["speechConfig"]);if(se!=null&&v(s,["speechConfig"],rb(i,km(i,se))),m(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const ve=m(e,["thinkingConfig"]);return ve!=null&&v(s,["thinkingConfig"],ib(i,ve)),s}function lb(i,e,t){const s={},o=m(e,["systemInstruction"]);t!==void 0&&o!=null&&v(t,["systemInstruction"],nr(i,Ot(i,o)));const l=m(e,["temperature"]);l!=null&&v(s,["temperature"],l);const u=m(e,["topP"]);u!=null&&v(s,["topP"],u);const d=m(e,["topK"]);d!=null&&v(s,["topK"],d);const f=m(e,["candidateCount"]);f!=null&&v(s,["candidateCount"],f);const g=m(e,["maxOutputTokens"]);g!=null&&v(s,["maxOutputTokens"],g);const w=m(e,["stopSequences"]);w!=null&&v(s,["stopSequences"],w);const _=m(e,["responseLogprobs"]);_!=null&&v(s,["responseLogprobs"],_);const b=m(e,["logprobs"]);b!=null&&v(s,["logprobs"],b);const k=m(e,["presencePenalty"]);k!=null&&v(s,["presencePenalty"],k);const T=m(e,["frequencyPenalty"]);T!=null&&v(s,["frequencyPenalty"],T);const N=m(e,["seed"]);N!=null&&v(s,["seed"],N);const C=m(e,["responseMimeType"]);C!=null&&v(s,["responseMimeType"],C);const I=m(e,["responseSchema"]);I!=null&&v(s,["responseSchema"],Rm(i,bm(i,I)));const S=m(e,["routingConfig"]);S!=null&&v(s,["routingConfig"],S);const P=m(e,["safetySettings"]);t!==void 0&&P!=null&&(Array.isArray(P)?v(t,["safetySettings"],P.map(Ee=>F_(i,Ee))):v(t,["safetySettings"],P));const L=m(e,["tools"]);t!==void 0&&L!=null&&(Array.isArray(L)?v(t,["tools"],Dr(i,Dr(i,L).map(Ee=>ku(i,Em(i,Ee))))):v(t,["tools"],Dr(i,L)));const W=m(e,["toolConfig"]);t!==void 0&&W!=null&&v(t,["toolConfig"],X_(i,W));const H=m(e,["labels"]);t!==void 0&&H!=null&&v(t,["labels"],H);const Q=m(e,["cachedContent"]);t!==void 0&&Q!=null&&v(t,["cachedContent"],On(i,Q));const se=m(e,["responseModalities"]);se!=null&&v(s,["responseModalities"],se);const ve=m(e,["mediaResolution"]);ve!=null&&v(s,["mediaResolution"],ve);const G=m(e,["speechConfig"]);G!=null&&v(s,["speechConfig"],sb(i,km(i,G)));const Ce=m(e,["audioTimestamp"]);Ce!=null&&v(s,["audioTimestamp"],Ce);const ge=m(e,["thinkingConfig"]);return ge!=null&&v(s,["thinkingConfig"],ob(i,ge)),s}function Gf(i,e){const t={},s=m(e,["model"]);s!=null&&v(t,["_url","model"],Ct(i,s));const o=m(e,["contents"]);o!=null&&(Array.isArray(o)?v(t,["contents"],Fe(i,Fe(i,o).map(u=>Vs(i,u)))):v(t,["contents"],Fe(i,o)));const l=m(e,["config"]);return l!=null&&v(t,["generationConfig"],ab(i,l,t)),t}function Kf(i,e){const t={},s=m(e,["model"]);s!=null&&v(t,["_url","model"],Ct(i,s));const o=m(e,["contents"]);o!=null&&(Array.isArray(o)?v(t,["contents"],Fe(i,Fe(i,o).map(u=>nr(i,u)))):v(t,["contents"],Fe(i,o)));const l=m(e,["config"]);return l!=null&&v(t,["generationConfig"],lb(i,l,t)),t}function ub(i,e,t){const s={},o=m(e,["taskType"]);t!==void 0&&o!=null&&v(t,["requests[]","taskType"],o);const l=m(e,["title"]);t!==void 0&&l!=null&&v(t,["requests[]","title"],l);const u=m(e,["outputDimensionality"]);if(t!==void 0&&u!=null&&v(t,["requests[]","outputDimensionality"],u),m(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(m(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return s}function cb(i,e,t){const s={},o=m(e,["taskType"]);t!==void 0&&o!=null&&v(t,["instances[]","task_type"],o);const l=m(e,["title"]);t!==void 0&&l!=null&&v(t,["instances[]","title"],l);const u=m(e,["outputDimensionality"]);t!==void 0&&u!=null&&v(t,["parameters","outputDimensionality"],u);const d=m(e,["mimeType"]);t!==void 0&&d!=null&&v(t,["instances[]","mimeType"],d);const f=m(e,["autoTruncate"]);return t!==void 0&&f!=null&&v(t,["parameters","autoTruncate"],f),s}function db(i,e){const t={},s=m(e,["model"]);s!=null&&v(t,["_url","model"],Ct(i,s));const o=m(e,["contents"]);o!=null&&v(t,["requests[]","content"],xm(i,o));const l=m(e,["config"]);l!=null&&v(t,["config"],ub(i,l,t));const u=m(e,["model"]);return u!==void 0&&v(t,["requests[]","model"],Ct(i,u)),t}function hb(i,e){const t={},s=m(e,["model"]);s!=null&&v(t,["_url","model"],Ct(i,s));const o=m(e,["contents"]);o!=null&&v(t,["instances[]","content"],xm(i,o));const l=m(e,["config"]);return l!=null&&v(t,["config"],cb(i,l,t)),t}function fb(i,e,t){const s={};if(m(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(m(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=m(e,["numberOfImages"]);t!==void 0&&o!=null&&v(t,["parameters","sampleCount"],o);const l=m(e,["aspectRatio"]);t!==void 0&&l!=null&&v(t,["parameters","aspectRatio"],l);const u=m(e,["guidanceScale"]);if(t!==void 0&&u!=null&&v(t,["parameters","guidanceScale"],u),m(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const d=m(e,["safetyFilterLevel"]);t!==void 0&&d!=null&&v(t,["parameters","safetySetting"],d);const f=m(e,["personGeneration"]);t!==void 0&&f!=null&&v(t,["parameters","personGeneration"],f);const g=m(e,["includeSafetyAttributes"]);t!==void 0&&g!=null&&v(t,["parameters","includeSafetyAttributes"],g);const w=m(e,["includeRaiReason"]);t!==void 0&&w!=null&&v(t,["parameters","includeRaiReason"],w);const _=m(e,["language"]);t!==void 0&&_!=null&&v(t,["parameters","language"],_);const b=m(e,["outputMimeType"]);t!==void 0&&b!=null&&v(t,["parameters","outputOptions","mimeType"],b);const k=m(e,["outputCompressionQuality"]);if(t!==void 0&&k!=null&&v(t,["parameters","outputOptions","compressionQuality"],k),m(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(m(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return s}function pb(i,e,t){const s={},o=m(e,["outputGcsUri"]);t!==void 0&&o!=null&&v(t,["parameters","storageUri"],o);const l=m(e,["negativePrompt"]);t!==void 0&&l!=null&&v(t,["parameters","negativePrompt"],l);const u=m(e,["numberOfImages"]);t!==void 0&&u!=null&&v(t,["parameters","sampleCount"],u);const d=m(e,["aspectRatio"]);t!==void 0&&d!=null&&v(t,["parameters","aspectRatio"],d);const f=m(e,["guidanceScale"]);t!==void 0&&f!=null&&v(t,["parameters","guidanceScale"],f);const g=m(e,["seed"]);t!==void 0&&g!=null&&v(t,["parameters","seed"],g);const w=m(e,["safetyFilterLevel"]);t!==void 0&&w!=null&&v(t,["parameters","safetySetting"],w);const _=m(e,["personGeneration"]);t!==void 0&&_!=null&&v(t,["parameters","personGeneration"],_);const b=m(e,["includeSafetyAttributes"]);t!==void 0&&b!=null&&v(t,["parameters","includeSafetyAttributes"],b);const k=m(e,["includeRaiReason"]);t!==void 0&&k!=null&&v(t,["parameters","includeRaiReason"],k);const T=m(e,["language"]);t!==void 0&&T!=null&&v(t,["parameters","language"],T);const N=m(e,["outputMimeType"]);t!==void 0&&N!=null&&v(t,["parameters","outputOptions","mimeType"],N);const C=m(e,["outputCompressionQuality"]);t!==void 0&&C!=null&&v(t,["parameters","outputOptions","compressionQuality"],C);const I=m(e,["addWatermark"]);t!==void 0&&I!=null&&v(t,["parameters","addWatermark"],I);const S=m(e,["enhancePrompt"]);return t!==void 0&&S!=null&&v(t,["parameters","enhancePrompt"],S),s}function mb(i,e){const t={},s=m(e,["model"]);s!=null&&v(t,["_url","model"],Ct(i,s));const o=m(e,["prompt"]);o!=null&&v(t,["instances[0]","prompt"],o);const l=m(e,["config"]);return l!=null&&v(t,["config"],fb(i,l,t)),t}function gb(i,e){const t={},s=m(e,["model"]);s!=null&&v(t,["_url","model"],Ct(i,s));const o=m(e,["prompt"]);o!=null&&v(t,["instances[0]","prompt"],o);const l=m(e,["config"]);return l!=null&&v(t,["config"],pb(i,l,t)),t}function vb(i,e){const t={};if(m(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(m(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(m(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function yb(i,e,t){const s={},o=m(e,["systemInstruction"]);t!==void 0&&o!=null&&v(t,["systemInstruction"],nr(i,Ot(i,o)));const l=m(e,["tools"]);t!==void 0&&l!=null&&(Array.isArray(l)?v(t,["tools"],l.map(d=>ku(i,d))):v(t,["tools"],l));const u=m(e,["generationConfig"]);return t!==void 0&&u!=null&&v(t,["generationConfig"],u),s}function wb(i,e){const t={},s=m(e,["model"]);s!=null&&v(t,["_url","model"],Ct(i,s));const o=m(e,["contents"]);o!=null&&(Array.isArray(o)?v(t,["contents"],Fe(i,Fe(i,o).map(u=>Vs(i,u)))):v(t,["contents"],Fe(i,o)));const l=m(e,["config"]);return l!=null&&v(t,["config"],vb(i,l)),t}function xb(i,e){const t={},s=m(e,["model"]);s!=null&&v(t,["_url","model"],Ct(i,s));const o=m(e,["contents"]);o!=null&&(Array.isArray(o)?v(t,["contents"],Fe(i,Fe(i,o).map(u=>nr(i,u)))):v(t,["contents"],Fe(i,o)));const l=m(e,["config"]);return l!=null&&v(t,["config"],yb(i,l,t)),t}function _b(i,e){const t={},s=m(e,["model"]);if(s!=null&&v(t,["_url","model"],Ct(i,s)),m(e,["contents"])!==void 0)throw new Error("contents parameter is not supported in Gemini API.");const o=m(e,["config"]);return o!=null&&v(t,["config"],o),t}function bb(i,e){const t={},s=m(e,["model"]);s!=null&&v(t,["_url","model"],Ct(i,s));const o=m(e,["contents"]);o!=null&&(Array.isArray(o)?v(t,["contents"],Fe(i,Fe(i,o).map(u=>nr(i,u)))):v(t,["contents"],Fe(i,o)));const l=m(e,["config"]);return l!=null&&v(t,["config"],l),t}function kb(i,e){const t={},s=m(e,["thought"]);s!=null&&v(t,["thought"],s);const o=m(e,["codeExecutionResult"]);o!=null&&v(t,["codeExecutionResult"],o);const l=m(e,["executableCode"]);l!=null&&v(t,["executableCode"],l);const u=m(e,["fileData"]);u!=null&&v(t,["fileData"],u);const d=m(e,["functionCall"]);d!=null&&v(t,["functionCall"],d);const f=m(e,["functionResponse"]);f!=null&&v(t,["functionResponse"],f);const g=m(e,["inlineData"]);g!=null&&v(t,["inlineData"],g);const w=m(e,["text"]);return w!=null&&v(t,["text"],w),t}function Eb(i,e){const t={},s=m(e,["videoMetadata"]);s!=null&&v(t,["videoMetadata"],s);const o=m(e,["thought"]);o!=null&&v(t,["thought"],o);const l=m(e,["codeExecutionResult"]);l!=null&&v(t,["codeExecutionResult"],l);const u=m(e,["executableCode"]);u!=null&&v(t,["executableCode"],u);const d=m(e,["fileData"]);d!=null&&v(t,["fileData"],d);const f=m(e,["functionCall"]);f!=null&&v(t,["functionCall"],f);const g=m(e,["functionResponse"]);g!=null&&v(t,["functionResponse"],g);const w=m(e,["inlineData"]);w!=null&&v(t,["inlineData"],w);const _=m(e,["text"]);return _!=null&&v(t,["text"],_),t}function Am(i,e){const t={},s=m(e,["parts"]);s!=null&&(Array.isArray(s)?v(t,["parts"],s.map(l=>kb(i,l))):v(t,["parts"],s));const o=m(e,["role"]);return o!=null&&v(t,["role"],o),t}function Im(i,e){const t={},s=m(e,["parts"]);s!=null&&(Array.isArray(s)?v(t,["parts"],s.map(l=>Eb(i,l))):v(t,["parts"],s));const o=m(e,["role"]);return o!=null&&v(t,["role"],o),t}function Sb(i,e){const t={},s=m(e,["citationSources"]);return s!=null&&v(t,["citations"],s),t}function Cb(i,e){const t={},s=m(e,["citations"]);return s!=null&&v(t,["citations"],s),t}function Tb(i,e){const t={},s=m(e,["content"]);s!=null&&v(t,["content"],Am(i,s));const o=m(e,["citationMetadata"]);o!=null&&v(t,["citationMetadata"],Sb(i,o));const l=m(e,["tokenCount"]);l!=null&&v(t,["tokenCount"],l);const u=m(e,["avgLogprobs"]);u!=null&&v(t,["avgLogprobs"],u);const d=m(e,["finishReason"]);d!=null&&v(t,["finishReason"],d);const f=m(e,["groundingMetadata"]);f!=null&&v(t,["groundingMetadata"],f);const g=m(e,["index"]);g!=null&&v(t,["index"],g);const w=m(e,["logprobsResult"]);w!=null&&v(t,["logprobsResult"],w);const _=m(e,["safetyRatings"]);return _!=null&&v(t,["safetyRatings"],_),t}function Nb(i,e){const t={},s=m(e,["content"]);s!=null&&v(t,["content"],Im(i,s));const o=m(e,["citationMetadata"]);o!=null&&v(t,["citationMetadata"],Cb(i,o));const l=m(e,["finishMessage"]);l!=null&&v(t,["finishMessage"],l);const u=m(e,["avgLogprobs"]);u!=null&&v(t,["avgLogprobs"],u);const d=m(e,["finishReason"]);d!=null&&v(t,["finishReason"],d);const f=m(e,["groundingMetadata"]);f!=null&&v(t,["groundingMetadata"],f);const g=m(e,["index"]);g!=null&&v(t,["index"],g);const w=m(e,["logprobsResult"]);w!=null&&v(t,["logprobsResult"],w);const _=m(e,["safetyRatings"]);return _!=null&&v(t,["safetyRatings"],_),t}function Jf(i,e){const t={},s=m(e,["candidates"]);s!=null&&(Array.isArray(s)?v(t,["candidates"],s.map(d=>Tb(i,d))):v(t,["candidates"],s));const o=m(e,["modelVersion"]);o!=null&&v(t,["modelVersion"],o);const l=m(e,["promptFeedback"]);l!=null&&v(t,["promptFeedback"],l);const u=m(e,["usageMetadata"]);return u!=null&&v(t,["usageMetadata"],u),t}function Yf(i,e){const t={},s=m(e,["candidates"]);s!=null&&(Array.isArray(s)?v(t,["candidates"],s.map(g=>Nb(i,g))):v(t,["candidates"],s));const o=m(e,["createTime"]);o!=null&&v(t,["createTime"],o);const l=m(e,["responseId"]);l!=null&&v(t,["responseId"],l);const u=m(e,["modelVersion"]);u!=null&&v(t,["modelVersion"],u);const d=m(e,["promptFeedback"]);d!=null&&v(t,["promptFeedback"],d);const f=m(e,["usageMetadata"]);return f!=null&&v(t,["usageMetadata"],f),t}function Rb(i,e){const t={},s=m(e,["truncated"]);s!=null&&v(t,["truncated"],s);const o=m(e,["token_count"]);return o!=null&&v(t,["tokenCount"],o),t}function Pb(i,e){const t={},s=m(e,["values"]);return s!=null&&v(t,["values"],s),t}function Ab(i,e){const t={},s=m(e,["values"]);s!=null&&v(t,["values"],s);const o=m(e,["statistics"]);return o!=null&&v(t,["statistics"],Rb(i,o)),t}function Ib(i,e){return{}}function jb(i,e){const t={},s=m(e,["billableCharacterCount"]);return s!=null&&v(t,["billableCharacterCount"],s),t}function Ob(i,e){const t={},s=m(e,["embeddings"]);return s!=null&&(Array.isArray(s)?v(t,["embeddings"],s.map(l=>Pb(i,l))):v(t,["embeddings"],s)),m(e,["metadata"])!=null&&v(t,["metadata"],Ib()),t}function Mb(i,e){const t={},s=m(e,["predictions[]","embeddings"]);s!=null&&(Array.isArray(s)?v(t,["embeddings"],s.map(l=>Ab(i,l))):v(t,["embeddings"],s));const o=m(e,["metadata"]);return o!=null&&v(t,["metadata"],jb(i,o)),t}function Lb(i,e){const t={},s=m(e,["bytesBase64Encoded"]);s!=null&&v(t,["imageBytes"],Sm(i,s));const o=m(e,["mimeType"]);return o!=null&&v(t,["mimeType"],o),t}function Db(i,e){const t={},s=m(e,["gcsUri"]);s!=null&&v(t,["gcsUri"],s);const o=m(e,["bytesBase64Encoded"]);o!=null&&v(t,["imageBytes"],Sm(i,o));const l=m(e,["mimeType"]);return l!=null&&v(t,["mimeType"],l),t}function Ub(i,e){const t={},s=m(e,["_self"]);s!=null&&v(t,["image"],Lb(i,s));const o=m(e,["raiFilteredReason"]);return o!=null&&v(t,["raiFilteredReason"],o),t}function $b(i,e){const t={},s=m(e,["_self"]);s!=null&&v(t,["image"],Db(i,s));const o=m(e,["raiFilteredReason"]);o!=null&&v(t,["raiFilteredReason"],o);const l=m(e,["prompt"]);return l!=null&&v(t,["enhancedPrompt"],l),t}function Fb(i,e){const t={},s=m(e,["predictions"]);return s!=null&&(Array.isArray(s)?v(t,["generatedImages"],s.map(o=>Ub(i,o))):v(t,["generatedImages"],s)),t}function Bb(i,e){const t={},s=m(e,["predictions"]);return s!=null&&(Array.isArray(s)?v(t,["generatedImages"],s.map(o=>$b(i,o))):v(t,["generatedImages"],s)),t}function Vb(i,e){const t={},s=m(e,["totalTokens"]);s!=null&&v(t,["totalTokens"],s);const o=m(e,["cachedContentTokenCount"]);return o!=null&&v(t,["cachedContentTokenCount"],o),t}function zb(i,e){const t={},s=m(e,["totalTokens"]);return s!=null&&v(t,["totalTokens"],s),t}function qb(i,e){const t={},s=m(e,["tokensInfo"]);return s!=null&&v(t,["tokensInfo"],s),t}function Hb(i,e){const t={},s=m(e,["tokensInfo"]);return s!=null&&v(t,["tokensInfo"],s),t}const Wb="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";function Gb(i,e){const t={},s=m(e,["generationConfig"]);s!==void 0&&v(t,["generationConfig"],s);const o=m(e,["responseModalities"]);o!==void 0&&v(t,["generationConfig","responseModalities"],o);const l=m(e,["speechConfig"]);l!==void 0&&v(t,["generationConfig","speechConfig"],l);const u=m(e,["systemInstruction"]);u!=null&&v(t,["systemInstruction"],Vs(i,u));const d=m(e,["tools"]);return d!=null&&Array.isArray(d)&&v(t,["tools"],d.map(f=>Pm(i,f))),t}function Kb(i,e){const t={},s=m(e,["generationConfig"]);s!==void 0&&v(t,["generationConfig"],s);const o=m(e,["responseModalities"]);o!==void 0?v(t,["generationConfig","responseModalities"],o):v(t,["generationConfig","responseModalities"],["AUDIO"]);const l=m(e,["speechConfig"]);l!==void 0&&v(t,["generationConfig","speechConfig"],l);const u=m(e,["systemInstruction"]);u!=null&&v(t,["systemInstruction"],nr(i,u));const d=m(e,["tools"]);return d!=null&&Array.isArray(d)&&v(t,["tools"],d.map(f=>ku(i,f))),t}function Jb(i,e){const t={},s=m(e,["config"]);s!=null&&v(t,["setup"],Gb(i,s));const o=m(e,["model"]);return o!==void 0&&v(t,["setup","model"],o),t}function Yb(i,e){const t={},s=m(e,["config"]);s!=null&&v(t,["setup"],Kb(i,s));const o=m(e,["model"]);return o!==void 0&&v(t,["setup","model"],o),t}function Qb(i,e){const t={},s=m(e,["modelTurn"]);s!=null&&v(t,["modelTurn"],Am(i,s));const o=m(e,["turnComplete"]);o!==void 0&&v(t,["turnComplete"],o);const l=m(e,["interrupted"]);return l!==void 0&&v(t,["interrupted"],l),t}function Xb(i,e){const t={},s=m(e,["modelTurn"]);s!=null&&v(t,["modelTurn"],Im(i,s));const o=m(e,["turnComplete"]);o!==void 0&&v(t,["turnComplete"],o);const l=m(e,["interrupted"]);return l!==void 0&&v(t,["interrupted"],l),t}function Zb(i,e){const t={},s=m(e,["id"]);s!==void 0&&v(t,["id"],s);const o=m(e,["args"]);o!==void 0&&v(t,["args"],o);const l=m(e,["name"]);return l!==void 0&&v(t,["name"],l),t}function ek(i,e){const t={},s=m(e,["args"]);s!==void 0&&v(t,["args"],s);const o=m(e,["name"]);return o!==void 0&&v(t,["name"],o),t}function tk(i,e){const t={},s=m(e,["functionCalls"]);return s!=null&&Array.isArray(s)&&v(t,["functionCalls"],s.map(o=>Zb(i,o))),t}function nk(i,e){const t={},s=m(e,["functionCalls"]);return s!=null&&Array.isArray(s)&&v(t,["functionCalls"],s.map(o=>ek(i,o))),t}function rk(i,e){const t={},s=m(e,["ids"]);return s!==void 0&&v(t,["ids"],s),t}function sk(i,e){const t={},s=m(e,["ids"]);return s!==void 0&&v(t,["ids"],s),t}function ik(i,e){const t={},s=m(e,["setupComplete"]);s!==void 0&&v(t,["setupComplete"],s);const o=m(e,["serverContent"]);o!=null&&v(t,["serverContent"],Qb(i,o));const l=m(e,["toolCall"]);l!=null&&v(t,["toolCall"],tk(i,l));const u=m(e,["toolCallCancellation"]);return u!=null&&v(t,["toolCallCancellation"],rk(i,u)),t}function ok(i,e){const t={},s=m(e,["setupComplete"]);s!==void 0&&v(t,["setupComplete"],s);const o=m(e,["serverContent"]);o!=null&&v(t,["serverContent"],Xb(i,o));const l=m(e,["toolCall"]);l!=null&&v(t,["toolCall"],nk(i,l));const u=m(e,["toolCallCancellation"]);return u!=null&&v(t,["toolCallCancellation"],sk(i,u)),t}async function ak(i,e,t){let s,o;t.data instanceof Blob?o=JSON.parse(await t.data.text()):o=JSON.parse(t.data),i.isVertexAI()?s=ok(i,o):s=ik(i,o),e(s)}class lk{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s}async connect(e){var t,s;if(this.apiClient.isVertexAI())throw new Error("This SDK does not yet support the live API for **Google Vertex AI**.");const o=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion();let u;const d=dk(this.apiClient.getDefaultHeaders());if(this.apiClient.isVertexAI())u=`${o}/ws/google.cloud.aiplatform.${l}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(d);else{const S=this.apiClient.getApiKey();u=`${o}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateContent?key=${S}`}let f=()=>{};const g=new Promise(S=>{f=S}),w=e.callbacks,_=function(){var S;(S=w?.onopen)===null||S===void 0||S.call(w),f({})},b=this.apiClient,k={onopen:_,onmessage:S=>{ak(b,w.onmessage,S)},onerror:(t=w?.onerror)!==null&&t!==void 0?t:function(S){},onclose:(s=w?.onclose)!==null&&s!==void 0?s:function(S){}},T=this.webSocketFactory.create(u,ck(d),k);T.connect(),await g;let N=Ct(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&N.startsWith("publishers/")){const S=this.apiClient.getProject(),P=this.apiClient.getLocation();N=`projects/${S}/locations/${P}/`+N}let C={};const I={model:N,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?C=Yb(this.apiClient,I):C=Jb(this.apiClient,I),T.send(JSON.stringify(C)),new uk(T,this.apiClient)}}class uk{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let s=[];try{s=Fe(e,t.turns),e.isVertexAI()?s=s.map(o=>nr(e,o)):s=s.map(o=>Vs(e,o))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:s,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClientRealtimeInput(e,t){let s={};if(!("media"in t)||!t.media)throw new Error(`Failed to convert realtime input "media", type: '${typeof t.media}'`);return s={realtimeInput:{mediaChunks:[t.media]}},s}tLiveClienttToolResponse(e,t){let s=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)||(s=[t.functionResponses]),s.length===0)throw new Error("functionResponses is required.");for(const l of s){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(Wb)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e.turns==null&&e.turnComplete==null&&(e={turnComplete:!0});const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){if(e.media==null)throw new Error("Media is required.");const t=this.tLiveClientRealtimeInput(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function ck(i){const e={};return i.forEach((t,s)=>{e[s]=t}),e}function dk(i){const e=new Headers;for(const[t,s]of Object.entries(i))e.append(t,s);return e}const hk="Content-Type",fk="User-Agent",pk="x-goog-api-client",mk="0.2.0",gk=`google-genai-sdk/${mk}`,vk="v1beta1",yk="v1beta",Qf=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class wk extends Error{constructor(e,t){t?super(e,{cause:t}):super(e,{cause:new Error().stack}),this.message=e,this.name="ClientError"}}class Xf extends Error{constructor(e,t){t?super(e,{cause:t}):super(e,{cause:new Error().stack}),this.message=e,this.name="ServerError"}}class xk{constructor(e){var t,s;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:vk,o.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`,this.clientOptions.apiKey=void 0):(o.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:yk,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol="wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t){const s=[this.getRequestUrlInternal(t)];return this.clientOptions.vertexai&&!e.startsWith("projects/")&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.constructUrl(e.path,t);if(e.queryParams)for(const[l,u]of Object.entries(e.queryParams))s.searchParams.append(l,String(u));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,t),this.unaryApiCall(s,o,e.httpMethod)}patchHttpOptions(e,t){const s=JSON.parse(JSON.stringify(e));for(const[o,l]of Object.entries(t))typeof l=="object"?s[o]=Object.assign(Object.assign({},s[o]),l):l!==void 0&&(s[o]=l);return s}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.constructUrl(e.path,t);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,t),this.streamApiCall(s,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t){if(t&&t.timeout&&t.timeout>0){const s=new AbortController,o=s.signal;setTimeout(()=>s.abort(),t.timeout),e.signal=o}return e.headers=await this.getHeadersInternal(t),e}async unaryApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async o=>(await Zf(o,e.toString()),new Tm(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async o=>(await Zf(o,e.toString()),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){var t;return So(this,arguments,function*(){const o=(t=e?.body)===null||t===void 0?void 0:t.getReader(),l=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let u="";for(;;){const{done:d,value:f}=yield yt(o.read());if(d){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const g=l.decode(f);u+=g;let w=u.match(Qf);for(;w;){const _=w[1];try{const b=JSON.parse(_);yield yield yt(b),u=u.slice(w[0].length),w=u.match(Qf)}catch(b){throw new Error(`exception parsing stream chunk ${_}. ${b}`)}}}}finally{o.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},t=gk+" "+this.clientOptions.userAgentExtra;return e[fk]=t,e[pk]=t,e[hk]="application/json",e}async getHeadersInternal(e){const t=new Headers;if(e&&e.headers)for(const[s,o]of Object.entries(e.headers))t.append(s,o);return await this.clientOptions.auth.addAuthHeaders(t),t}async uploadFile(e,t){var s;const o={};t!=null&&(o.mimeType=t.mimeType,o.name=t.name,o.displayName=t.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const l=this.clientOptions.uploader,u=await l.stat(e);o.sizeBytes=u.size;const d=(s=t?.mimeType)!==null&&s!==void 0?s:u.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=d;const f=await this.fetchUploadUrl(o,t);return l.upload(e,f,this)}async fetchUploadUrl(e,t){var s;let o={};t?.httpOptions?o=t.httpOptions:o={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const l={file:e},u=await this.request({path:Ne("upload/v1beta/files",l._url),body:JSON.stringify(l),httpMethod:"POST",httpOptions:o});if(!u||!u?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const d=(s=u?.headers)===null||s===void 0?void 0:s["x-goog-upload-url"];if(d===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return d}}async function Zf(i,e,t){var s;if(i===void 0)throw new Xf("response is undefined");if(!i.ok){const o=i.status,l=i.statusText;let u;!((s=i.headers.get("content-type"))===null||s===void 0)&&s.includes("application/json")?u=await i.json():u={error:{message:"exception parsing response",code:i.status,status:i.statusText}};const d=`got status: ${o} ${l}. ${JSON.stringify(u)}`;throw o>=400&&o<500?new wk(d):o>=500&&o<600?new Xf(d):new Error(d)}}class _k extends _u{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Cm(Eo.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(t),t)}async upload(e,t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e,t).then(s=>iu(this.apiClient,s))}async listInternal(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=Ek(this.apiClient,e);return l=Ne("None",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions}).then(f=>f.json()),o.then(f=>{const g=Ok(this.apiClient),w=new Vf;return Object.assign(w,g),w})}else{const d=kk(this.apiClient,e);return l=Ne("files",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions}).then(f=>f.json()),o.then(f=>{const g=jk(this.apiClient,f),w=new Vf;return Object.assign(w,g),w})}}async createInternal(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=Nk(this.apiClient,e);return l=Ne("",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions}).then(f=>f.json()),o.then(f=>{const g=Lk(this.apiClient,f),w=new zf;return Object.assign(w,g),w})}else{const d=Tk(this.apiClient,e);return l=Ne("upload/v1beta/files",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions}).then(f=>f.json()),o.then(f=>{const g=Mk(this.apiClient,f),w=new zf;return Object.assign(w,g),w})}}async get(e){var t,s;let o,l="",u={};if(this.apiClient.isVertexAI()){const d=Pk(this.apiClient,e);return l=Ne("None",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions}).then(f=>f.json()),o.then(f=>Ik(this.apiClient))}else{const d=Rk(this.apiClient,e);return l=Ne("files/{file}",d._url),u=d._query,delete d.config,delete d._url,delete d._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions}).then(f=>f.json()),o.then(f=>iu(this.apiClient,f))}}}function bk(i,e,t){const s={},o=m(e,["pageSize"]);t!==void 0&&o!=null&&v(t,["_query","pageSize"],o);const l=m(e,["pageToken"]);return t!==void 0&&l!=null&&v(t,["_query","pageToken"],l),s}function kk(i,e){const t={},s=m(e,["config"]);return s!=null&&v(t,["config"],bk(i,s,t)),t}function Ek(i,e){const t={};if(m(e,["config"])!==void 0)throw new Error("config parameter is not supported in Vertex AI.");return t}function Sk(i,e){const t={},s=m(e,["details"]);s!=null&&v(t,["details"],s);const o=m(e,["message"]);o!=null&&v(t,["message"],o);const l=m(e,["code"]);return l!=null&&v(t,["code"],l),t}function Ck(i,e){const t={},s=m(e,["name"]);s!=null&&v(t,["name"],s);const o=m(e,["displayName"]);o!=null&&v(t,["displayName"],o);const l=m(e,["mimeType"]);l!=null&&v(t,["mimeType"],l);const u=m(e,["sizeBytes"]);u!=null&&v(t,["sizeBytes"],u);const d=m(e,["createTime"]);d!=null&&v(t,["createTime"],d);const f=m(e,["expirationTime"]);f!=null&&v(t,["expirationTime"],f);const g=m(e,["updateTime"]);g!=null&&v(t,["updateTime"],g);const w=m(e,["sha256Hash"]);w!=null&&v(t,["sha256Hash"],w);const _=m(e,["uri"]);_!=null&&v(t,["uri"],_);const b=m(e,["downloadUri"]);b!=null&&v(t,["downloadUri"],b);const k=m(e,["state"]);k!=null&&v(t,["state"],k);const T=m(e,["source"]);T!=null&&v(t,["source"],T);const N=m(e,["videoMetadata"]);N!=null&&v(t,["videoMetadata"],N);const C=m(e,["error"]);return C!=null&&v(t,["error"],Sk(i,C)),t}function Tk(i,e){const t={},s=m(e,["file"]);s!=null&&v(t,["file"],Ck(i,s));const o=m(e,["config"]);return o!=null&&v(t,["config"],o),t}function Nk(i,e){const t={};if(m(e,["file"])!==void 0)throw new Error("file parameter is not supported in Vertex AI.");if(m(e,["config"])!==void 0)throw new Error("config parameter is not supported in Vertex AI.");return t}function Rk(i,e){const t={},s=m(e,["name"]);s!=null&&v(t,["_url","file"],Hx(i,s));const o=m(e,["config"]);return o!=null&&v(t,["config"],o),t}function Pk(i,e){const t={};if(m(e,["name"])!==void 0)throw new Error("name parameter is not supported in Vertex AI.");if(m(e,["config"])!==void 0)throw new Error("config parameter is not supported in Vertex AI.");return t}function Ak(i,e){const t={},s=m(e,["details"]);s!=null&&v(t,["details"],s);const o=m(e,["message"]);o!=null&&v(t,["message"],o);const l=m(e,["code"]);return l!=null&&v(t,["code"],l),t}function iu(i,e){const t={},s=m(e,["name"]);s!=null&&v(t,["name"],s);const o=m(e,["displayName"]);o!=null&&v(t,["displayName"],o);const l=m(e,["mimeType"]);l!=null&&v(t,["mimeType"],l);const u=m(e,["sizeBytes"]);u!=null&&v(t,["sizeBytes"],u);const d=m(e,["createTime"]);d!=null&&v(t,["createTime"],d);const f=m(e,["expirationTime"]);f!=null&&v(t,["expirationTime"],f);const g=m(e,["updateTime"]);g!=null&&v(t,["updateTime"],g);const w=m(e,["sha256Hash"]);w!=null&&v(t,["sha256Hash"],w);const _=m(e,["uri"]);_!=null&&v(t,["uri"],_);const b=m(e,["downloadUri"]);b!=null&&v(t,["downloadUri"],b);const k=m(e,["state"]);k!=null&&v(t,["state"],k);const T=m(e,["source"]);T!=null&&v(t,["source"],T);const N=m(e,["videoMetadata"]);N!=null&&v(t,["videoMetadata"],N);const C=m(e,["error"]);return C!=null&&v(t,["error"],Ak(i,C)),t}function Ik(i,e){return{}}function jk(i,e){const t={},s=m(e,["nextPageToken"]);s!=null&&v(t,["nextPageToken"],s);const o=m(e,["files"]);return o!=null&&(Array.isArray(o)?v(t,["files"],o.map(l=>iu(i,l))):v(t,["files"],o)),t}function Ok(i,e){return{}}function Mk(i,e){const t={},s=m(e,["httpHeaders"]);return s!=null&&v(t,["httpHeaders"],s),t}function Lk(i,e){const t={},s=m(e,["httpHeaders"]);return s!=null&&v(t,["httpHeaders"],s),t}function ep(){return new Error(`This feature requires the web or Node specific @google/genai implementation, you can fix this by either:

*Enabling conditional exports for your project [recommended]*

*Using a platform specific import* - Make sure your code imports either '@google/genai/web' or '@google/genai/node' instead of '@google/genai'.
`)}const Dk=1024*1024*8;class Uk{async upload(e,t,s){throw ep()}async stat(e){throw ep()}async uploadBlob(e,t,s){var o,l;let u=0,d=0,f=new Tm(new Response),g="upload";for(u=e.size;d<u;){const _=Math.min(Dk,u-d),b=e.slice(d,d+_);if(d+_>=u&&(g+=", finalize"),f=await s.request({path:"",body:b,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":String(d),"Content-Length":String(_)}}}),d+=_,((o=f?.headers)===null||o===void 0?void 0:o["x-goog-upload-status"])!=="active")break;if(u<=d)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const w=await f?.json();if(((l=f?.headers)===null||l===void 0?void 0:l["x-goog-upload-status"])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return w.file}}class $k{async upload(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await new Uk().uploadBlob(e,t,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return{size:e.size,type:e.type}}}class Fk{create(e,t,s){return new Bk(e,t,s)}}class Bk{constructor(e,t,s){this.url=e,this.headers=t,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}const tp="x-goog-api-key";class Vk{constructor(e){this.apiKey=e}async addAuthHeaders(e){e.get(tp)===null&&e.append(tp,this.apiKey)}}const zk="gl-node/";class qk{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey,this.apiVersion=e.apiVersion;const s=new Vk(this.apiKey);this.apiClient=new xk({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:zk+"web",uploader:new $k}),this.models=new M_(this.apiClient),this.live=new lk(this.apiClient,s,new Fk),this.chats=new j_(this.models,this.apiClient),this.caches=new Wx(this.apiClient),this.files=new _k(this.apiClient)}}const Hk=new qk({apiKey:"AIzaSyAchYinC_Q4fZgtkLAIsVNBvo9CzugBK1I"}),Wk="gemini-2.5-flash",np=(i="General Medicine")=>Hk.chats.create({model:Wk,config:{systemInstruction:`You are an expert medical tutor for MBBS students specializing in ${i}. 
      Your goal is to explain complex medical concepts clearly and concisely.
      
      Guidelines:
      - Focus heavily on ${i} related details (e.g., if Anatomy: relations, nerve supply, ossification).
      - Use bullet points for lists.
      - Use clinical correlations where appropriate.
      - If asked about non-medical topics, politely steer the conversation back to medicine or student life.
      - Keep responses encouraging and supportive.`}}),Gk=async(i,e)=>{try{return await i.sendMessageStream({message:e})}catch(t){throw console.error("Gemini API Error:",t),t}},co=["General Medicine","Anatomy","Physiology","Biochemistry","Pathology","Pharmacology","Microbiology","Forensic Medicine","Community Medicine","ENT","Ophthalmology","Surgery","OBG","Pediatrics"],Kk=()=>{const[i,e]=U.useState(co[0]),[t,s]=U.useState([{id:"1",role:"model",text:`Hello! I am your AI Medical Tutor specializing in ${co[0]}. Ask me anything!`}]),[o,l]=U.useState(""),[u,d]=U.useState(!1),[f,g]=U.useState(null),[w,_]=U.useState(()=>np(co[0])),b=U.useRef(null);U.useEffect(()=>{_(np(i)),s([{id:Date.now().toString(),role:"model",text:`Context switched to ${i}. How can I help you with this subject?`}])},[i]);const k=()=>{if(b.current){const{scrollHeight:S,clientHeight:P}=b.current;b.current.scrollTo({top:S-P,behavior:"smooth"})}};U.useEffect(()=>{k()},[t]);const T=async S=>{d(!0);const P=(Date.now()+1).toString();s(L=>[...L,{id:P,role:"model",text:"",isStreaming:!0}]);try{const L=await Gk(w,S);let W="";for await(const H of L){const Q=H;Q.text&&(W+=Q.text,s(se=>se.map(ve=>ve.id===P?{...ve,text:W}:ve)))}s(H=>H.map(Q=>Q.id===P?{...Q,isStreaming:!1}:Q))}catch{s(W=>W.map(H=>H.id===P?{...H,text:"Sorry, I encountered an error. Please check your connection.",isStreaming:!1}:H))}finally{d(!1)}},N=async()=>{if(!o.trim()||u)return;const S=o,P={id:Date.now().toString(),role:"user",text:S};s(L=>[...L,P]),l(""),await T(S)},C=async(S,P)=>{try{await navigator.clipboard.writeText(S),g(P),setTimeout(()=>g(null),2e3)}catch(L){console.error("Failed to copy",L)}},I=async()=>{if(u||t.length<2)return;let S=-1;for(let L=t.length-1;L>=0;L--)if(t[L].role==="user"){S=L;break}if(S===-1)return;const P=t[S];s(L=>L.slice(0,S+1)),await T(P.text)};return y.jsxs("div",{className:"h-[calc(100vh-8rem)] flex flex-col glass rounded-[2.5rem] border border-white/5 overflow-hidden shadow-2xl mb-20",children:[y.jsxs("div",{className:"p-5 bg-slate-100/50 dark:bg-slate-900/30 border-b border-white/5 flex flex-col sm:flex-row sm:items-center justify-between gap-4 backdrop-blur-sm",children:[y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx("div",{className:"w-12 h-12 rounded-2xl bg-purple-500/10 dark:bg-purple-600/20 flex items-center justify-center border border-purple-500/30 text-purple-600 dark:text-purple-300 shadow-inner",children:y.jsx(vo,{className:"w-6 h-6"})}),y.jsxs("div",{children:[y.jsx("h2",{className:"font-bold text-lg text-slate-900 dark:text-white",children:"AI Medical Tutor"}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse shadow-[0_0_8px_#22c55e]"}),y.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-300 font-medium",children:"Gemini 2.5 Flash Online"})]})]})]}),y.jsxs("div",{className:"relative",children:[y.jsx("select",{value:i,onChange:S=>e(S.target.value),className:"appearance-none bg-white dark:bg-white/5 border border-slate-200 dark:border-white/10 text-slate-900 dark:text-slate-200 text-sm rounded-xl py-3 pl-4 pr-10 focus:outline-none focus:border-purple-500/50 cursor-pointer hover:bg-white/50 dark:hover:bg-white/10 transition w-full sm:w-56 font-medium shadow-sm",children:co.map(S=>y.jsx("option",{value:S,children:S},S))}),y.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-slate-400",children:y.jsx(kp,{className:"w-4 h-4"})})]})]}),y.jsxs("div",{ref:b,className:"flex-1 overflow-y-auto p-5 space-y-6 bg-transparent scroll-smooth",children:[t.map((S,P)=>y.jsx("div",{className:`flex ${S.role==="user"?"justify-end":"justify-start"}`,children:y.jsxs("div",{className:`max-w-[85%] md:max-w-[75%] rounded-3xl p-5 shadow-lg relative group ${S.role==="user"?"bg-blue-600 text-white rounded-br-none":"bg-white dark:bg-white/5 text-slate-900 dark:text-slate-200 border border-slate-200 dark:border-white/10 rounded-bl-none backdrop-blur-md"}`,children:[S.role==="model"&&y.jsxs("div",{className:"flex items-center gap-2 mb-2 text-purple-600 dark:text-purple-300 text-xs font-bold uppercase tracking-wider",children:[y.jsx(dy,{className:"w-3 h-3"})," ",i," Tutor"]}),y.jsxs("div",{className:"whitespace-pre-wrap text-sm leading-relaxed font-medium",children:[S.text,S.isStreaming&&y.jsx("span",{className:"inline-block w-1.5 h-4 ml-1 align-middle bg-slate-400 animate-pulse"})]}),S.role==="model"&&!S.isStreaming&&y.jsxs("div",{className:"mt-3 pt-3 border-t border-slate-100 dark:border-white/5 flex items-center justify-end gap-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:[y.jsx("button",{onClick:()=>C(S.text,S.id),className:"p-1.5 rounded-lg hover:bg-slate-100 dark:hover:bg-white/10 text-slate-400 hover:text-slate-600 dark:hover:text-white transition",title:"Copy Response",children:f===S.id?y.jsx(Bl,{className:"w-3.5 h-3.5 text-green-500"}):y.jsx(Zv,{className:"w-3.5 h-3.5"})}),P===t.length-1&&y.jsx("button",{onClick:I,className:"p-1.5 rounded-lg hover:bg-slate-100 dark:hover:bg-white/10 text-slate-400 hover:text-slate-600 dark:hover:text-white transition",title:"Regenerate Response",children:y.jsx(uy,{className:"w-3.5 h-3.5"})})]})]})},S.id)),u&&t[t.length-1].role==="user"&&y.jsx("div",{className:"flex justify-start",children:y.jsxs("div",{className:"bg-white dark:bg-white/5 text-slate-500 dark:text-slate-400 border border-slate-200 dark:border-white/10 rounded-3xl rounded-bl-none p-5 flex items-center gap-3 backdrop-blur-md",children:[y.jsx(Gv,{className:"w-5 h-5 animate-bounce"}),y.jsx("span",{className:"text-sm font-medium",children:"Thinking..."})]})})]}),y.jsxs("div",{className:"p-5 bg-slate-100/50 dark:bg-slate-900/40 border-t border-white/5 backdrop-blur-lg",children:[y.jsxs("div",{className:"relative flex items-center gap-3",children:[y.jsx("input",{type:"text",value:o,onChange:S=>l(S.target.value),onKeyDown:S=>S.key==="Enter"&&N(),placeholder:`Ask a question about ${i}...`,disabled:u,className:"w-full bg-white dark:bg-slate-800/50 border border-slate-200 dark:border-white/10 text-slate-900 dark:text-slate-200 text-sm rounded-2xl py-4 pl-5 pr-14 focus:outline-none focus:border-blue-500/50 focus:bg-slate-50 dark:focus:bg-slate-800/80 transition disabled:opacity-50 placeholder-slate-400 dark:placeholder-slate-500 shadow-inner"}),y.jsx("button",{onClick:N,disabled:!o.trim()||u,className:"absolute right-2 p-2.5 bg-blue-600 text-white rounded-xl hover:bg-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition shadow-lg shadow-blue-900/20 active:scale-95",children:y.jsx(zl,{className:"w-5 h-5"})})]}),y.jsxs("p",{className:"text-[10px] text-slate-500 mt-3 text-center flex items-center justify-center gap-1.5 opacity-70",children:[y.jsx(gp,{className:"w-3 h-3"}),"AI can make mistakes. Always verify with your textbooks."]})]})]})},Jk=({user:i,onUpdateUser:e,onLogout:t})=>{const[s,o]=U.useState(!1),[l,u]=U.useState(!1),[d,f]=U.useState(""),[g,w]=U.useState(""),[_,b]=U.useState(!1),k=U.useRef(null),[T,N]=U.useState(!1),[C,I]=U.useState(0);U.useEffect(()=>{if(i.username_last_changed){const G=new Date(i.username_last_changed).getTime(),Ce=Date.now(),ge=10080*60*1e3,Ee=Ce-G;Ee<ge?(N(!1),I(Math.ceil((ge-Ee)/(1440*60*1e3)))):N(!0)}else N(!0)},[i.username_last_changed]);const[S,P]=U.useState({fullname:i.fullname,email:i.email,phone:i.phone||"",dob:i.dob||"",avatar:i.avatar||"",username:i.username}),L=G=>{P({...S,[G.target.name]:G.target.value}),f("")},W=()=>{if(!S.fullname.trim())return"Full name is required";if(!S.email.trim()||!/^\S+@\S+\.\S+$/.test(S.email))return"Invalid email address";if(S.phone&&!/^\d{10}$/.test(S.phone.replace(/\D/g,"")))return"Phone must be 10 digits";if(S.username!==i.username){if(!/^[a-zA-Z0-9_]+$/.test(S.username))return"Username can only contain letters, numbers, and underscores";if(S.username.length<3)return"Username must be at least 3 characters"}return null},H=G=>{if(G.target.files&&G.target.files[0]){const Ce=G.target.files[0];if(Ce.size>2*1024*1024){f("Image size should be less than 2MB");return}const ge=new FileReader;ge.onload=Ee=>{Ee.target?.result&&P(qe=>({...qe,avatar:Ee.target.result}))},ge.readAsDataURL(Ce)}},Q=()=>{const G=W();if(G){f(G);return}S.username!==i.username?b(!0):se()},se=async()=>{u(!0),f(""),w(""),b(!1);try{const G=S.username!==i.username,Ce={fullname:S.fullname,email:S.email,phone:S.phone,dob:S.dob,avatar_data:S.avatar};if(G){if(!T)throw new Error("You cannot change your username yet.");Ce.username=S.username,Ce.username_last_changed=new Date().toISOString()}const{error:ge}=await Re.from("profiles").update(Ce).eq("username",i.username);if(ge)throw ge.code==="23505"?new Error("Username already taken"):ge;const Ee={...i,fullname:S.fullname,email:S.email,phone:S.phone,dob:S.dob,avatar:S.avatar,username:S.username,username_last_changed:G?Ce.username_last_changed:i.username_last_changed};e(Ee),w(G?"Profile & Username updated!":"Profile updated successfully!"),o(!1)}catch(G){console.error("Update failed",G),f(Is(G))}finally{u(!1)}},ve=()=>{P({fullname:i.fullname,email:i.email,phone:i.phone||"",dob:i.dob||"",avatar:i.avatar||"",username:i.username}),o(!1),f("")};return y.jsxs("div",{className:"max-w-2xl mx-auto animate-fade-in pb-20",children:[y.jsxs("div",{className:"glass rounded-[2.5rem] border border-white/5 overflow-hidden shadow-2xl",children:[y.jsxs("div",{className:"h-40 bg-gradient-to-r from-blue-900/40 to-purple-900/40 relative",children:[y.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-10"}),!s&&y.jsx("button",{onClick:()=>o(!0),className:"absolute top-6 right-6 bg-black/30 hover:bg-black/50 text-white p-2.5 rounded-full backdrop-blur-md transition border border-white/10 shadow-lg",children:y.jsx(bp,{className:"w-4 h-4"})})]}),y.jsxs("div",{className:"px-8 pb-10",children:[y.jsxs("div",{className:"relative -mt-20 mb-8 flex flex-col md:flex-row md:items-end justify-between gap-6",children:[y.jsxs("div",{className:"relative group self-center md:self-auto",children:[y.jsx("div",{className:"w-40 h-40 rounded-[2.5rem] p-1.5 glass-heavy shadow-2xl",children:y.jsx("img",{src:S.avatar||`https://placehold.co/150x150/1e293b/white?text=${S.fullname.charAt(0)}`,alt:"Profile",className:"w-full h-full rounded-[2rem] object-cover bg-slate-800",onError:G=>{G.currentTarget.src=`https://placehold.co/150x150/1e293b/white?text=${S.fullname.charAt(0)}`}})}),s&&y.jsxs("div",{onClick:()=>k.current?.click(),className:"absolute inset-0 m-1.5 flex items-center justify-center rounded-[2rem] bg-black/60 opacity-0 group-hover:opacity-100 transition cursor-pointer border-2 border-white/20 backdrop-blur-sm z-10",children:[y.jsx(Kv,{className:"w-8 h-8 text-white"}),y.jsx("input",{type:"file",ref:k,className:"hidden",accept:"image/*",onChange:H})]})]}),s?y.jsxs("div",{className:"flex gap-3 mb-2 self-center md:self-auto",children:[y.jsx("button",{onClick:ve,disabled:l,className:"p-3 rounded-2xl bg-white/5 hover:bg-white/10 text-slate-300 transition border border-white/5",children:y.jsx(Ls,{className:"w-5 h-5"})}),y.jsxs("button",{onClick:Q,disabled:l,className:"px-6 py-3 rounded-2xl bg-blue-600 hover:bg-blue-500 text-white font-bold flex items-center gap-2 transition shadow-lg shadow-blue-900/20",children:[l?y.jsx(Ms,{className:"w-4 h-4 animate-spin"}):y.jsx(Vl,{className:"w-4 h-4"}),"Save Changes"]})]}):y.jsx("div",{className:"mb-4 hidden md:block",children:y.jsxs("span",{className:"bg-white/5 text-blue-600 dark:text-blue-200 text-sm px-4 py-2 rounded-full border border-slate-200 dark:border-white/10 backdrop-blur-md shadow-inner",children:["@",i.username]})})]}),d&&y.jsxs("div",{className:"mb-6 bg-red-500/20 border border-red-500/30 text-red-100 px-5 py-4 rounded-2xl flex items-center gap-3 text-sm backdrop-blur-md",children:[y.jsx(gp,{className:"w-5 h-5"})," ",d]}),g&&y.jsxs("div",{className:"mb-6 bg-green-500/20 border border-green-500/30 text-green-100 px-5 py-4 rounded-2xl flex items-center gap-3 text-sm backdrop-blur-md",children:[y.jsx(Vl,{className:"w-5 h-5"})," ",g]}),y.jsxs("div",{className:"space-y-6",children:[!s&&y.jsxs("div",{className:"mb-8 text-center md:text-left",children:[y.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white mb-1",children:i.fullname}),y.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-medium",children:"Medical Student  RMCH"}),y.jsx("div",{className:"md:hidden mt-4",children:y.jsxs("span",{className:"bg-white/5 text-blue-600 dark:text-blue-200 text-xs px-3 py-1.5 rounded-full border border-white/10",children:["@",i.username]})})]}),s&&y.jsx("div",{className:"grid gap-4 animate-slide-up",children:y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs text-slate-500 dark:text-slate-400 uppercase font-bold mb-2 ml-1",children:"Full Name"}),y.jsx("input",{name:"fullname",type:"text",value:S.fullname,onChange:L,className:"w-full bg-slate-100 dark:bg-slate-900/50 border border-slate-200 dark:border-white/10 rounded-2xl p-4 text-slate-900 dark:text-white focus:border-blue-500/50 outline-none transition focus:bg-slate-200 dark:focus:bg-slate-900/80"})]})}),y.jsxs("div",{className:"grid md:grid-cols-2 gap-5",children:[y.jsxs("div",{className:"bg-white dark:bg-white/5 p-5 rounded-3xl border border-slate-200 dark:border-white/5 hover:bg-slate-50 dark:hover:bg-white/10 transition duration-300 shadow-sm",children:[y.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[y.jsx("div",{className:"p-2 bg-blue-500/20 rounded-xl text-blue-600 dark:text-blue-400",children:y.jsx(oy,{className:"w-4 h-4"})}),y.jsx("label",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase font-bold tracking-wider",children:"Email"})]}),s?y.jsx("input",{name:"email",type:"email",value:S.email,onChange:L,className:"w-full bg-transparent border-b border-slate-200 dark:border-white/10 text-slate-900 dark:text-white py-2 focus:border-blue-500/50 outline-none transition"}):y.jsx("p",{className:"text-slate-900 dark:text-slate-200 font-medium pl-1",children:i.email})]}),y.jsxs("div",{className:"bg-white dark:bg-white/5 p-5 rounded-3xl border border-slate-200 dark:border-white/5 hover:bg-slate-50 dark:hover:bg-white/10 transition duration-300 shadow-sm",children:[y.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[y.jsx("div",{className:"p-2 bg-green-500/20 rounded-xl text-green-600 dark:text-green-400",children:y.jsx(ay,{className:"w-4 h-4"})}),y.jsx("label",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase font-bold tracking-wider",children:"Phone"})]}),s?y.jsx("input",{name:"phone",type:"tel",value:S.phone,onChange:L,className:"w-full bg-transparent border-b border-slate-200 dark:border-white/10 text-slate-900 dark:text-white py-2 focus:border-blue-500/50 outline-none transition"}):y.jsx("p",{className:"text-slate-900 dark:text-slate-200 font-medium pl-1",children:i.phone||"Not set"})]}),y.jsxs("div",{className:"bg-white dark:bg-white/5 p-5 rounded-3xl border border-slate-200 dark:border-white/5 hover:bg-slate-50 dark:hover:bg-white/10 transition duration-300 shadow-sm",children:[y.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[y.jsx("div",{className:"p-2 bg-purple-500/20 rounded-xl text-purple-600 dark:text-purple-400",children:y.jsx(wp,{className:"w-4 h-4"})}),y.jsx("label",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase font-bold tracking-wider",children:"DOB"})]}),s?y.jsx("input",{name:"dob",type:"date",value:S.dob,onChange:L,className:"w-full bg-transparent border-b border-slate-200 dark:border-white/10 text-slate-900 dark:text-white py-2 focus:border-blue-500/50 outline-none transition"}):y.jsx("p",{className:"text-slate-900 dark:text-slate-200 font-medium pl-1",children:i.dob||"Not set"})]}),y.jsxs("div",{className:`bg-white dark:bg-white/5 p-5 rounded-3xl border border-slate-200 dark:border-white/5 hover:bg-slate-50 dark:hover:bg-white/10 transition duration-300 shadow-sm ${s&&!T?"opacity-70":""}`,children:[y.jsxs("div",{className:"flex items-center justify-between mb-2",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"p-2 bg-slate-200 dark:bg-slate-500/20 rounded-xl text-slate-600 dark:text-slate-400",children:y.jsx(yo,{className:"w-4 h-4"})}),y.jsx("label",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase font-bold tracking-wider",children:"Username"})]}),s&&!T&&y.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] text-orange-600 dark:text-orange-400 bg-orange-100 dark:bg-orange-500/10 px-2 py-1 rounded-lg border border-orange-500/20",title:`Locked for ${C} more days`,children:[y.jsx(Xv,{className:"w-3 h-3"})," ",C,"d lock"]})]}),s?T?y.jsx("input",{name:"username",type:"text",value:S.username,onChange:L,className:"w-full bg-transparent border-b border-slate-200 dark:border-white/10 text-slate-900 dark:text-white py-2 focus:border-blue-500/50 outline-none transition"}):y.jsx("div",{children:y.jsx("p",{className:"text-slate-500 dark:text-slate-400 pl-1",children:S.username})}):y.jsxs("p",{className:"text-slate-900 dark:text-slate-200 font-medium pl-1",children:["@",i.username]})]})]})]})]})]}),y.jsx("div",{className:"mt-8 text-center space-y-4",children:y.jsxs("button",{onClick:t,className:"w-full glass rounded-2xl py-4 text-red-500 hover:text-red-600 hover:bg-red-500/5 transition font-bold flex items-center justify-center gap-2 shadow-lg border border-red-500/10",children:[y.jsx(iy,{className:"w-5 h-5"})," Logout"]})}),_&&y.jsx("div",{className:"fixed inset-0 bg-slate-900/60 dark:bg-black/70 flex items-center justify-center z-50 p-4 backdrop-blur-md animate-fade-in",children:y.jsxs("div",{className:"glass-heavy border border-white/20 dark:border-white/10 p-6 rounded-[2rem] max-w-sm w-full shadow-2xl",children:[y.jsxs("div",{className:"flex flex-col items-center text-center mb-6",children:[y.jsx("div",{className:"w-16 h-16 bg-orange-500/10 rounded-full flex items-center justify-center mb-4 border border-orange-500/20",children:y.jsx(vp,{className:"w-8 h-8 text-orange-500 dark:text-orange-400"})}),y.jsx("h3",{className:"font-bold text-xl text-slate-900 dark:text-white mb-2",children:"Change Username?"}),y.jsxs("p",{className:"text-slate-600 dark:text-slate-300 text-sm leading-relaxed",children:["Changing your username will lock it for ",y.jsx("span",{className:"text-orange-500 dark:text-orange-300 font-bold",children:"7 days"}),". You won't be able to change it again during this period."]})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsx("button",{onClick:se,className:"w-full py-3.5 bg-blue-600 hover:bg-blue-500 text-white rounded-xl font-bold transition shadow-lg shadow-blue-900/20 flex justify-center items-center gap-2",children:l?y.jsx(Ms,{className:"w-4 h-4 animate-spin"}):"Yes, Change it"}),y.jsx("button",{onClick:()=>b(!1),className:"w-full py-3.5 bg-slate-100 dark:bg-white/5 hover:bg-slate-200 dark:hover:bg-white/10 text-slate-600 dark:text-slate-300 rounded-xl font-medium transition border border-slate-200 dark:border-white/5",children:"Cancel"})]})]})})]})},Yk=()=>{const[i,e]=U.useState(null),[t,s]=U.useState([]),[o,l]=U.useState(""),[u,d]=U.useState("dark");U.useEffect(()=>{const b=localStorage.getItem("rimt_user_obj");b&&e(JSON.parse(b));const k=localStorage.getItem("rimt_theme");k?(d(k),document.documentElement.setAttribute("data-theme",k),k==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")):(document.documentElement.classList.add("dark"),document.documentElement.setAttribute("data-theme","dark")),(async()=>{try{const{data:C}=await Re.from("settings").select("value").eq("key","logo_url").single();C?.value&&l(C.value)}catch(C){console.error("Error fetching logo",C)}})();const{data:{subscription:N}}=Re.auth.onAuthStateChange((C,I)=>{C==="SIGNED_OUT"&&_()});return()=>{N.unsubscribe()}},[]);const f=()=>{const b=u==="dark"?"light":"dark",k=()=>{d(b),localStorage.setItem("rimt_theme",b),document.documentElement.setAttribute("data-theme",b),b==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")};if(!document.startViewTransition){k();return}document.startViewTransition(()=>{k()})},g=b=>{e(b),localStorage.setItem("rimt_user_obj",JSON.stringify(b)),window.location.hash="/"},w=b=>{e(b),localStorage.setItem("rimt_user_obj",JSON.stringify(b))},_=async()=>{e(null),s([]),localStorage.removeItem("rimt_user_obj"),await Re.auth.signOut(),window.location.hash="/"};return i?y.jsx(Fv,{children:y.jsx(fy,{onLogout:_,user:i,logoUrl:o,currentTheme:u,toggleTheme:f,children:y.jsxs(jv,{children:[y.jsx(Cn,{path:"/",element:y.jsx(Lx,{user:i})}),y.jsx(Cn,{path:"/attendance",element:y.jsx(Dx,{subjects:t,setSubjects:s,username:i.username})}),y.jsx(Cn,{path:"/library",element:y.jsx(Ux,{})}),y.jsx(Cn,{path:"/social",element:y.jsx(Fx,{user:i.username,userAvatar:i.avatar})}),y.jsx(Cn,{path:"/ai-tutor",element:y.jsx(Kk,{})}),y.jsx(Cn,{path:"/profile",element:y.jsx(Jk,{user:i,onUpdateUser:w,onLogout:_})}),y.jsx(Cn,{path:"*",element:y.jsx(Av,{to:"/",replace:!0})})]})})}):y.jsx(Bx,{onLogin:g,logoUrl:o})},jm=document.getElementById("root");if(!jm)throw new Error("Could not find root element to mount to");const Qk=F0.createRoot(jm);Qk.render(y.jsx(sp.StrictMode,{children:y.jsx(Yk,{})}));
